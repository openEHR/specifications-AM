<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="description" content="openEHR AOM2 Specification">
<meta name="keywords" content="EHR, ADL, AOM, health records, archetypes, constraint language, 13606">
<title>Archetype Object Model 2 (AOM2) Specification</title>
<link rel="stylesheet" href="http://www.openehr.org/releases/BASE/latest/resources/css/openehr.css">
<link rel="stylesheet" href="http://www.openehr.org/releases/BASE/latest/resources/css/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_archetype_object_model_2_aom2_specification">Archetype Object Model 2 (AOM2) Specification</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_supporters">Supporters</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_nomenclature">1.3. Nomenclature</a></li>
<li><a href="#_status">1.4. Status</a></li>
<li><a href="#_tools">1.5. Tools</a></li>
<li><a href="#_changes_from_previous_versions">1.6. Changes from Previous Versions</a>
<ul class="sectlevel3">
<li><a href="#_release_1_5_to_2_0_document_version_2_1_2">1.6.1. Release 1.5 to 2.0 (Document version 2.1.2 - )</a></li>
<li><a href="#_release_1_4_to_1_5_document_version_2_0_to_2_1_1">1.6.2. Release 1.4 to 1.5 (Document version 2.0 to 2.1.1)</a></li>
<li><a href="#_release_0_6_to_1_4">1.6.3. Release 0.6 to 1.4</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_model_overview">2. Model Overview</a>
<ul class="sectlevel2">
<li><a href="#_package_structure">2.1. Package Structure</a></li>
<li><a href="#_definition_and_utility_classes">2.2. Definition and Utility Classes</a>
<ul class="sectlevel3">
<li><a href="#_overview">2.2.1. Overview</a></li>
<li><a href="#_class_definitions">2.2.2. Class Definitions</a></li>
<li><a href="#_version_status_enumeration">2.2.3. VERSION_STATUS Enumeration</a></li>
<li><a href="#_validity_kind_enumeration">2.2.4. VALIDITY_KIND Enumeration</a></li>
<li><a href="#_adl_code_definitions_class">2.2.5. ADL_CODE_DEFINITIONS Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_archetype_package">3. The Archetype Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_archteype_identification">3.2. Archteype Identification</a>
<ul class="sectlevel3">
<li><a href="#_human_readable_identifier_hrid">3.2.1. Human-Readable Identifier (HRID)</a></li>
<li><a href="#_machine_identifiers">3.2.2. Machine Identifiers</a></li>
</ul>
</li>
<li><a href="#_top_level_meta_data">3.3. Top-level Meta-data</a>
<ul class="sectlevel3">
<li><a href="#_adl_version">3.3.1. ADL Version</a></li>
<li><a href="#_reference_model_release">3.3.2. Reference Model Release</a></li>
<li><a href="#_generated_flag">3.3.3. Generated Flag</a></li>
</ul>
</li>
<li><a href="#_governance_meta_data">3.4. Governance Meta-data</a>
<ul class="sectlevel3">
<li><a href="#_governance_meta_data_items">3.4.1. Governance Meta-data Items</a>
<ul class="sectlevel4">
<li><a href="#_package">3.4.1.1. Package</a></li>
<li><a href="#_lifecycle_state">3.4.1.2. Lifecycle_state</a></li>
<li><a href="#_original_namespace_and_original_publisher">3.4.1.3. Original_namespace and Original_publisher</a></li>
<li><a href="#_custodian_namespace_and_custodian_organisation">3.4.1.4. Custodian_namespace and Custodian_organisation</a></li>
<li><a href="#_intellectual_property_items">3.4.1.5. Intellectual Property Items</a></li>
</ul>
</li>
<li><a href="#_authorship_meta_data">3.4.2. Authorship Meta-data</a>
<ul class="sectlevel4">
<li><a href="#_original_author">3.4.2.1. Original Author</a></li>
<li><a href="#_contributors_2">3.4.2.2. Contributors</a></li>
<li><a href="#_languages_and_translation">3.4.2.3. Languages and Translation</a></li>
<li><a href="#_version_last_translated">3.4.2.4. Version_last_translated</a></li>
</ul>
</li>
<li><a href="#_descriptive_meta_data">3.4.3. Descriptive Meta-data</a>
<ul class="sectlevel4">
<li><a href="#_purpose_2">3.4.3.1. Purpose</a></li>
<li><a href="#_use_and_misuse">3.4.3.2. Use and Misuse</a></li>
<li><a href="#_keywords">3.4.3.3. Keywords</a></li>
<li><a href="#_resources">3.4.3.4. Resources</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_structural_definition">3.5. Structural Definition</a>
<ul class="sectlevel3">
<li><a href="#_common_structural_parts">3.5.1. Common Structural Parts</a></li>
<li><a href="#_structural_variants">3.5.2. Structural Variants</a></li>
</ul>
</li>
<li><a href="#_class_descriptions">3.6. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_authored_resource_class">3.6.1. AUTHORED_RESOURCE Class</a></li>
<li><a href="#_resource_description_class">3.6.2. RESOURCE_DESCRIPTION Class</a></li>
<li><a href="#_resource_description_item_class">3.6.3. RESOURCE_DESCRIPTION_ITEM Class</a></li>
<li><a href="#_resource_annotations_class">3.6.4. RESOURCE_ANNOTATIONS Class</a></li>
<li><a href="#_translation_details_class">3.6.5. TRANSLATION_DETAILS Class</a></li>
<li><a href="#_archetype_class">3.6.6. ARCHETYPE Class</a></li>
<li><a href="#_authored_archetype_class">3.6.7. AUTHORED_ARCHETYPE Class</a></li>
<li><a href="#_archetype_hrid_class">3.6.8. ARCHETYPE_HRID Class</a></li>
<li><a href="#_template_class">3.6.9. TEMPLATE Class</a></li>
<li><a href="#_template_overlay_class">3.6.10. TEMPLATE_OVERLAY Class</a></li>
<li><a href="#_operational_template_class">3.6.11. OPERATIONAL_TEMPLATE Class</a></li>
</ul>
</li>
<li><a href="#_validity_rules">3.7. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_constraint_model_package">4. Constraint Model Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">4.1. Overview</a></li>
<li><a href="#_semantics">4.2. Semantics</a>
<ul class="sectlevel3">
<li><a href="#_all_node_types">4.2.1. All Node Types</a>
<ul class="sectlevel4">
<li><a href="#_path_functions">4.2.1.1. Path Functions</a></li>
<li><a href="#_conformance_functions">4.2.1.2. Conformance Functions</a></li>
<li><a href="#_any_allowed">4.2.1.3. Any_allowed</a></li>
</ul>
</li>
<li><a href="#_attribute_nodes">4.2.2. Attribute Nodes</a></li>
<li><a href="#_object_node_types">4.2.3. Object Node Types</a>
<ul class="sectlevel4">
<li><a href="#_node_id_and_paths">4.2.3.1. Node_id and Paths</a></li>
<li><a href="#_sibling_ordering">4.2.3.2. Sibling Ordering</a></li>
<li><a href="#_node_deprecation">4.2.3.3. Node Deprecation</a></li>
</ul>
</li>
<li><a href="#_defined_object_nodes_c_defined_object">4.2.4. Defined Object Nodes (C_DEFINED_OBJECT)</a>
<ul class="sectlevel4">
<li><a href="#_valid_value">4.2.4.1. Valid_value</a></li>
<li><a href="#_prototype_value">4.2.4.2. Prototype_value</a></li>
<li><a href="#_default_value">4.2.4.3. Default_value</a></li>
</ul>
</li>
<li><a href="#_reference_objects">4.2.5. Reference Objects</a></li>
<li><a href="#_complex_objects_c_complex_object">4.2.6. Complex Objects (C_COMPLEX_OBJECT)</a></li>
<li><a href="#_primitive_types_c_primitive_object_descendants">4.2.7. Primitive Types (C_PRIMITIVE_OBJECT descendants)</a>
<ul class="sectlevel4">
<li><a href="#_assumed_value">4.2.7.1. Assumed_value</a></li>
</ul>
</li>
<li><a href="#_terminology_constraints_c_terminology_code">4.2.8. Terminology Constraints (C_TERMINOLOGY_CODE)</a>
<ul class="sectlevel4">
<li><a href="#_terminology_code_resolution">4.2.8.1. Terminology Code Resolution</a></li>
</ul>
</li>
<li><a href="#_constraints_on_enumeration_types">4.2.9. Constraints on Enumeration Types</a></li>
</ul>
</li>
<li><a href="#_second_order_constraints">4.3. Second Order Constraints</a>
<ul class="sectlevel3">
<li><a href="#_tuple_constraints">4.3.1. Tuple Constraints</a></li>
<li><a href="#_assertions">4.3.2. Assertions</a></li>
</ul>
</li>
<li><a href="#_aom_type_substitutions">4.4. AOM Type Substitutions</a></li>
<li><a href="#_class_definitions_2">4.5. Class Definitions</a>
<ul class="sectlevel3">
<li><a href="#_archetype_constraint_class">4.5.1. ARCHETYPE_CONSTRAINT Class</a></li>
<li><a href="#_c_attribute_class">4.5.2. C_ATTRIBUTE Class</a></li>
<li><a href="#_cardinality_class">4.5.3. CARDINALITY Class</a>
<ul class="sectlevel4">
<li><a href="#_conformance_semantics">4.5.3.1. Conformance Semantics</a></li>
<li><a href="#_validity_rules_2">4.5.3.2. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_object_class">4.5.4. C_OBJECT Class</a></li>
<li><a href="#_sibling_order_class">4.5.5. SIBLING_ORDER Class</a>
<ul class="sectlevel4">
<li><a href="#_occurrences_inferencing_rules">4.5.5.1. Occurrences inferencing rules</a></li>
<li><a href="#_conformance_semantics_2">4.5.5.2. Conformance semantics</a></li>
<li><a href="#_validity_rules_3">4.5.5.3. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_defined_object_class">4.5.6. C_DEFINED_OBJECT Class</a></li>
<li><a href="#_c_complex_object_class">4.5.7. C_COMPLEX_OBJECT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_4">4.5.7.1. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_archetype_root_class">4.5.8. C_ARCHETYPE_ROOT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_5">4.5.8.1. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_archetype_slot_class">4.5.9. ARCHETYPE_SLOT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_6">4.5.9.1. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_complex_object_proxy_class">4.5.10. C_COMPLEX_OBJECT_PROXY Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_7">4.5.10.1. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_primitive_object_class">4.5.11. C_PRIMITIVE_OBJECT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_8">4.5.11.1. Validity Rules</a></li>
<li><a href="#_conformance_semantics_3">4.5.11.2. Conformance semantics</a></li>
</ul>
</li>
<li><a href="#_c_boolean_class">4.5.12. C_BOOLEAN Class</a>
<ul class="sectlevel4">
<li><a href="#_conformance_semantics_4">4.5.12.1. Conformance semantics</a></li>
</ul>
</li>
<li><a href="#_c_string_class">4.5.13. C_STRING Class</a>
<ul class="sectlevel4">
<li><a href="#_conformance_semantics_5">4.5.13.1. Conformance semantics</a></li>
</ul>
</li>
<li><a href="#_c_ordered_class">4.5.14. C_ORDERED Class</a>
<ul class="sectlevel4">
<li><a href="#_conformance_semantics_6">4.5.14.1. Conformance semantics</a></li>
</ul>
</li>
<li><a href="#_c_integer_class">4.5.15. C_INTEGER Class</a></li>
<li><a href="#_c_real_class">4.5.16. C_REAL Class</a></li>
<li><a href="#_c_temporal_class">4.5.17. C_TEMPORAL Class</a>
<ul class="sectlevel4">
<li><a href="#_conformance_semantics_7">4.5.17.1. Conformance semantics</a></li>
</ul>
</li>
<li><a href="#_c_date_class">4.5.18. C_DATE Class</a></li>
<li><a href="#_c_time_class">4.5.19. C_TIME Class</a></li>
<li><a href="#_c_date_time_class">4.5.20. C_DATE_TIME Class</a></li>
<li><a href="#_c_duration_class">4.5.21. C_DURATION Class</a></li>
<li><a href="#_c_terminology_code_class">4.5.22. C_TERMINOLOGY_CODE Class</a>
<ul class="sectlevel4">
<li><a href="#_conformance_semantics_8">4.5.22.1. Conformance semantics</a></li>
</ul>
</li>
<li><a href="#_c_second_order_class">4.5.23. C_SECOND_ORDER Class</a></li>
<li><a href="#_c_primitive_tuple_class">4.5.24. C_PRIMITIVE_TUPLE Class</a></li>
<li><a href="#_c_attribute_tuple_class">4.5.25. C_ATTRIBUTE_TUPLE Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_rules_package">5. The Rules Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">5.1. Overview</a></li>
<li><a href="#_semantics_2">5.2. Semantics</a></li>
<li><a href="#_class_descriptions_2">5.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_expr_constraint_class">5.3.1. EXPR_CONSTRAINT Class</a></li>
<li><a href="#_expr_archetype_id_constraint_class">5.3.2. EXPR_ARCHETYPE_ID_CONSTRAINT Class</a></li>
<li><a href="#_expr_archetype_ref_class">5.3.3. EXPR_ARCHETYPE_REF Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_terminology_package">6. Terminology Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">6.1. Overview</a></li>
<li><a href="#_semantics_3">6.2. Semantics</a>
<ul class="sectlevel3">
<li><a href="#_specialisation_depth">6.2.1. Specialisation Depth</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_3">6.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_archetype_terminology_class">6.3.1. ARCHETYPE_TERMINOLOGY Class</a></li>
<li><a href="#_terminology_relation_class">6.3.2. TERMINOLOGY_RELATION Class</a></li>
<li><a href="#_value_set_class">6.3.3. VALUE_SET Class</a></li>
<li><a href="#_archetype_term_class">6.3.4. ARCHETYPE_TERM Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_9">6.3.4.1. Validity Rules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_validation_and_transformation_semantics">7. Validation and Transformation Semantics</a>
<ul class="sectlevel2">
<li><a href="#_validation">7.1. Validation</a>
<ul class="sectlevel3">
<li><a href="#_phase_1_basic_integrity">7.1.1. Phase 1 - Basic Integrity</a>
<ul class="sectlevel4">
<li><a href="#_basic_checks">7.1.1.1. Basic checks</a></li>
<li><a href="#_authored_archetype_meta_data_checks">7.1.1.2. AUTHORED_ARCHETYPE meta-data checks</a></li>
<li><a href="#_definition_structure_validation">7.1.1.3. Definition Structure Validation</a></li>
<li><a href="#_basic_terminology_validation">7.1.1.4. Basic Terminology Validation</a></li>
<li><a href="#_various_structure_validation">7.1.1.5. Various Structure Validation</a></li>
<li><a href="#_code_validation">7.1.1.6. Code Validation</a></li>
<li><a href="#_validate_annotations">7.1.1.7. Validate Annotations</a></li>
</ul>
</li>
<li><a href="#_phase_2_validation_of_specialised_archetype_against_flat_parent">7.1.2. Phase 2 - Validation of Specialised Archetype Against Flat Parent</a>
<ul class="sectlevel4">
<li><a href="#_validate_against_reference_model">7.1.2.1. Validate Against Reference Model</a></li>
<li><a href="#_validate_specialised_definition">7.1.2.2. Validate Specialised Definition</a></li>
<li><a href="#_validate_rules">7.1.2.3. Validate Rules</a></li>
</ul>
</li>
<li><a href="#_phase_3_validation_of_flat_form">7.1.3. Phase 3 - Validation of Flat Form</a></li>
</ul>
</li>
<li><a href="#_flattening">7.2. Flattening</a></li>
<li><a href="#_diffing">7.3. Diffing</a></li>
</ul>
</li>
<li><a href="#_serialisation_model">8. Serialisation Model</a></li>
<li><a href="#_templates">9. Templates</a>
<ul class="sectlevel2">
<li><a href="#_an_example">9.1. An Example</a></li>
<li><a href="#_template_identifiers">9.2. Template Identifiers</a></li>
</ul>
</li>
<li><a href="#_reference_model_adaptation">10. Reference Model Adaptation</a>
<ul class="sectlevel2">
<li><a href="#_aom_profile_configuration">10.1. AOM Profile Configuration</a>
<ul class="sectlevel3">
<li><a href="#_class_definitions_3">10.1.1. Class Definitions</a></li>
<li><a href="#_aom_profile_class">10.1.2. AOM_PROFILE Class</a></li>
<li><a href="#_aom_type_mapping_class">10.1.3. AOM_TYPE_MAPPING Class</a></li>
<li><a href="#_aom_property_mapping_class">10.1.4. AOM_PROPERTY_MAPPING Class</a></li>
<li><a href="#_configuration_file">10.1.5. Configuration File</a></li>
</ul>
</li>
<li><a href="#_mapping_rm_entities_to_aom_entities">10.2. Mapping RM Entities to AOM Entities</a></li>
<li><a href="#_rm_primitive_type_equivalence">10.3. RM Primitive Type Equivalence</a></li>
<li><a href="#_aom_lifecycle_state_mappings">10.4. AOM Lifecycle State Mappings</a></li>
</ul>
</li>
<li><a href="#_references">References</a>
<ul class="sectlevel2">
<li><a href="#_publications">Publications</a></li>
<li><a href="#_resources_2">Resources</a>
<ul class="sectlevel3">
<li><a href="#_general">General</a></li>
<li><a href="#_e_health_standards">e-Health Standards</a></li>
<li><a href="#_e_health_projects">e-Health Projects</a></li>
<li><a href="#_general_standards">General Standards</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="http://www.openehr.org/releases/BASE/latest/resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_archetype_object_model_2_aom2_specification" class="sect0">Archetype Object Model 2 (AOM2) Specification</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="http://www.openehr.org/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, ADL, AOM, health records, archetypes, constraint language, 13606</p></td>
</tr>
</tbody>
</table>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="diagrams/openehr_block_diagram.png" alt="openEHR components" width="60%">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2004 - 2016 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://www.openehr.org/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="http://www.openehr.org/releases/BASE/latest/resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="http://www.openehr.org/" class="bare">http://www.openehr.org/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser, Implementer</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;2.0.6</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.0.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change Rules section to document re-use of new openEHR Expression Language and Model.<br>
 Change the types constrained by <code>C_DATE</code> etc to <code>Date</code> etc, instead of <code>ISO8601_DATE</code>.<br>
 Update occurrences inferencing rules in section 4.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>11 May 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECBASE-4">SPECBASE-4</a>Change order of type parameters in <code>Hash&lt;V,K&gt;</code> type to <code>Hash&lt;K,V&gt;</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Boscá</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13 Apr 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correct <code>ASSERTION.<em>variables</em></code> association to refer to <code>VARIABLE_DECLARATION</code>.<br>
 Add <code>RULE_ELEMENT</code> class table to specification (reported in <a href="https://openehr.atlassian.net/browse/SPECPR-160">SPECPR-160</a>)<br>
 Correct <code>CARDINALITY.<em>is_set</em></code> documentation (reported in <a href="https://openehr.atlassian.net/browse/SPECPR-147">SPECPR-147</a>).<br>
 Add missing type of <code>String</code> to <code>ARCHETYPE_TERM.<em>CODE</em></code>. (reported in <a href="https://openehr.atlassian.net/browse/SPECPR-162">SPECPR-162</a>).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B Verhees</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">05 Apr 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Make <code>AUTHORED_RESOURCE</code>.<code><em>uid</em></code> and <code>AUTHORED_ARCHETYPE</code>.<code><em>build_uid</em></code> <code>UUIDs</code> rather than any kind of <code>UID</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Jan 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add <code>P_</code> serialisation model and template sections.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31 Aug 2015</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Refactor <code>ARCHETYPE</code> and <code>ARCHETYPE_TERMINOLOGY</code> models, in order to simplify: remove differential and flat forms of classes.<br>
 Split <code>ARCHETYPE</code> into two classes, with <code>AUTHORED_ARCHETYPE</code> as a new class that inherits from <code>AUTHORED_RESOURCE</code> .<br></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 Jan 2015</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>VDSSR</code> , <code>VSUNC</code> ; add <code>VDSSID</code> , <code>VARXID</code> . Replace <code>+u</code> (unstable) version modifier with semver.org standard <code>-alpha</code>. Remove overview material to new Archetypes: Technical Overview specification.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 I McNicoll,<br>
 S Garde</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 Nov 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>ARCHETYPE</code>.<code><em>provenance_id</em></code> attribute.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Solbrig,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08 Oct 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correct spelling of <code>licence</code> to international English; rename <code>ARCHETYPE</code>.<code><em>urn</em></code> to <code><em>provenance_id</em></code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Garde,<br>
 I McNicoll</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29 Sep 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Modified <code>C_ARCHETYPE_ROOT</code> to have an id-code in all cases.<br>
 Add error <code>VSONPO</code> , <code>VSONPT</code>: specialised archetype object node prohibited occurrences validity.<br>
 Added support for constraints on enumerated types.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIMI,<br>
 P Langford,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Jul 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Convert <code>ARCHETYPE</code>.<code><em>uid</em></code> to <code><em>urn</em></code>: <code>URN</code>.<br>
 Rename <code>ARCHETYPE</code>.<code><em>commit_number</em></code> to <code><em>build_count</em></code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I McNicoll,<br>
 S Garde,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 Jun 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Make <code>VACMCL</code> a warning <code>WACMCL</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Moner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Apr 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Renamed <code>ARCHETYPE_INTERNAL_REF</code> to <code>C_OBJECT_PROXY</code> .<br>
 <a href="https://openehr.atlassian.net/browse/SPECAM-9">SPECAM-9</a>. Renamed <code>ontology</code> section to <code>terminology</code> and simplified.<br>
 Remove <code>CONSTRAINT_REF</code>, <code>C_REFERENCE_OBJECT</code> types;<br>
 <a href="https://openehr.atlassian.net/browse/SPECAM-2">SPECAM-2</a>. Introduce new archetype structured identification system;<br>
 <a href="https://openehr.atlassian.net/browse/SPECAM-28">SPECAM-28</a>. Add IHTSDO standard terminology URIs to ADL and AOM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 H Solbrig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Mar 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Detailed Technical Review.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Solbrig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 Nov 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>C_DOMAIN_TYPE</code> ;<br>
 <a href="https://openehr.atlassian.net/browse/SPECAM-27">SPECAM-27</a>. Merge <code>C_PRIMITIVE_OBJECT</code> and <code>C_PRIMITIVE</code>;<br>
 Add support for tuple constraints, replacing ADL 1.4 special Ordinal and Quantity constrainer types;<br>
 Add new primitive type <code>C_TERMINOLOGY_CODE</code> .<br>
 Added <code>VSONIF</code>, removed <code>VSONCI</code> (dup of <code>VSONI</code>).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Solbrig<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Aug 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-22">SPECAM-22</a>. Limit <code><em>assumed_value</em></code> to <code>C_PRIMITIVE_OBJECT</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14 Jan 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-32">SPECAM-32</a>. Remove <code>C_SINGLE_ATTRIBUTE</code> and <code>C_MULTIPLE_ATTRIBUTE</code> classes.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Garde,<br>
 S Kobayashi,<br>
 D Moner,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Dec 2011</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-26">SPECAM-26</a>. Add <code><em>any_allowed</em></code> function to <code>ARCHETYPE_SLOT</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Aug 2010</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-8">SPECAM-8</a>. Add specialisation semantics to ADL and AOM. Add various attributes and functions to <code>ARCHETYPE_CONSTRAINT</code> descendant classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>move <code>C_PRIMITIVE</code>.<code><em>assumed_value</em></code> to attribute slot in UML</p>
</li>
<li>
<p>rename <code>C_DEFINED_OBJECT</code>.<code><em>default_value</em></code> function to <code>prototype_value</code></p>
</li>
<li>
<p>correct <code><em>assumed_value</em></code> definition to be like <code><em>prototype_value</em></code>; remove its entry from all of the <code>C_PRIMITIVE</code> subtypes</p>
</li>
<li>
<p>convert <code>BOOLEAN</code> flag representation of patterns to functions and add a String data member for the pattern value, thus matching the XSDs and ADL</p>
</li>
<li>
<p>add <code>ARCHETYPE</code>.<code><em>is_template</em></code> attribute.</p>
</li>
<li>
<p>add <code>ARCHETYPE</code>.<code><em>is_component</em></code> attribute.</p>
</li>
<li>
<p>allow computed as well as stored attributes.</p>
</li>
<li>
<p>make <code>ONTOLOGY</code>.<code><em>terminologies_available</em></code> computed.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Dec 2009</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-1">SPECAM-1</a>. Change Date, Time etc classes in AOM to <code>ISO8601_DATE</code> , <code>ISO8601_TIME</code> etc from Support IM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jul 2009</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-10">SPECAM-10</a>. Convert <code>Interval&lt;Integer&gt;</code> to <code>MULTIPLICITY_INTERVAL</code> to simplify specification and implementation.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-5">SPECAM-5</a>. Archetype slot regular expressions should cover whole identifier. Added <code>C_STRING</code>.<code><em>is_pattern</em></code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Flinton</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-7">SPECAM-7</a>. Make existence, occurrences and cardinality optional in AOM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPECAM-16">SPECAM-16</a>. Add validity rules to <code>ARCHETYPE_TERMINOLOGY</code> .<br>
<a href="https://openehr.atlassian.net/browse/SPECAM-11">SPECAM-11</a>. <code>ARCHETYPE_CONSTRAINT</code> adjustments.<br>
<a href="https://openehr.atlassian.net/browse/SPECAM-17">SPECAM-17</a>. Add template object model to AM.<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <code><em>is_exhaustive</em></code> attribute to <code>ARCHETYPE_SLOT</code> .</p>
</li>
<li>
<p>Add <code><em>is_template</em></code> attribute to <code>ARCHETYPE</code> .</p>
</li>
<li>
<p>Add <code><em>terminology_extracts</em></code> to <code>ARCHETYPE_TERMINOLOGY</code> .</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.2</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-257">SPEC-257</a>. Correct minor typos and clarify text. Correct reversed definitions of <code><em>is_bag</em></code> and <code><em>is_set</em></code> in <code>CARDINALITY</code> class.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Ma,<br>
 R Chen,<br>
 T Cook</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Nov 2008</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-251">SPEC-251</a>. Allow both pattern and interval constraint on Duration in Archetypes. Add pattern attribute to <code>C_DURATION</code> class.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.1</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-200">SPEC-200</a>. Correct Release 1.0 typographical errors. Table for missed class <code>ASSERTION_VARIABLE</code> added. Assumed_value assertions corrected; <code><em>standard_representation</em></code> function corrected. Added missed <code><em>adl_version</em></code> , <code><em>concept</em></code> rename from <a href="https://openehr.atlassian.net/browse/SPEC-153">SPEC-153</a>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd,<br>
 P Pazos,<br>
 R Chen,<br>
 C Ma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Mar 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-216">SPEC-216</a>: Allow mixture of W, D etc in ISO8601 Duration (deviation from standard).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-219">SPEC-219</a>: Use constants instead of literals to refer to terminology in RM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-232">SPEC-232</a>. Relax validity invariant on <code>CONSTRAINT_REF</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-233">SPEC-233</a>: Define semantics for <code><em>occurrences</em></code> on <code>ARCHETYPE_INTERNAL_REF</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">K Atalag</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-234">SPEC-234</a>: Correct functional semantics of AOM constraint model package.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-245">SPEC-245</a>: Allow term bindings to paths in archetypes.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-153">SPEC-153</a>. Synchronise ADL and AOM attribute naming.
 <a href="https://openehr.atlassian.net/browse/SPEC-178">SPEC-178</a>. Add Template Object Model to AM. Text changes only.
 <a href="https://openehr.atlassian.net/browse/SPEC-167">SPEC-167</a>. Add <code>AUTHORED_RESOURCE</code> class. Remove <code><em>description</em></code> package to <code><em>resource</em></code> package in Common IM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2005</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.96</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-134">SPEC-134</a>. Correct numerous documentation errors in AOM. Including cut and paste error in <code>TRANSLATION_DETAILS</code> class in <em>Archetype</em> package. Corrected hyperlinks in Section 2.3.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jun 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-142">SPEC-142</a>. Update ADL grammar to support assumed values. Changed <code>C_PRIMITIVE</code> and <code>C_DOMAIN_TYPE</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-146">SPEC-146</a>: Alterations to <em>am.archetype.description</em> from CEN MetaKnow</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Kalra</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-138">SPEC-138</a>. Archetype-level assertions.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-157">SPEC-157</a>. Fix names of <code>OPERATOR_KIND</code> class attributes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.95</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Corrected documentation error - return type of <code>ARCHETYPE_CONSTRAINT</code> . <code><em>has_path</em></code><br>
add optionality markers to Primitive types UML diagram.<br>
Removed erroneous aggregation marker from <code>ARCHETYPE_ONTOLOGY</code> . <code><em>parent_archetype</em></code> and <code>ARCHETYPE_DESCRIPTION</code> . <code><em>parent_archetype</em></code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jan 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="https://openehr.atlassian.net/browse/SPEC-110">SPEC-110</a>. Update ADL document and create AOM document.<br>
Includes detailed input and review from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DSTC</p>
</li>
<li>
<p>CHIME, Uuniversity College London</p>
</li>
<li>
<p>Ocean Informatics</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Initial Writing. Taken from ADL document <a href="https://github.com/openEHR/specifications/blob/master/source/am/language/language_design/archetype_language_2v0.7.doc">1.2draft B</a>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 A Goodchild<br>
 Z Tun<br>
 T Austin<br>
 D Kalra<br>
 N Lea<br>
 D Lloyd<br>
 S Heard<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2004</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author">Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ocean Informatics UK; openEHR Foundation Management Board</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors">Contributors</h3>
<div class="paragraph">
<p>This specification and its sibling Archetype Definition Language specification have benefited from wide formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people and institutions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Koray Atalag, MD, PhD, Sen. Researcher, National Institute for Health Innovation (NIHI), New Zealand</p>
</li>
<li>
<p>Linda Bird PhD, IHTSDO</p>
</li>
<li>
<p>Diego Boscá, IBIME, Technical University Valencia, VeraTech for Health, Spain</p>
</li>
<li>
<p>Rong Chen MD, PhD, Cambio Healthcare Systems, Sweden</p>
</li>
<li>
<p>Borut Fabjan, Program Manager, Marand, Slovenia</p>
</li>
<li>
<p>Sebastian Garde PhD, Ocean Informatics UK</p>
</li>
<li>
<p>Peter Gummer, Ocean Informatics</p>
</li>
<li>
<p>Sam Heard MD, Ocean Informatics</p>
</li>
<li>
<p>Stan Huff MD, Intermountain Healthcare, UT, USA</p>
</li>
<li>
<p>David Ingram PhD, Emeritus Professor of Health Informatics, UCL</p>
</li>
<li>
<p>Dipak Kalra MD, PhD, Professor Health Informatics, CHIME, UCL, president Eurorec</p>
</li>
<li>
<p>Shinji Kobayashi PhD, Kyoto University EHR research unit</p>
</li>
<li>
<p>Bostjan Lah, Architect, Marand, Slovenia</p>
</li>
<li>
<p>David Lloyd, CHIME, UCL (ret)</p>
</li>
<li>
<p>Ian McNicoll MD, Ocean Informatics UK</p>
</li>
<li>
<p>David Moner, IBIME, Technical University Valencia, VeraTech for Health, Spain</p>
</li>
<li>
<p>Pablo Pazos Gutierrez, Tarmac IT, CaboLabs, Uruguay</p>
</li>
<li>
<p>Harold Solbrig, Mayo Clinic, Rochester, USA</p>
</li>
<li>
<p>Erik Sundvall PhD, Linkoping University, Sweden</p>
</li>
<li>
<p>Alessandro Torrisi, Code24, The Netherlands.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporters">Supporters</h3>
<div class="paragraph">
<p>The work reported in this paper has been funded by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>UCL (University College London) - Centre for Health Informatics and Multiprofessional Education (CHIME);</p>
</li>
<li>
<p>Ocean Informatics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Special thanks to Prof David Ingram, founding Director of CHIME, UCL, who provided a vision and collegial working environment ever since the days of GEHR (1992).</p>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks">Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a trademark of the openEHR Foundation</p>
</li>
<li>
<p>'Java' is a registered trademark of Oracle Corporation</p>
</li>
<li>
<p>'Microsoft' is a trademark of the Microsoft Corporation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document contains the normative description of openEHR Archetype and Template semantics (originally described in <a href="#Beale_2000">[Beale_2000]</a> and <a href="#Beale_2002">[Beale_2002]</a>), in the form of an object model. The model presented here can be used as a basis for building software that represents archetypes and templates, independent of their persistent representation. Equally, it can be used to develop the output side of parsers that process archetypes in a linguistic format, such as the <a href="http://www.openehr.org/releases/AM/latest/ADL2.html">openEHR Archetype Definition Language (ADL)</a> , XML and so on.</p>
</div>
<div class="paragraph">
<p>It is recommended in any case that the ADL specification be read in conjunction with this document, since it contains a detailed explanation of the semantics of archetypes, and many of the examples are more obvious in ADL, regardless of whether ADL is actually used with the object model presented here or not.</p>
</div>
<div class="paragraph">
<p>The release of AOM described in this specification corresponds to the 2.x version of the archetype formalism.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standards bodies producing health informatics standards;</p>
</li>
<li>
<p>Academic groups using openEHR;</p>
</li>
<li>
<p>The open source healthcare community;</p>
</li>
<li>
<p>Solution vendors;</p>
</li>
<li>
<p>Medical informaticians and clinicians interested in health information.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="http://www.openehr.org/releases/BASE/latest/architecture_overview.html">openEHR Architecture Overview</a>;</p>
</li>
<li>
<p>The <a href="http://www.openehr.org/releases/AM/latest/Overview.html">openEHR Archetypes Technical Overview</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related documents include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="http://www.openehr.org/releases/AM/latest/ADL2.html">openEHR Definition Language</a>;</p>
</li>
<li>
<p>The <a href="http://www.openehr.org/releases/AM/latest/OPT2.html">openEHR Operational Template Specification</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_nomenclature"><a class="anchor" href="#_nomenclature"></a>1.3. Nomenclature</h3>
<div class="paragraph">
<p>In this document, the term 'attribute' denotes any stored property of a type defined in an object model, including primitive attributes and any kind of relationship such as an association or aggregation. XML 'attributes' are always referred to explicitly as 'XML attributes'.</p>
</div>
<div class="paragraph">
<p>We also use the word 'archetype' in a broad sense to designate what are commonly understood to be 'archetypes' (specifications of clinical data groups / data constraints) and 'templates' (data sets based on archetypes, since at a technical level, an ADL/AOM 2 template is in fact just an archetype. Accordingly, statements about 'archetypes' in this specification can be always understood to also apply to templates, unless otherwise indicated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.4. Status</h3>
<div class="paragraph">
<p>This specification is in the TRIAL state. The development version of this document can be found at <a href="http://www.openehr.org/releases/AM/latest/AOM2.html" class="bare">http://www.openehr.org/releases/AM/latest/AOM2.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="paragraph">
<p>Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.  Feedback should be provided either on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org">technical mailing list</a>, or on the <a href="https://openehr.atlassian.net/browse/SPECPR/?selectedTab=com.atlassian.jira.jira-projects-plugin:issues-panel">specifications issue tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tools"><a class="anchor" href="#_tools"></a>1.5. Tools</h3>
<div class="paragraph">
<p>Various tools exist for creating and processing archetypes. The <a href="http://www.openehr.org/downloads/ADLworkbench/home">ADL Workbench</a> is a reference compiler, visualiser and editor. The openEHR tools can be <a href="http://www.openehr.org/downloads/modellingtools">downloaded from the website</a> .
Source projects can be found at the <a href="https://github.com/openEHR">openEHR Github project</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_from_previous_versions"><a class="anchor" href="#_changes_from_previous_versions"></a>1.6. Changes from Previous Versions</h3>
<div class="sect3">
<h4 id="_release_1_5_to_2_0_document_version_2_1_2"><a class="anchor" href="#_release_1_5_to_2_0_document_version_2_1_2"></a>1.6.1. Release 1.5 to 2.0 (Document version 2.1.2 - )</h4>
<div class="paragraph">
<p>The changes in release 2 of the ADL/AOM formalism are designed to make the formalism more computable with respect to terminology, and enable more rigorous validation and flattening operations.</p>
</div>
<div class="paragraph">
<p>The changes are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduction of <strong>new internal coding scheme</strong>, consisting of id-codes, at-codes and ac-codes;</p>
</li>
<li>
<p>Replace string archetype identifier with multi-part, <strong>namespaced identifier</strong>;</p>
</li>
<li>
<p>Addition of <strong>explicit value-sets</strong> in terminology section, replacing in-line value sets in the <code>definition</code> section;</p>
</li>
<li>
<p>Renaming archetype <code>ontology</code> section to <code>terminology</code>;</p>
</li>
<li>
<p>Expression of all external <strong>term bindings as URIs</strong> following IHTSDO format;</p>
</li>
<li>
<p>Introduction of <strong>'tuple' constraints</strong> to replace openEHR custom constrainer types for covarying attributes within Quantity, Ordinal structures;</p>
</li>
<li>
<p>Re-engineering of all primitive constrainer types, i.e. <code>C_STRING</code> , <code>C_DATE</code> etc;</p>
</li>
<li>
<p>Removal of the openEHR Archetype Profile specification.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_release_1_4_to_1_5_document_version_2_0_to_2_1_1"><a class="anchor" href="#_release_1_4_to_1_5_document_version_2_0_to_2_1_1"></a>1.6.2. Release 1.4 to 1.5 (Document version 2.0 to 2.1.1)</h4>
<div class="paragraph">
<p>The changes in release 1.5 are made to better facilitate the representation of specialised archetypes. The key semantic capability for specialised archetypes is to be able to support a differential representation, i.e. to express a specialised archetype only in terms of the changed or new elements in its defnition, rather than including a copy of unchanged elements. Doing the latter is clearly unsustainable in terms of change management.</p>
</div>
<div class="paragraph">
<p>The changes are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full <strong>specialisation support</strong>: the addition of an attribute to the <code>C_ATTRIBUTE</code> class, allowing the inclusion of a path that enables specialised archetype redefinitions deep within a structure;</p>
</li>
<li>
<p>Addition of <strong>node-level annotations</strong>;</p>
</li>
<li>
<p>Structural simplification of archetype ontology section;</p>
</li>
<li>
<p>The name of the <code>invariant</code> section has been changed to <code>rules</code>, to better reflect its purpose.</p>
</li>
<li>
<p>A template is now just an archetype.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_release_0_6_to_1_4"><a class="anchor" href="#_release_0_6_to_1_4"></a>1.6.3. Release 0.6 to 1.4</h4>
<div class="paragraph">
<p>Changes made from Release 1.3 to 1.4:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>added a new attribute <code><em>adl_version</em></code> : <code>String</code> to the <code>ARCHETYPE</code> class;</p>
</li>
<li>
<p>changed name of <code>ARCHETYPE</code> . <code><em>concept_code</em></code> attribute to <code><em>concept</em></code> .</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_overview"><a class="anchor" href="#_model_overview"></a>2. Model Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The model described here is a pure object-oriented model that can be used with archetype parsers and software that manipulates archetypes and templates in memory. It is typically the output of a parser of any serialsed form of archetypes. It is dependent on the openEHR Base package classes.</p>
</div>
<div class="sect2">
<h3 id="_package_structure"><a class="anchor" href="#_package_structure"></a>2.1. Package Structure</h3>
<div class="paragraph">
<p>The openEHR Archetype Object Model is defined as the package <code>am.archetype</code> , as illustrated in Figure <a id="package_overview"></a>. It is shown in the context of the openEHR <code>am.archetype</code> packages.</p>
</div>
<div id="package_overview" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-packages.png" alt="AOM packages">
</div>
<div class="title">Figure 1. Package Overview</div>
</div>
</div>
<div class="sect2">
<h3 id="_definition_and_utility_classes"><a class="anchor" href="#_definition_and_utility_classes"></a>2.2. Definition and Utility Classes</h3>
<div class="sect3">
<h4 id="_overview"><a class="anchor" href="#_overview"></a>2.2.1. Overview</h4>
<div class="paragraph">
<p>Various definitional classes are used in the AOM. Some are defined in the <code>aom.definitions</code> package from the AM component, while others come from the openEHR <code>definitions</code> package from the BASE component. These are illustrated below.</p>
</div>
<div id="definition_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-definitions.svg" alt="AOM definitions">
</div>
<div class="title">Figure 2. Definition Package</div>
</div>
<div class="paragraph">
<p>The enumeration type <code>VALIDITY_KIND</code> is provided in order to define standard values representing <code>mandatory</code>, <code>optional</code>, or <code>disallowed</code> in any model. It is used in this model in classes such as <code>C_DATE</code> , <code>C_TIME</code> and <code>C_DATE_TIME</code>. The <code>VERSION_STATUS</code> enumeration type serves a similar function within various AOM types.</p>
</div>
<div class="paragraph">
<p>Other classes used from the <code>base</code> package include <code>AUTHORED_RESOURCE</code> (openEHR <code>resource</code> package) and its subordinate classes. These are shown in full within the packages that use them.</p>
</div>
</div>
<div class="sect3">
<h4 id="_class_definitions"><a class="anchor" href="#_class_definitions"></a>2.2.2. Class Definitions</h4>

</div>
<div class="sect3">
<h4 id="_version_status_enumeration"><a class="anchor" href="#_version_status_enumeration"></a>2.2.3. VERSION_STATUS Enumeration</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>VERSION_STATUS</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Status of a versioned artefact, as one of a number of possible values: uncontrolled, prerelease, release, build.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">alpha</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value representing a version which is ‘unstable’, i.e. contains an unknown size of change with respect to its base version. Rendered with the build number as a string in the form “N.M.P-alpha.B” e.g. “2.0.1-alpha.154”.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">beta</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value representing a version which is ‘beta’, i.e. contains an unknown but reducing size of change with respect to its base version. Rendered with the build number as a string in the form “N.M.P-beta.B” e.g. “2.0.1-beta.154”.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">release_candidate</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value representing a version which is ‘release candidate’, i.e. contains only patch-level changes on the base version. Rendered as a string as “N.M.P-rc.B” e.g. “2.0.1-rc.27”.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">released</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value representing a version which is ‘released’, i.e. is the definitive base version. Rendered with the build number as a string in the form “N.M.P” e.g. “2.0.1”.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">build</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value representing a version which is a build of the current base release. Rendered with the build number as a string in the form “N.M.P+B” e.g. “2.0.1+33”.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_validity_kind_enumeration"><a class="anchor" href="#_validity_kind_enumeration"></a>2.2.4. VALIDITY_KIND Enumeration</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>VALIDITY_KIND</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>An enumeration of three values that may commonly occur in constraint models.</p>
</div>
<div class="paragraph">
<p>Use as the type of any attribute within this model, which expresses constraint on some attribute in a class in a reference model. For example to indicate validity
of Date/Time fields.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">mandatory</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constant to indicate mandatory presence of something.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constant to indicate optional presence of something.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">prohibited</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constant to indicate disallowed presence of something.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_adl_code_definitions_class"><a class="anchor" href="#_adl_code_definitions_class"></a>2.2.5. ADL_CODE_DEFINITIONS Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>ADL_CODE_DEFINITIONS</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Definitions relating to the internal code system of archetypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Constants</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Id_code_leader</strong>: <code>String&#160;=&#160;"id"</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>String leader of ‘identifier’ codes, i.e. codes used to identify archteype nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value_code_leader</strong>: <code>String&#160;=&#160;"at"</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>String leader of ‘value’ codes, i.e. codes used to identify codes values, including value set members.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value_set_code_leader</strong>: <code>String&#160;=&#160;"ac"</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>String leader of ‘value set’ codes, i.e. codes used to identify value sets.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Specialisation_separator</strong>: <code>char&#160;=&#160;'.'</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Character used to separate numeric parts of codes belonging to different specialisation levels.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Code_regex_pattern</strong>: <code>String&#160;=&#160;"(0&#124;[1-9][0-9]&#42;)(\.(0&#124;[1-9][0-9]&#42;))&#42;"</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Regex used to define the legal numeric part of any archetype code. Corresponds to the simple pattern of dotted numbers, as used in typical multi-level numbering schemes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Root_code_regex_pattern</strong>: <code>String&#160;=&#160;"^id1(\.1)&#42;$"</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Regex pattern of the root id code of any archetype. Corresponds to codes of the form id1, id1.1, id1.1.1 etc..</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Primitive_node_id</strong>: <code>String&#160;=&#160;"id9999"</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Code id used for C_PRIMITIVE_OBJECT nodes on creation.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_archetype_package"><a class="anchor" href="#_the_archetype_package"></a>3. The Archetype Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>3.1. Overview</h3>
<div class="paragraph">
<p>The top-level model of archetypes and templates (all variant forms) is illustrated in Figure <a href="#archetype_package">Archetype Package</a>. The model defines a standard structural representation of an archetype. Archetypes authored as independent entities are instances of the class <code>AUTHORED_ARCHETYPE</code> which is a descendant of <code>AUTHORED_RESOURCE</code> and <code>ARCHETYPE</code>. The former provides a standardised model of descriptive meta-data, language information, annotations and revision history for any resource. The latter class defines the core structure of any kind of archetype, including definition, terminology, optional rules part, along with a 'semantic identifier' (<code>ARCHETYPE</code>.<code><em>archetype_id</em></code>).</p>
</div>
<div class="paragraph">
<p>The <code>AUTHORED_ARCHETYPE</code> class adds identifying attributes, flags and descriptive meta-data, and is the ancestor type for two further specialisations - <code>TEMPLATE</code> and <code>OPERATIONAL_TEMPLATE</code> . The <code>TEMPLATE</code> class defines the notion of a 'templated' archetype, i.e. an archetype containing fillers/references (ADL&#8217;s <code>use_archetype</code> statements), typically designed to represent a data set. To enable this, it may contain 'overlays', private archetypes that specialise one or more of the referenced / filler archetypes it uses. Overlays are instances of the <code>TEMPLATE_OVERLAY</code> class, have no meta-data of their own, but are otherwise computationally just like any other archetype.</p>
</div>
<div id="archetype_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-archetype.svg" alt="AOM archetype">
</div>
<div class="title">Figure 3. Archetype Package</div>
</div>
<div class="paragraph">
<p>The <code>OPERATIONAL_TEMPLATE</code> class represents the fully flattened form of a template, i.e. with all fillers and references substituted and overlays processed, to form what is in practical terms, a single custom-made 'operational' artefact, ready for transformation to downstream artefacts. Because an operational template includes one or more other archetype structures inline, it also includes their terminologies, enabling it to be treated as a self-standing artefact.</p>
</div>
</div>
<div class="sect2">
<h3 id="_archteype_identification"><a class="anchor" href="#_archteype_identification"></a>3.2. Archteype Identification</h3>
<div class="sect3">
<h4 id="_human_readable_identifier_hrid"><a class="anchor" href="#_human_readable_identifier_hrid"></a>3.2.1. Human-Readable Identifier (HRID)</h4>
<div class="paragraph">
<p>All archetype variants based on <code>ARCHETYPE</code> have a human-readable, structured identifier defined by the <code>ARCHETYPE_HRID</code> class. This identifier places the artefact in a multi-dimensional space based on a namespace, its reference model class and its informational concept. This class defines an atomised representation of the identifier, enabling variant forms to be used as needed. Its various parts can be understood from the following diagram, which also shows the computed <code><em>semantic_id</em></code> and <code><em>physical_id</em></code> forms.</p>
</div>
<div id="archetype_hrid_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/archetype_hrid_structure.png" alt="archetype hrid structure" width="80%">
</div>
<div class="title">Figure 4. Archetype HRID Structure</div>
</div>
<div class="paragraph">
<p>For specialised archetypes, the <code><em>parent_archetype_id</em></code> is also required. This is a string <code><em>reference</em></code> to an archetype, and is normally the 'interface' form of the id, i.e. down to the major version only. In some circumstances, it is useful to include the minor and patch version numbers as well.</p>
</div>
<div class="paragraph">
<p>An important aspect of identification relates to the rules governing when when the HRID namespace changes or is retained, with respect to when 'moves' or 'forks' occur. Its value is always the same as one of the <code><em>original_namespace</em></code> and <code><em>custodian_namespace</em></code> properties inherited from <code>AUTHORED_RESOURCE</code>.<code><em>description</em></code> (or both, in the case where they are the same). A full explanation of the identification system and rules is given in the openEHR Knowledge Artefact Identification specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_machine_identifiers"><a class="anchor" href="#_machine_identifiers"></a>3.2.2. Machine Identifiers</h4>
<div class="paragraph">
<p>Two machine identifiers are defined for archetypes. The <code>ARCHETYPE</code>.<code><em>uid</em></code> attribute defines a machine identifier equivalent to the human readable <code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>semantic_id</em></code> , i.e. <code>ARCHETYPE_HRID</code> up to its major version, and changes whenever the latter does. It is defined as optional but to be practically useful would need to be mandatory for all archetypes within a custodian organisation where this identifier was in use. It could in principle be synthesised at any time for a custodian that decided to implement it.</p>
</div>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>build_uid</em></code> attribute is also optional, and if used, is intended to provide a unique identifier that corresponds to any change in version of the artefact. At a minimum, this means generating a new UUID for each change to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>release_version</em></code>;</p>
</li>
<li>
<p><code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>build_count</em></code>;</p>
</li>
<li>
<p><code>ARCHETYPE</code>.<code><em>description</em></code>.<code><em>lifecycle_state</em></code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For every change made to an archetype inside a controlled repository (for example, addition or update of meta-data fields), this field should be updated with a new UUID value, generated in the normal way.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_top_level_meta_data"><a class="anchor" href="#_top_level_meta_data"></a>3.3. Top-level Meta-data</h3>
<div class="paragraph">
<p>The following items correspond to syntax elements that may appear in parentheses in the first line of an ADL archetype.</p>
</div>
<div class="sect3">
<h4 id="_adl_version"><a class="anchor" href="#_adl_version"></a>3.3.1. ADL Version</h4>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>adl_version</em></code> attribute in ADL 1.4 was used to indicate the ADL release used in the archetype source file from which the AOM structure was created (the version number comes from the revision history of the openEHR ADL specification). In the current and future AOM and ADL specifications, the meaning of this attribute is generalised to mean 'the version of the archetype formalism' in which the current archetype is expressed. For reasons of convenience, the version number is still taken from the ADL specification, but now refers to all archetype-related specifications together, since they are always updated in a synchronised fashion.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reference_model_release"><a class="anchor" href="#_reference_model_release"></a>3.3.2. Reference Model Release</h4>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>rm_release</em></code> attribute designates the release of the reference model on which the archetype is based, in the archetype&#8217;s current version. This means <code><em>rm_release</em></code> can change with new versions of the archetype, where re-versioning includes upgrading the archetype to a later RM release. However, such upgrading still has to obey the basic rule of archetype compatibility: later minor, patch versions and builds cannot create data that is not valid with respect to the prior version.</p>
</div>
<div class="paragraph">
<p>This should be in the same semver.org 3-part form as the <code>ARCHETYPE_HRID</code>.<code><em>release_version</em></code> property, e.g. "1.0.2". This property does not indicate conformance to any particular reference model version(s) other than the named one, since most archetypes can easily conform to more than one. More minimal archetypes are likely to technically conform to more old and future releases than more complex archteypes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generated_flag"><a class="anchor" href="#_generated_flag"></a>3.3.3. Generated Flag</h4>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>is_generated</em></code> flag is used to indicate that an archetype has been machine-generated from another artefact, e.g. an older ADL version (say 1.4), or a non-archetype artefact. If true, it indicates to tools that the current archetype can potentially be overwritten, and that some other artefact is considered the primary source. If manual authoring occurs, this attribute should be set to False.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_governance_meta_data"><a class="anchor" href="#_governance_meta_data"></a>3.4. Governance Meta-data</h3>
<div class="paragraph">
<p>Various meta-data elements are inherited from the <code>AUTHORED_RESOURCE</code> class, and provide the natural language description of the archetype, authoring and translation details, use, misuse, keywords and so on. There are three distinct parts of the meta-data: governance, authorship, and descriptive details.</p>
</div>
<div class="sect3">
<h4 id="_governance_meta_data_items"><a class="anchor" href="#_governance_meta_data_items"></a>3.4.1. Governance Meta-data Items</h4>
<div class="paragraph">
<p>Governance meta-data is visible primarily in the <code>RESOURCE_DESCRIPTION</code> class, inherited via <code>AUTHORED_RESOURCE</code>, and consists of items relating to management and intellectual property status of the artefact. A typical form of these is shown in the screenshot in Figure <a href="#metadata_governance">Governance Meta-data</a>.</p>
</div>
<div id="metadata_governance" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="images/metadata_governance.png" alt="metadata governance" width="90%">
</div>
<div class="title">Figure 5. Governance Meta-data</div>
</div>
<div class="sect4">
<h5 id="_package"><a class="anchor" href="#_package"></a>3.4.1.1. Package</h5>
<div class="paragraph">
<p>The optional <code><em>resource_package_uri</em></code> property enables the recording of a reference to a package of archetypes or other resources, to which this archetype is considered to below. It may be in the form of 'text &lt;URL&gt;'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lifecycle_state"><a class="anchor" href="#_lifecycle_state"></a>3.4.1.2. Lifecycle_state</h5>
<div class="paragraph">
<p>The <code><em>description</em></code>.<code><em>lifecycle_state</em></code> is an important property of an archetype, which is used to record its state in a defined lifecycle. The lifecycle state machine and versioning rules are explained fully in the <a href="http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf">openEHR Knowledge Artefact Identification specification</a>. Here we simply note that the value of the property is a coded term corresponding to one of the macro-state names on the diagram, i.e. 'unmanaged', 'in_development', and so on.</p>
</div>
</div>
<div class="sect4">
<h5 id="_original_namespace_and_original_publisher"><a class="anchor" href="#_original_namespace_and_original_publisher"></a>3.4.1.3. Original_namespace and Original_publisher</h5>
<div class="paragraph">
<p>These two optional properties indicate the original publishing organisation, and its namespace, i.e. the original publishing environment where the artefact was first imported or created. The <code><em>original_namespace</em></code> property is normally the same value as <code><em>archetype_id</em></code>.<code><em>namespace</em></code>,unless the artefact has been forked into its current custodian, in which case <code><em>archetype_id</em></code>.<code><em>namespace</em></code> will be the same as <code><em>custodian_namespace</em></code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_custodian_namespace_and_custodian_organisation"><a class="anchor" href="#_custodian_namespace_and_custodian_organisation"></a>3.4.1.4. Custodian_namespace and Custodian_organisation</h5>
<div class="paragraph">
<p>These two optional properties state a formal namespace, and a human-readable organisation identifier corresponding to the current custodian, i.e. maintainer and publisherof the artefact, if there is one.</p>
</div>
</div>
<div class="sect4">
<h5 id="_intellectual_property_items"><a class="anchor" href="#_intellectual_property_items"></a>3.4.1.5. Intellectual Property Items</h5>
<div class="paragraph">
<p>There are three properties in the class that <code>RESOURCE_DESCRIPTION</code> relate to intellectual property (IP). Licence is a String field for recording of the licence (US: 'license') under which the artefact can be used. The recommended format is</p>
</div>
<div class="listingblock">
<div class="content">
<pre>licence name &lt;reliable URL to licence statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The copyright property records the copyright applying to the artefact, and is normally in the standard form '(c) name' or '(c) year name'. The special character © may also be used (UTF-8 0xC2A9).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_authorship_meta_data"><a class="anchor" href="#_authorship_meta_data"></a>3.4.2. Authorship Meta-data</h4>
<div class="paragraph">
<p>Authorship meta-data consists of items such as author name, contributors, and translator information, and is visualised in Figure <a href="#metadata_authoring">Authoring Meta-data</a>.</p>
</div>
<div id="metadata_authoring" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="images/metadata_authoring.png" alt="metadata authoring" width="90%">
</div>
<div class="title">Figure 6. Authoring Meta-data</div>
</div>
<div class="sect4">
<h5 id="_original_author"><a class="anchor" href="#_original_author"></a>3.4.2.1. Original Author</h5>
<div class="paragraph">
<p>The <code>RESOURCE_DESCRIPTION</code>.<code><em>original_author</em></code> property defines a simple list of name/value pairs via which the original author can be documented. Typical key values include 'name', 'organi[zs]ation', 'email' and 'date'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_contributors_2"><a class="anchor" href="#_contributors_2"></a>3.4.2.2. Contributors</h5>
<div class="paragraph">
<p>The <code>RESOURCE_DESCRIPTION</code>.<code><em>other_contributors</em></code> property is a simple list of strings, one for each contributor. The recommended format of the string is one of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>first names last name, organisation
first names last name, organisation &lt;contributor email address&gt;
first names last name, organisation &lt;organisation email address&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_languages_and_translation"><a class="anchor" href="#_languages_and_translation"></a>3.4.2.3. Languages and Translation</h5>
<div class="paragraph">
<p>The <code>AUTHORED_RESOURCE</code>.<code><em>original_language</em></code> and <code>TRANSLATION_DETAILS</code> class enable the original language of authoring and information relating to subsequent translations to be expressed. <code>TRANSLATION_DETAILS</code>.<code><em>author</em></code> allows each translator to be represented in the same way as the <code><em>original_author</em></code> , i.e. a list of name/values. The <code><em>version_last_translated</em></code> property is used to record a copy of the archetype_id.physical_id for each language, when the translation was carried out. This enables maintainers to know when new translations are needed for some or all languages.</p>
</div>
</div>
<div class="sect4">
<h5 id="_version_last_translated"><a class="anchor" href="#_version_last_translated"></a>3.4.2.4. Version_last_translated</h5>
<div class="paragraph">
<p>This String property records the full version identifier (i.e. <code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>version_id</em></code>) at the time of last translation, enabling tools to determine if and when translations may be out of date.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_descriptive_meta_data"><a class="anchor" href="#_descriptive_meta_data"></a>3.4.3. Descriptive Meta-data</h4>
<div class="paragraph">
<p>Various descriptive meta-data may be provided for an archetype in multiple translations in the <code>RESOURCE_DESCRIPTION_ITEM</code> class, using one instance for each translation language, as shown in Figure <a href="#metadata_descriptive">Descriptive Meta-data</a>.</p>
</div>
<div id="metadata_descriptive" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="images/metadata_details.png" alt="metadata details" width="90%">
</div>
<div class="title">Figure 7. Descriptive Meta-data</div>
</div>
<div class="sect4">
<h5 id="_purpose_2"><a class="anchor" href="#_purpose_2"></a>3.4.3.1. Purpose</h5>
<div class="paragraph">
<p>The <code><em>purpose</em></code> item is a String property for recording the intended design concept of the artefact.</p>
</div>
</div>
<div class="sect4">
<h5 id="_use_and_misuse"><a class="anchor" href="#_use_and_misuse"></a>3.4.3.2. Use and Misuse</h5>
<div class="paragraph">
<p>The <code><em>use</em></code> and <code><em>misuse</em></code> properties enable specific uses and misuses to be documented. The latter normally relate to common errors of use, or apparently reasonable but wrong assumptions about use.</p>
</div>
</div>
<div class="sect4">
<h5 id="_keywords"><a class="anchor" href="#_keywords"></a>3.4.3.3. Keywords</h5>
<div class="paragraph">
<p>The <code><em>keywords</em></code> property is a list of Strings designed to record search keywords for the artefact.</p>
</div>
</div>
<div class="sect4">
<h5 id="_resources"><a class="anchor" href="#_resources"></a>3.4.3.4. Resources</h5>
<div class="paragraph">
<p>The <code><em>original_resource_uri</em></code> property is used to record one or more references to resources in each particular language.</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: This property does not appear to have ever been used, and it may not be useful, since 'resources' are not typically available for each language.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_structural_definition"><a class="anchor" href="#_structural_definition"></a>3.5. Structural Definition</h3>
<div class="sect3">
<h4 id="_common_structural_parts"><a class="anchor" href="#_common_structural_parts"></a>3.5.1. Common Structural Parts</h4>
<div class="paragraph">
<p>The archetype definition is the main definitional part of an archetype and is an instance of a <code>C_COMPLEX_OBJECT</code> . This means that the root of the constraint structure of an archetype always takes the form of a constraint on a non-primitive object type.</p>
</div>
<div class="paragraph">
<p>The terminology section of an archetype is represented by its own classes, and is what allows archetypes to be natural language- and terminology-neutral. It is described in detail in the <a href="#terminology_package">Terminology Package</a>.</p>
</div>
<div class="paragraph">
<p>An archetype may include one or more rules. Rules are statements expressed in a subset of predicate logic, which can be used to state constraints on multiple parts of an object. They are not needed to constrain single attributes or objects (since this can be done with an appopriate <code>C_ATTRIBUTE</code> or <code>C_OBJECT</code> ), but are necessary for constraints referring to more than one attribute, such as a constraint that 'systolic pressure should be &gt;= diastolic pressure' in a blood pressure measurement archetype. They can also be used to declare variables, including external data query results, and make other constraints dependent on a variable value, e.g. the gender of the record subject.</p>
</div>
<div class="paragraph">
<p>Lastly, annotations and revision history sections, inherited from the <code>AUTHORED_RESOURCE</code> class, can be included as required. The annotations section is of particular relevance to archetypes and templates, and is used to document individual nodes within an archetype or template, and/or nodes in reference model data, that may not be constrained in the archetype, but whose specific use in the archetyped data needs to be documented. In the former case, the annotations are keyed by an archetype path, while in the latter case, by a reference model path.</p>
</div>
</div>
<div class="sect3">
<h4 id="_structural_variants"><a class="anchor" href="#_structural_variants"></a>3.5.2. Structural Variants</h4>
<div class="paragraph">
<p>The model in Figure <a href="#archetype_package">Archetype Package</a> defines the structures of a number of variants of the 'archetype' idea. All concrete instances are instances of one of the concrete descendants of <code>ARCHETYPE</code>. Figure <a href="#source_archetype_structure">Source Archetype Structure</a> illustrates the typical object structure of a source archetype - the form of archetype created by an authoring tool - represented by a <code>DIFFERENTIAL_ARCHETYPE</code> instance. Mandatory parts are shown in bold.</p>
</div>
<div id="source_archetype_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-source_archetype_structure.svg" alt="AOM source archetype structure" width="60%">
</div>
<div class="title">Figure 8. Source Archetype Structure</div>
</div>
<div class="paragraph">
<p>Source archetypes can be specialised, in which case their definition structure is a partial overlay on the flat parent, or 'top-level', in which case the definition structure is complete. <code>C_ARCHETYPE_ROOT</code> instances may only occur representing direct references to other archetypes - 'external references'.</p>
</div>
<div class="paragraph">
<p>A flat archetype is generated from one or more source archetypes via the flattening process described in the next chapter of this specification, (also in the ADL specification). This generates a <code>FLAT_ARCHETYPE</code> from a <code>DIFFERENTIAL_ARCHETYPE</code> instance. The main two changes that occur in this operation are a) specialised archetype overlays are applied to the flat parent structure, resulting in a full archetype structure, and b) internal references (use_nodes) are replaced by their expanded form, i.e. a copy of the subtrees to which they point.</p>
</div>
<div id="source_template_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-source_template_structure.svg" alt="AOM source template structure" width="80%">
</div>
<div class="title">Figure 9. Source Template Structure</div>
</div>
<div class="paragraph">
<p>This form is used to represent the full 'operational' structure of a specialised archetype, and has two uses. The first is to generate backwards compatible ADL 1.4 legacy archetypes (always in flat form); the second is during the template flattening process, when the flat forms of all referenced archetypes and templates are ultimately combined into a single operational template.</p>
</div>
<div class="paragraph">
<p>Figure <a href="#source_template_structure">Source Template Structure</a> illustrates the structure of a source template, i.e instances of <code>TEMPLATE</code>. A source template is an archetype containing <code>C_ARCHETYPE_ROOT</code> objects representing slot fillers - each referring to an external archetype or template, or potentially an overlay archetype.</p>
</div>
<div class="paragraph">
<p>Another archetype variant, also shown in <a href="#source_template_structure">Source Template Structure</a> is the template overlay, i.e. an instance of <code>TEMPLATE_OVERLAY</code>. These are purely local components of templates, and include only the definition and terminology. The definition structure is always a specialised overlay on something else, and may not contain any slot fillers or external references, i.e. no <code>C_ARCHETYPE_ROOT</code> objects. No identifier, adl_version, languages or description are required, as they are considered to be propagated from the owning root template. Accordingly, template overlays act like a simplified specialised archetype. Template overlays can be thought of as being similar to 'anonymous' or 'inner' classes in some object-oriented programming languages.</p>
</div>
<div class="paragraph">
<p>Figure <a href="#operational_template_structure">Operational Template Structure</a> illustrates the resulting operational template, or compiled form of a template. This is created by building the composition of referenced archetypes and/or templates and/or template overlays, in their flattened form, to generate a single 'giant' archetype. The root node of this archetype, along with every archetype/template root node within, is represented using a <code>C_ARCHETYPE_ROOT</code> object. An operational template also has a component_terminologies property containing the ontologies from every constituent archetype, template and overlay.</p>
</div>
<div id="operational_template_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-operational_template_structure.svg" alt="AOM operational template structure" width="80%">
</div>
<div class="title">Figure 10. Operational Template Structure</div>
</div>
<div class="paragraph">
<p>More details of template development, representation and semantics are described in the next section.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>3.6. Class Descriptions</h3>
<div class="sect3">
<h4 id="_authored_resource_class"><a class="anchor" href="#_authored_resource_class"></a>3.6.1. AUTHORED_RESOURCE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>AUTHORED_RESOURCE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract idea of an online resource created by a human author.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_language</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Language in which this resource was initially authored. Although there is no language primacy of resources overall, the language of original authoring is required to ensure natural language translations can preserve quality. Language is relevant in both the description and ontology sections.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_controlled</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this resource is under any kind of change control (even file copying), in which case revision history is created.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong>: <code>RESOURCE_DESCRIPTION</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Description and lifecycle information of the resource.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>UUID</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Unique identifier of the family of archetypes having the same interface identifier (same major version).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>annotations</strong>: <code>RESOURCE_ANNOTATIONS</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annotations on individual items within the resource, keyed by path. The inner table takes the form of a Hash table of String values keyed by String tags.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>translations</strong>: <code>Hash&lt;String,TRANSLATION_DETAILS&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of details for each natural translation made of this resource, keyed by language. For each translation listed here, there must be corresponding sections in all language-dependent parts of the resource. The original_language does not appear in this list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>current_revision</strong>: <code>String</code><br>
<strong><em>Post</em></strong>: Result = revision_history.most_recent_version</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Most recent revision in revision_history if is_controlled else  (uncontrolled) .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>languages_available</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Total list of languages available in this resource, derived from original_language and translations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Original_language_valid</em></strong>: code_set (Code_set_id_languages).has_code (original_language.as_string)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Current_revision_valid</em></strong>: (current_revision /= Void and not is_controlled) implies current_revision.is_equal (“(uncontrolled)”)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Translations_valid</em></strong>: translations /= Void implies (not translations.is_empty and not translations.has (orginal_language.code_string))</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Description_valid</em></strong>: translations /= Void implies (description.details.for_all (d &#124;
translations.has_key (d.language.code_string)))</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Languages_available_valid</em></strong>: languages_available.has (original_language)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Revision_history_valid</em></strong>: is_controlled xor revision_history = Void</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resource_description_class"><a class="anchor" href="#_resource_description_class"></a>3.6.2. RESOURCE_DESCRIPTION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>RESOURCE_DESCRIPTION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Defines the descriptive meta-data of a resource.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_author</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Original author of this resource, with all relevant details, including organisation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_namespace</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Namespace of original author&#8217;s organisation, in reverse internet form, if applicable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_publisher</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Plain text name of organisation that originally published this artefact, if any.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_contributors</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Other contributors to the resource, each listed in "name &lt;email&gt;"  form.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lifecycle_state</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Lifecycle state of the resource, typically including states such as: initial, in_development, in_review, published, superseded, obsolete.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent_resource</strong>: <code>AUTHORED_RESOURCE&#160;=&#160;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Reference to owning resource.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>custodian_namespace</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Namespace in reverse internet id form, of current custodian organisation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>custodian_organisation</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Plain text name of current custodian organisation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>copyright</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional copyright statement for the resource as a knowledge resource.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>licence</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Licence of current artefact, in format "short licence name &lt;URL of licence&gt;", e.g. "Apache 2.0 License &lt;<a href="http://www.apache.org/licenses/LICENSE-2.0.html&gt;"" class="bare">http://www.apache.org/licenses/LICENSE-2.0.html&gt;"</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ip_acknowledgements</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of acknowledgements of other IP directly referenced in this archetype, typically terminology codes, ontology ids etc. Recommended keys are the widely known name or namespace for the IP source, as shown in the following example:</p>
</div>
<div class="paragraph">
<p>ip_acknowledgements = &lt;
["loinc"] = &lt;"This content from LOINC® is copyright © 1995 Regenstrief Institute, Inc. and the LOINC Committee, and available at no cost under the license at <a href="http://loinc.org/terms-of-use"&gt" class="bare">http://loinc.org/terms-of-use"&gt</a>;
["snomedct"] = &lt;"Content from SNOMED CT® is copyright © 2007 IHTSDO &lt;ihtsdo.org&gt;"&gt;
&gt;</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>references</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of references of material on which this artefact is based, as a keyed list of strings. The keys should be in a standard citation format.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>resource_package_uri</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>URI of package to which this resource belongs.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>conversion_details</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Details related to conversion process that generated this model from an original, if relevant, as a list of name/value pairs. Typical example with recommended tags:
conversion_details = &lt;
["source_model"] = &lt;"CEM model xyz <a href="http://location.in.clinicalelementmodels.com&gt;"" class="bare">http://location.in.clinicalelementmodels.com&gt;"</a>
["tool"] = &lt;"cem2adl v6.3.0"&gt;
["time"] = &lt;"2014-11-03T09:05:00"&gt;
&gt;</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_details</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Additional non language-senstive resource meta-data, as a list of name/value pairs.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>details</strong>: <code>Hash&lt;String,RESOURCE_DESCRIPTION_ITEM&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Details of all parts of resource description that are natural language-dependent, keyed by language code.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resource_description_item_class"><a class="anchor" href="#_resource_description_item_class"></a>3.6.3. RESOURCE_DESCRIPTION_ITEM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>RESOURCE_DESCRIPTION_ITEM</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Language-specific detail of resource description. When a resource is translated for use in another language environment, each RESOURCE_DESCRIPTION_ITEM needs to be copied and translated into the new language.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The localised language in which the items in this description item are written. Coded from openEHR Code Set  languages.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>purpose</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Purpose of the resource.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>keywords</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Keywords which characterise this resource, used e.g. for indexing and searching.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>use</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Description of the uses of the resource, i.e. contexts in which it could be used.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>misuse</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Description of any misuses of the resource, i.e. contexts in which it should not be used.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_resource_uri</strong>: <code>List&lt;Hash&lt;String, String&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>URIs of original clinical document(s) or description of which resource is a formalisation, in the language of this description item; keyed by meaning.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_details</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Additional language-senstive resource metadata, as a list of name/value pairs.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resource_annotations_class"><a class="anchor" href="#_resource_annotations_class"></a>3.6.4. RESOURCE_ANNOTATIONS Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>RESOURCE_ANNOTATIONS</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Object representing annotations on an archetype. These can be of various forms, with a documentation form defined so far, which has a multi-level tabular structure [ [ [String value, String key], path key], language key]. Example instance, showing the documentation structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    documentation = &lt;
        ["en"] = &lt;
           ["/data[id2]"] = &lt;
               ["ui"] = &lt;"passthrough"&gt;
           &gt;
           ["/data[id2]/items[id3]"] = &lt;
               ["design note"] = &lt;"this is a design note on Statement"&gt;
               ["requirements note"] = &lt;"this is a requirements note on Statement"&gt;
               ["medline ref"] = &lt;"this is a medline ref on Statement"&gt;
           &gt;
        &gt;
    &gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Other sub-structures might have different keys, e.g.  based on programming languages, UI toolkits etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>documentation</strong>: <code>Hash&lt;String, Hash&lt;String, Hash&lt;String, String&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Documentary annotations in a multi-level keyed structure.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_translation_details_class"><a class="anchor" href="#_translation_details_class"></a>3.6.5. TRANSLATION_DETAILS Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TRANSLATION_DETAILS</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Class providing details of a natural language translation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Language of the translation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Translator name and other demographic details.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accreditaton</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accreditation of translator, usually a national translator&#8217;s registration or association membership id.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_details</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Any other meta-data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_last_translated</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Version of this resource last time it was translated into the language represented by this TRANSLATION_DETAILS object.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_archetype_class"><a class="anchor" href="#_archetype_class"></a>3.6.6. ARCHETYPE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>ARCHETYPE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>The ARCHETYPE class defines the core formal model of the root object of any archetype or template. It includes only basic identification information, and otherwise provides the structural connections from the Archetype to its constituent parts, i.e. definition (a C_COMPLEX_OBJECT), terminology (ARCHEYTPE_TERMINOLOGY) and so on.
It is the parent class of all concrete types of archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent_archetype_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Archetype reference of the specialisation par-ent of this archetype, if applicable. May take the form of an archetype interface identifier, i.e. the identifier up to the major version only, or can be deeper.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>archetype_id</strong>: <code>ARCHETYPE_HRID</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Identifier of this archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_differential</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Flag indicating whether this archetype is differential or flat in its contents. Top-level source archetypes have this flag set to True.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>C_COMPLEX_OBJECT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Root node of the definition of this archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology</strong>: <code>ARCHETYPE_TERMINOLOGY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The terminology of the archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rules</strong>: <code>List&lt;STATEMENT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Rules relating to this archetype. Statements are expressed in first order predicate logic, and usually refer to at least two attributes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept_code</strong>: <code>String</code><br>
<strong><em>post-condition</em></strong>: Result.is_equal (definition.node_id)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The concept code of the root object of the archetype, also standing for the concept of the archetype as a whole.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>physical_paths</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Set of language-independent paths extracted from archetype. Paths obey Xpath-like syntax and are formed from alternations of C_OBJECT.node_id and C_ATTRIBUTE.rm_attribute_name values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>logical_paths</strong> (lang: <code>String</code>): <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Set of language-dependent paths extracted from archetype. Paths obey the same syntax as physical_paths, but with node_ids replaced by their meanings from the ontology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong>: <code>Integer</code><br>
<strong><em>post-condition</em></strong>: Result = terminology.specialisation_depth</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specialisation depth of this archetype; larger than 0 if this archetype has a parent. Derived from terminology.specialisation_depth.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_specialised</strong>: <code>Boolean</code><br>
<strong><em>post-condition</em></strong>: Result implies parent_archetype_hrid /= Void</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this archetype is a specialisation of another.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Invariant_concept_valid</em></strong>: terminology.has_term_code (concept_code)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Invariant_specialisation_validity</em></strong>: is_specialised implies specialisation_depth &gt; 0</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_authored_archetype_class"><a class="anchor" href="#_authored_archetype_class"></a>3.6.7. AUTHORED_ARCHETYPE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>AUTHORED_ARCHETYPE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Root object of a standalone, authored archetype, including all meta-data, description, other identifiers and lifecycle.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE, AUTHORED_RESOURCE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>adl_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ADL version if archetype was read in from an ADL sharable archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>build_uid</strong>: <code>UUID</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Unique identifier of this archetype artefact instance. A new identifier is assigned every time the content is changed by a tool. Used by tools to distinguish different revisions and/or interim snapshots of the same artefact.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_release</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Semver.org compatible release of the most recent reference model release on which the archetype in its current version is based. This does not imply conformance only to this release, since an archetype may be valid with respect to multiple releases of a reference model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_generated</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If True, indicates that this artefact was machine-generated from some other source, in which case, tools would expect to overwrite this artefact on a new generation. Editing tools should set this value to False when a user starts to manually edit an archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_meta_data</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Invariant_adl_version_validity</em></strong>: valid_version_id (adl_version)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Invariant_rm_release</em></strong>: valid_version_id (rm_release)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Description_validity</em></strong>: description /= Void</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_archetype_hrid_class"><a class="anchor" href="#_archetype_hrid_class"></a>3.6.8. ARCHETYPE_HRID Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>ARCHETYPE_HRID</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Human_readable structured identifier (HRID) for an archetype or template.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>namespace</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Reverse domain name namespace identifier.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_publisher</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of the Reference Model publisher.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_package</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of the package in whose reachability graph the rm_class class is found (there can be more than one possibility in many reference models).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_class</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of the root class of this archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The short concept name of the archetype as used in the multi-axial archetype_hrid.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>release_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The full numeric version of this archetype consisting of 3 parts, e.g. 1.8.2. The archetype_hrid feature includes only the major version.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_status</strong>: <code>VERSION_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The status of the version, i.e. released, release_candidate etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>build_count</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The build count since last increment of any version part.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>semantic_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The ‘interface’ form of the HRID, i.e. down to the major version.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>physical_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The ‘physical’ form of the HRID, i.e. with complete version information.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Full version identifier string, based on release_version and lifecycle, e.g. 1.8.2-rc.4.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>major_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Major version of this archetype, extracted from release_version.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minor_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Minor version of this archetype, extracted from release_version.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>patch_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Patch version of this archetype, extracted from release_version. Equivalent to patch version in patch version in semver.org sytem.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_rm_publisher_validity</em></strong>: not rm_publisher.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_rm_package_validity</em></strong>: not rm_package.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_class_name_validity</em></strong>: not rm_class.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_concept_id_validity</em></strong>: not concept_id.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_release_version_validity</em></strong>: valid_version (release_version)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_template_class"><a class="anchor" href="#_template_class"></a>3.6.9. TEMPLATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TEMPLATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Class representing source template, i.e. a kind of archetype that may include template overlays, and may be restricted by tools to only defining mandations, prohibitions, and restrictions on elements already defined in the flat parent.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">AUTHORED_ARCHETYPE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>overlays</strong>: <code>List&lt;TEMPLATE_OVERLAY&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Overlay archetypes, i.e. partial archetypes that include full definition and terminology, but logically derive all their meta-data from from the owning template.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_is_specialised</em></strong>: is_specialised</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_template_overlay_class"><a class="anchor" href="#_template_overlay_class"></a>3.6.10. TEMPLATE_OVERLAY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TEMPLATE_OVERLAY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A concrete form of the bare ARCHETYPE class, used to represent overlays in a source template. Overlays have no meta-data of their own, and are instead docu-mented by their owning template.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Inv_is_specialised</em></strong>: is_specialised</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_operational_template_class"><a class="anchor" href="#_operational_template_class"></a>3.6.11. OPERATIONAL_TEMPLATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>OPERATIONAL_TEMPLATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Root object of an operational template. An operational template is derived from a TEMPLATE definition and the ARCHETYPEs and/or TEMPLATE_OVERLAYs mentioned by that template by a process of flattening, and potentially removal of unneeded languages and terminologies.</p>
</div>
<div class="paragraph">
<p>An operational template is used for generating and validating canonical openEHR data, and also as a source artefact for generating other downstream technical artefacts, including XML schemas, APIs and UI form definitions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">AUTHORED_ARCHETYPE</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>component_terminologies</strong>: <code>Hash&lt;String, ARCHETYPE_TERMINOLOGY&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Compendium of flattened terminologies of archetypes externally referenced from this archetype, keyed by archetype identifier. This will almost always be present in a template.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_extracts</strong>: <code>Hash&lt;String,ARCHETYPE_TERMINOLOGY&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Directory of term definitions as a two-level  table. The outer hash keys are term codes,  e.g. "at4", and the inner hash key are term  attribute names, e.g. "text", "description" etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>component_terminology</strong> (an_id: <code>String</code>): <code>ARCHETYPE_TERMINOLOGY</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Specialisation_validity</em></strong>: is_specialised</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_validity_rules"><a class="anchor" href="#_validity_rules"></a>3.7. Validity Rules</h3>
<div class="paragraph">
<p>The following validity rules apply to all varieties of <code>ARCHETYPE</code> object:</p>
</div>
<div class="paragraph rule">
<p><strong>VARAV</strong>: ADL version validity. The <code><em>adl_version</em></code> top-level meta-data item must exist and consist of a valid 3-part version identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VARRV</strong>: RM release validity. The <code><em>rm_release</em></code> top-level meta-data item must exist and consist of a valid 3-part version identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VARCN</strong>: archetype concept validity. The <code><em>node_id</em></code> of the root object of the archetype must be of the form <code>id1{.1}*</code>, where the number of <code>.1</code> components equals the specalisation depth, and must be defined in the terminology.</p>
</div>
<div class="paragraph rule">
<p><strong>VATDF</strong>: value code validity. Each value code (at-code) used in a term constraint in the archetype definition must be defined in the <code>term_definitions</code> part of the terminology of the flattened form of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VACDF</strong>: constraint code validity. Each value set code (ac-code) used in a term constraint in the archetype definition must be defined in the term_definitions part of the terminology of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VATDA</strong>: value set assumed value code validity. Each value code (at-code) used as an assumed_value for a value set in a term constraint in the archetype definition must exist in the value set definition in the terminology for the identified value set.</p>
</div>
<div class="paragraph rule">
<p><strong>VETDF</strong>: external term validity. Each external term used within the archetype definition must exist in the relevant terminology (subject to tool accesibility; codes for inaccessible terminologies should be flagged with a warning indicating that no verification was possible).</p>
</div>
<div class="paragraph rule">
<p><strong>VOTM</strong>: terminology translations validity. Translations must exist for <code>term_definitions</code> and <code>constraint_definitions</code> sections for all languages defined in the <code>description</code> / <code>translations</code> sections.</p>
</div>
<div class="paragraph rule">
<p><strong>VOKU</strong>: object key unique. Within any keyed list in an archetype, including the <code>desription</code>, <code>terminology</code>, and <code>annotations</code> sections, each item must have a unique key with respect to its siblings.</p>
</div>
<div class="paragraph rule">
<p><strong>VARDT</strong>: archetype definition typename validity. The typename mentioned in the outer block of the archetype definition section must match the type mentioned in the first segment of the archetype id.</p>
</div>
<div class="paragraph rule">
<p><strong>VRANP</strong>: annotation path valid. Each path mentioned in an annotation within the <code>annotations</code> section must either be a valid archetype path, or a 'reference model' path, i.e. a path that is valid for the root class of the archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VRRLP</strong>: rule path valid. Each path mentioned in a rule in the <code>rules</code> section must be found within the archetype, or be an RM-valid extension of a path found within the archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to instances of <code>ARCHETYPE</code> and subtypes other than <code>TEMPLATE_OVERLAY</code>:</p>
</div>
<div class="paragraph rule">
<p><strong>VARID</strong>: archetype identifier validity. The archetype must have an identifier that conforms to the openEHR specification for archetype identifiers.</p>
</div>
<div class="paragraph rule">
<p><strong>VDEOL</strong>: original language specified. An <code>original_language</code> section containing the meta-data of the original authoring language must exist.</p>
</div>
<div class="paragraph rule">
<p><strong>VARD</strong>: description specified. A <code>description</code> section containing the main meta-data of the archetype must exist.</p>
</div>
<div class="paragraph">
<p>The following rules apply to specialised archetypes, for which <code>ARCHETYPE</code>.<code><em>is_specialised</em></code> returns <code>True</code>.</p>
</div>
<div class="paragraph rule">
<p><strong>VASID</strong>: archetype specialisation parent identifier validity. The archetype identifier stated in the <code>specialise</code> clause must be the identifier of the immediate specialisation parent archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VALC</strong>: archetype language conformance. The languages defined in a specialised archetype must be the same as or a subset of those defined in the flat parent.</p>
</div>
<div class="paragraph rule">
<p><strong>VACSD</strong>: archetype concept specialisation depth. The specialisation depth of the archetypes must be one greater than the specialisation depth of the parent archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VATCD</strong>: archetype code specialisation level validity. Each archetype term ('at' code) and constraint code ('ac' code) used in the archetype <code>definition</code> section must have a specialisation level no greater than the specialisation level of the archetype.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constraint_model_package"><a class="anchor" href="#_constraint_model_package"></a>4. Constraint Model Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>4.1. Overview</h3>
<div class="paragraph">
<p>Figure <a id="constraint_model_top"></a> and Figure <a id="constraint_model_bottom"></a> illustrate the object model of constraints used in an archetype definition. This model is completely generic, and is designed to express the semantics of constraints on instances of classes which are themselves described in any orthodox object-oriented formalism, such as UML. Accordingly, the major abstractions in this model correspond to major abstractions in object-oriented formalisms, including several variations of the notion of 'object' and the notion of 'attribute'. The notion of 'object' rather than 'class' or 'type' is used because archetypes are about constraints on data (i.e. 'instances', or 'objects') rather than models, which are constructed from 'classes'. In this document, the word 'attribute' refers to any data property of a class, regardless of whether regarded as a 'relationship' (i.e. association, aggregation, or composition) or 'primitive' (i.e. value) attribute in an object model.</p>
</div>
<div id="constraint_model_top" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-constraint_model-top.svg" alt="AOM constraint model top">
</div>
<div class="title">Figure 11. constraint_model Package</div>
</div>
<div class="paragraph">
<p>The definition part of an archetype is an instance of a <code>C_COMPLEX_OBJECT</code> and consists of alternate layers of object and attribute constrainer nodes, each containing the next level of nodes. At the leaves are primitive object constrainer nodes constraining primitive types such as <code>String</code> , <code>Integer</code> etc. There are also nodes that represent internal references to other nodes, constraint reference nodes that refer to a text constraint in the constraint binding part of the archetype terminology, and archetype constraint nodes, which represent constraints on other archetypes allowed to appear at a given point. The full list of concrete node types is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>C_COMPLEX_OBJECT</code> : any interior node representing a constraint on instances of some non-primitive type, e.g. <code>OBSERVATION</code> , <code>SECTION</code> ;</p>
</li>
<li>
<p><code>C_ATTRIBUTE</code> : a node representing a constraint on an attribute (i.e. UML 'relationship' or 'primitive attribute') in an object type;</p>
</li>
<li>
<p><code>C_PRIMITIVE_OBJECT</code> : a node representing a constraint on a primitive (built-in) object type;</p>
</li>
<li>
<p><code>C_COMPLEX_OBJECT_PROXY</code> : a node that refers to a previously defined <code>C_COMPLEX_OBJECT</code> node in the same archetype. The reference is made using a path;</p>
</li>
<li>
<p><code>ARCHETYPE_SLOT</code> : a node whose statements define a constraint that determines which other archetypes can appear at that point in the current archetype. It can be thought of like a keyhole, into which few or many keys might fit, depending on how specific its shape is. Logically it has the same semantics as a <code>C_COMPLEX_OBJECT</code> , except that the constraints are expressed in another archetype, not the current one.</p>
</li>
<li>
<p><code>C_ARCHETYPE_ROOT</code> : stands for the root node of an archetype; enables another archetype to be referenced from the present one. Used in both archetypes and templates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The constraints define which configurations of reference model class instances are considered to conform to the archetype. For example, certain configurations of the classes <code>PARTY</code> , <code>ADDRESS</code> , <code>CLUSTER</code> and <code>ELEMENT</code> might be defined by a Person archetype as allowable structures for 'people with identity, contacts, and addresses'. Because the constraints allow optionality, cardinality and other choices, a given archetype usually corresponds to a set of similar configurations of objects.</p>
</div>
<div id="constraint_model_bottom" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-constraint_model-bottom.svg" alt="AOM constraint model bottom">
</div>
<div class="title">Figure 12. constraint_model.primitive Package</div>
</div>
<div class="paragraph">
<p>The type-name nomenclature <code>C_XXX</code> used here is intended to be read as "constraint on objects of type <code>XXXX</code> ", i.e. a <code>C_COMPLEX_OBJECT</code> is a "constraint on a complex object (defined by a complex reference model type)". These type names are used below in the formal model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_semantics"><a class="anchor" href="#_semantics"></a>4.2. Semantics</h3>
<div class="paragraph">
<p>The effect of the model is to create archetype description structures that are a hierarchical alternation of object and attribute constraints. This structure can be seen by inspecting an ADL archetype, or by viewing an archetype in the <a href="http://www.openehr.org/downloads/ADLworkbench/home">openEHR ADL workbench</a>, and is a direct consequence of the object-oriented principle that classes consist of properties, which in turn have types that are classes. (To be completely correct, types do not always correspond to classes in an object model, but it does not make any difference here). The repeated object/attribute hierarchical structure of an archetype provides the basis for using paths to reference any node in an archetype. Archetype paths follow a syntax that is a directly convertible in and out of the W3C Xpath syntax.</p>
</div>
<div class="sect3">
<h4 id="_all_node_types"><a class="anchor" href="#_all_node_types"></a>4.2.1. All Node Types</h4>
<div class="sect4">
<h5 id="_path_functions"><a class="anchor" href="#_path_functions"></a>4.2.1.1. Path Functions</h5>
<div class="paragraph">
<p>A small number of properties are defined for all node types. The path feature computes the path to the current node from the root of the archetype, while the has_path function indicates whether a given path can be found in an archetype.</p>
</div>
</div>
<div class="sect4">
<h5 id="_conformance_functions"><a class="anchor" href="#_conformance_functions"></a>4.2.1.2. Conformance Functions</h5>
<div class="paragraph">
<p>All node types include two functions that formalise the notion of conformance of a specialised archetype to a parent archetype. Both functions take an argument which must be a corresponding node in a parent archetype, not necessarily the immediate parent. A 'corresponding' node is one found at the same or a congruent path. A congruent path is one in which one or more at-codes have been redefined in the specialised archetype.</p>
</div>
<div class="paragraph">
<p>The <code><em>c_conforms_to</em></code> function returns True if the node on which it is called is a valid specialisation of the 'other' node. The <code><em>c_congruent_to</em></code> function returns True if the node on which it is called is the same as the other node, with the possible exception of a redefined at-code. The latter may happen due to the need to restrict the domain meaning of node to a meaning narrower than that of the same node in the parent. The formal semantics of both functions are given in the section <a href="AOM2.htm#50487317_85899">See Class Definitions</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_any_allowed"><a class="anchor" href="#_any_allowed"></a>4.2.1.3. Any_allowed</h5>
<div class="paragraph">
<p>The <code><em>any_allowed</em></code> function defined on some node types indicates that any value permitted by the reference model for the attribute or type in question is allowed by the archetype; its use permits the logical idea of a completely "open" constraint to be simply expressed, avoiding the need for any further substructure.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_attribute_nodes"><a class="anchor" href="#_attribute_nodes"></a>4.2.2. Attribute Nodes</h4>
<div class="paragraph">
<p>Constraints on reference model attributes, including computed attributes (represented by functions with no aguments in most programming languages), are represented by instances of <code>C_ATTRIBUTE</code> . The expressible constraints include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>is_multiple</em></code>: a flag that indicates whether the <code>C_ATTRIBUTE</code> is constraining a multiply-valued (i.e. container) RM attribute or a single-valued one;</p>
</li>
<li>
<p><code><em>existence</em></code>: whether the corresponding instance (defined by the <code><em>rm_attribute_name</em></code> attribute) must exist;</p>
</li>
<li>
<p>child objects: representing allowable values of the object value(s) of the attribute.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the case of single-valued attributes (such as Person.date_of_birth) the children represent one or more alternative object constraints for the attribute value.</p>
</div>
<div class="paragraph">
<p>For multiply-valued attributes (such as <code>Person</code>.<code><em>contacts</em></code>: <code>List&lt;Contact&gt;</code>), a cardinality constraint on the container can be defined. The constraint on child objects is essentially the same except that more than one of the alternatives can co-exist in the data. Figure <a href="#c_attributes">C_ATTRIBUTE variants</a> illustrates the two possibilities.</p>
</div>
<div class="paragraph">
<p>The appearance of both <code><em>existence</em></code> and <code><em>cardinality</em></code> constraints in <code>C_ATTRIBUTE</code> deserves some explanation, especially as the meanings of these notions are often confused in object-oriented literature. An existence constraint indicates whether an object will be found in a given attribute field, while a cardinality constraint indicates what the valid membership of a container object is. <code><em>Cardinality</em></code> is only required for container objects such as <code>List&lt;T&gt;</code> , <code>Set&lt;T&gt;</code> and so on, whereas <code><em>existence</em></code> is always possible. If both are used, the meaning is as follows: the existence constraint says whether the container object will be there (at all), while the cardinality constraint says how many items must be in the container, and whether it acts logically as a list, set or bag. Both existence and cardinality are optional in the model, since they are only needed to override the settings from the reference model.</p>
</div>
<div id="c_attributes" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/c_attributes.png" alt="c attributes" width="70%">
</div>
<div class="title">Figure 13. C_ATTRIBUTE variants</div>
</div>
</div>
<div class="sect3">
<h4 id="_object_node_types"><a class="anchor" href="#_object_node_types"></a>4.2.3. Object Node Types</h4>
<div class="sect4">
<h5 id="_node_id_and_paths"><a class="anchor" href="#_node_id_and_paths"></a>4.2.3.1. Node_id and Paths</h5>
<div class="paragraph">
<p>The <code><em>node_id</em></code> attribute in the class <code>C_OBJECT</code>, inherited by all subtypes, is of key importance in the archetype constraint model. It has two functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it allows archetype object constraint nodes to be individually identified, and in particular, guarantees sibling node unique identification;</p>
</li>
<li>
<p>it provides a code to which a human-understanding terminology definition can be attached, as well as potentially a terminology binding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The existence of <code><em>node_ids</em></code> in an archetype allows archetype paths to be created, which refer to each node. Every node in the archetype needs a <code><em>node_id</em></code> , but only node_ids for nodes under container attributes must have a terminology definition. For nodes under single-valued attributes, the terminology definition is optional (and typically not supplied), since the meaning is given by the reference model attribute definition.</p>
</div>
<div class="paragraph">
<p>Note that instances of <code>C_PRIMITIVE_OBJECT</code> have a constant <code><em>node_id</em></code> (see below) and thus do not require node identifiers to be supplied in syntax or serial forms that are converted to AOM structural form.</p>
</div>
</div>
<div class="sect4">
<h5 id="_sibling_ordering"><a class="anchor" href="#_sibling_ordering"></a>4.2.3.2. Sibling Ordering</h5>
<div class="paragraph">
<p>Within a specialised archetype, redefined or added object nodes may be defined under a container attribute. Since specialised archetypes are in differential form, i.e. only redefined or added nodes are expressed, not nodes inherited unchanged, the relative ordering of siblings can&#8217;t be stated simply by the ordering of such items within the relevant list within the differential form of the archetype. An explicit ordering indicator is required if indeed order is specific. The <code>C_OBJECT</code>.<code><em>sibling_order</em></code> attribute provides this possibility. It can only be set on a <code>C_OBJECT</code> descendant within a multiply-valued attribute, i.e. an instance of <code>C_ATTRIBUTE</code> for which the <code><em>cardinality</em></code> is ordered.</p>
</div>
</div>
<div class="sect4">
<h5 id="_node_deprecation"><a class="anchor" href="#_node_deprecation"></a>4.2.3.3. Node Deprecation</h5>
<div class="paragraph">
<p>It is possible to mark an instance of any defined node type as deprecated, meaning that by preference it should not be used, and that there is an alternative solution for recording the same information. Rules or recommendations for how deprecation should be handled are outside the scope of the archetype proper, and should be provided by the governance framework under which the archetype is managed.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_defined_object_nodes_c_defined_object"><a class="anchor" href="#_defined_object_nodes_c_defined_object"></a>4.2.4. Defined Object Nodes (C_DEFINED_OBJECT)</h4>
<div class="paragraph">
<p>The <code>C_DEFINED_OBJECT</code> subtype corresponds to the category of <code>C_OBJECTs</code> that are defined in an archetype by value, i.e. by inline definition. Four properties characterise <code>C_DEFINED_OBJECT</code> s as follows.</p>
</div>
<div class="sect4">
<h5 id="_valid_value"><a class="anchor" href="#_valid_value"></a>4.2.4.1. Valid_value</h5>
<div class="paragraph">
<p>The <code><em>valid_value</em></code> function tests a reference model object for conformance to the archetype. It is designed for recursive implementation in which a call to the function at the top of the archetype definition would cause a cascade of calls down the tree. This function is the key function of an 'archetype-enabled kernel' component that can perform runtime data validation based on an archetype definition.</p>
</div>
</div>
<div class="sect4">
<h5 id="_prototype_value"><a class="anchor" href="#_prototype_value"></a>4.2.4.2. Prototype_value</h5>
<div class="paragraph">
<p>This function is used to generate a reasonable default value of the reference object being constrained by a given node. This allows archteype-based software to build a 'prototype' object from an archetype which can serve as the initial version of the object being constrained, assuming it is being created new by user activity (e.g. via a GUI application). Implementation of this function will usually involve use of reflection libraries or similar.</p>
</div>
</div>
<div class="sect4">
<h5 id="_default_value"><a class="anchor" href="#_default_value"></a>4.2.4.3. Default_value</h5>
<div class="paragraph">
<p>This attribute allows a user-specified default value to be defined within an archetype. The <code><em>default_value</em></code> object must be of the same type as defined by the <code><em>prototype_value</em></code> function, pass the <code><em>valid_value</em></code> test. Where defined, the <code><em>prototype_value</em></code> function would return this value instead of a synthesised value.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reference_objects"><a class="anchor" href="#_reference_objects"></a>4.2.5. Reference Objects</h4>
<div class="paragraph">
<p>The types <code>ARCHETYPE_SLOT</code> and <code>C_COMPLEX_OBJECT_PROXY</code> are used to express, respectively, a 'slot' where further archetypes can be used to continue describing constraints; a reference to a part of the current archetype that expresses exactly the same constraints needed at another point.</p>
</div>
</div>
<div class="sect3">
<h4 id="_complex_objects_c_complex_object"><a class="anchor" href="#_complex_objects_c_complex_object"></a>4.2.6. Complex Objects (C_COMPLEX_OBJECT)</h4>
<div class="paragraph">
<p>Along with <code>C_ATTRIBUTE</code>, <code>C_COMPLEX_OBJECT</code> is the key structuring type of the <code>constraint_model</code> package, and consists of attributes of type <code>C_ATTRIBUTE</code> , which are constraints on the attributes (i.e. any property, including relationships) of the reference model type. Accordingly, each <code>C_ATTRIBUTE</code> records the name of the constrained attribute (in <code><em>rm_attr_name</em></code>) , the existence and cardinality expressed by the constraint (depending on whether the attribute it constrains is a multiple or single relationship), and the constraint on the object to which this <code>C_ATTRIBUTE</code> refers via its <code><em>children</em></code> attribute (according to its reference model) in the form of further <code>C_OBJECTs</code> .</p>
</div>
</div>
<div class="sect3">
<h4 id="_primitive_types_c_primitive_object_descendants"><a class="anchor" href="#_primitive_types_c_primitive_object_descendants"></a>4.2.7. Primitive Types (C_PRIMITIVE_OBJECT descendants)</h4>
<div class="paragraph">
<p>Constraints on primitive types are defined by the classes inheriting from <code>C_PRIMITIVE_OBJECT</code> , i.e. <code>C_STRING</code> , <code>C_INTEGER</code> and so on. The primitive types are represented in such a way as to accommodate both 'tuple' constraints and logically unary constraints, using a tuple array whose members are each a primitive constraint corresponding to each primitive type. Tuple constraints are second order constraints, described below, enable covarying constraints to be stated. In the unary case, the constraint is the first member of a tuple array.</p>
</div>
<div class="paragraph">
<p><code>C_PRIMITIVE_OBJECT</code> instances are created with a fixed id-code <code>ADL_CODE_DEFINITIONS.<em>primitive_node_id</em></code> as the value of <code><em>node_id</em></code> (see <a href="#_adl_code_definitions_class">ADL_CODE_DEFINITIONS Class</a>). For this reason, no node identifier needs to be supplied in a syntax or serialised form of an archetype, including ADL.</p>
</div>
<div class="paragraph">
<p>The primitive constraint for each primitive type may itself be complex. Its type is given by the type of the constraint accessor in each <code>C_PRIMITIVE_OBJECT</code> descendant and is summarised in the following table.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Primitive type</th>
<th class="tableblock halign-left valign-top">Primitive constrainer type</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Boolean&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can represent one or two Boolean values, enabling the logical constraints 'true', 'false' and 'true or false' to be expressed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of possible string values, which may include regular expressions, which are delimited by '/' characters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminology_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code> - <code>[acN]</code> or <code>[atN]`</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing either a single at-code or a single ac-code. In the latter case, the constraint refers to either a locally defined value set or (via a binding) an external value set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ordered types</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can represent a single value (which is a point interval), a list of values (list of point intervals), a list of intervals, which may be mixed proper and point intervals.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Integer&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Ordered type, with T = <code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Real&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Ordered type, with T = <code>Real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Temporal types</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;T&#8594;ISO8601_TYPE&gt;&gt;</code><br>
                     OR<br>
                    <code>String</code> (ADL pattern)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for ordered types, with T being an ISO8601-based type, with the addition of a second type constraint - <a href="http://www.openehr.org/releases/AM/latest/ADL2.html#_constraints_on_dates_times_and_durations">a pattern based on ISO8601 syntax</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;ISO8601_DATE&gt;&gt;</code><br>
                     OR<br>
                     pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_DATE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;ISO8601_TIME&gt;&gt;</code><br>
                     OR<br>
                     pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_TIME</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date_time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;ISO8601_DATE_TIME&gt;&gt;</code><br>
                     OR<br>
                     pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_DATE_TIME</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;ISO8601_DURATION&gt;&gt;</code><br>
                     OR<br>
                     pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_DURATION</code></p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_assumed_value"><a class="anchor" href="#_assumed_value"></a>4.2.7.1. Assumed_value</h5>
<div class="paragraph">
<p>The <code><em>assumed_value</em></code> attribute is useful for archetypes containing any optional constraint. and provides an ability to define a value that can be assumed for a data item for which no data is found at execution time. If populated, it can contain a single at-code that must be in the local value set referred to by the ac-code in the <code><em>constraint</em></code> attribute.</p>
</div>
<div class="paragraph">
<p>For example, an archetype for the concept 'blood pressure measurement' might contain an optional protocol section containing a data point for patient position, with choices 'lying', 'sitting' and 'standing'. Since the section is optional, data could be created according to the archetype which does not contain the protocol section. However, a blood pressure cannot be taken without the patient in some position, so clearly there is an implied value for patient position. Amongst clinicians, basic assumptions are nearly always made for such things: in general practice, the position could always safely be assumed to be "sitting" if not otherwise stated; in the hospital setting, "lying" would be the normal assumption. The assumed_value feature of archetypes allows such assumptions to be explicitly stated so that all users/systems know what value to assume when optional items are not included in the data.</p>
</div>
<div class="paragraph">
<p>Note that the notion of assumed values is distinct from that of 'default values'. The latter notion is that of a default 'pre-filled' value that is provided (normally in a local context by a template) for a data item that is to be filled in by the user, but which is typically the same in many cases. Default values are thus simply an efficiency mechanism for users. As a result, default values do appear in data, while assumed values don&#8217;t.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_terminology_constraints_c_terminology_code"><a class="anchor" href="#_terminology_constraints_c_terminology_code"></a>4.2.8. Terminology Constraints (C_TERMINOLOGY_CODE)</h4>
<div class="paragraph">
<p>The <code>C_TERMINOLOGY_CODE</code> type entails some complexity and merits further explanation. This is the only constrainer type whose constraint semantics are not self-contained, but located in the archetype terminology and/or in external terminologies.</p>
</div>
<div class="paragraph">
<p>A <code>C_TERMINOLOGY_CODE</code> instance in an archetype is simple: it can only be one of the following constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a single ac-code, referring to either a value-set defined in the archetype terminology or bound to an external value set or ref set;</p>
<div class="ulist">
<ul>
<li>
<p>in this case, an additional at-code may be included as an assumed value; the at-code must come from the locally defined value set;</p>
</li>
</ul>
</div>
</li>
<li>
<p>a single at-code, repesenting a single possible value.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The second case in theory could be done using an ac-code referring to a value set containing a single value, but there seems little value in this extra verbiage, and little cost in providing the single-member value set short cut.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, a <code>C_TERMINOLOGY_CODE</code> instance can reconstitute the internal value set via access to the archetype terminology (this has to be set up within the implementation). If bindings are evaluated, the external form of a value set can potentially be obtained as well. The utility of this is to be able to evaluate and cache certain external 'ref sets' when evaluating the Operational Template.</p>
</div>
<div class="sect4">
<h5 id="_terminology_code_resolution"><a class="anchor" href="#_terminology_code_resolution"></a>4.2.8.1. Terminology Code Resolution</h5>
<div class="paragraph">
<p>When an archetype is deployed in the form of an operational template, the internally defined value sets, and any bindings are processed in stages in order to obtain the final terminology codes from which the user should choose. The <code>C_TERMINOLOGY_CODE</code> class provides a number of functions to formalise this as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>value_set_expanded</em>: List&lt;String&gt;</code>: this function converts an ac-code to its corresponding set of at-codes, as defined in the <code>value_sets</code> section of the archetype.</p>
</li>
<li>
<p><code><em>value_set_substituted</em>: List&lt;URI&gt;</code>: where bindings exist to he value set at-codes, this function converts each code to its corresponding binding target, i.e. a URI.</p>
</li>
<li>
<p><code><em>value_set_resolved</em>: List&lt;TERMINOLOGY_CODE&gt;</code>: this function converts the list of URIs to final terms, including with textual rubrics, i.e. a list of <code>TERMINOLOGY_CODEs</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These functions would normally be implemented as 'lambdas' or 'agents', in order to obtain access to the target terminologies.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Since an archetype might not contain external terminology bindings for all (or even any) of its terminological constraints, a 'resolved' archetype will usually contain at-codes in its cADL definition. These at-codes would be treated as real coded terms in any implementation that was creating data, and as a consequence, archetype at-codes could occur in real data, as described in the the Terminology Integration section of the ADL specification.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_constraints_on_enumeration_types"><a class="anchor" href="#_constraints_on_enumeration_types"></a>4.2.9. Constraints on Enumeration Types</h4>
<div class="paragraph">
<p>Enumeration types in the reference model are assumed to have semantics expected in UML, and mainstream programming languages, i.e. to be a distinct type based on a primitive type, normally Integer or String. Each such type consists of a set of values from the domain of its underlying type, thus, a set of Integer, String or other primitive values. Each of these values is assumed to be named in the manner of a symbolic constant. Although stricly speaking UML doesn&#8217;t require an enumerated type to be based on an underlying primitive type, programming languages do, hence the assumption here that values from the domain of such a type are involved.</p>
</div>
<div class="paragraph">
<p>A constraint on an enumerated type therefore consists of an AOM instance of a <code>C_PRIMITIVE</code> descendant, almost always <code>C_INTEGER</code> or <code>C_STRING</code> . The flag <code><em>is_enumerated_type_constraint</em></code> defined on <code>C_PRIMITIVE</code> indicates that a given <code>C_PRIMITIVE</code> is a constrainer for an enumerated type.</p>
</div>
<div class="paragraph">
<p>Since <code>C_PRIMITIVEs</code> don&#8217;t have type names in ADL, the type name is inferred by any parser or compiler tool that deserialises an archetype from ADL, and stored in the <code><em>rm_type</em></code> attribute inherited from <code>C_OBJECT</code> . An example is shown below of a type enumeration.</p>
</div>
<div id="enumerated_constraint" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/enumerated_type_constraint.png" alt="enumerated type constraint" width="70%">
</div>
<div class="title">Figure 14. Enumerated Constraint</div>
</div>
<div class="paragraph">
<p>A parser that deserialises from an object dump format such as ODIN, JSON or XML will not need to do this.</p>
</div>
<div class="paragraph">
<p>The form of the constraint itself is simply a series of Integer, String or other primitive values, or an equivalent range or ranges. In the above example, the ADL equivalent of the pk_percent, pk_fraction constraint on a field of type <code>PROPORTION_KIND</code> is in fact just <em>\{2, 3}</em>, and it is visualised by lookup to show the relevant symbolic names.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_second_order_constraints"><a class="anchor" href="#_second_order_constraints"></a>4.3. Second Order Constraints</h3>
<div class="paragraph">
<p>All of the constraint semantics described above can be considered 'first order' in the sense that they define how specific object/attribute/object hierarchies are defined in the instance possibility space of some part of a reference model.</p>
</div>
<div class="paragraph">
<p>Some constraints however do not fit directly within the object/attribute/object hierarchy scheme, and are considered 'second order constraints' in the archetype formalism. The 'rule' constraints ('invariants' in ADL/AOM 1.4) constitute one such group. These constraints are defined in terms of first order predicate logic statements that can refer to any number of constraint nodes within the main hierarchy. These are described in Figure <a href="#rules_package">Rules Package</a>.</p>
</div>
<div class="paragraph">
<p>Another type of second order constraint can be 'attached' to the object/attribute/object hierarchy in order to further limit structural possibilities. Although these constraints could also theoretically be expressed as rules, they are supported by direct additions to the main constraint model since they can be easily and intuitively represented inline in ADL and corresponding AOM structures.</p>
</div>
<div class="sect3">
<h4 id="_tuple_constraints"><a class="anchor" href="#_tuple_constraints"></a>4.3.1. Tuple Constraints</h4>
<div class="paragraph">
<p>Tuple constraints are designed to account for the very common need to constrain the values of more than one RM class attribute together. This effectively treats the attributes in question as a tuple, and the corresponding object constraints are accordingly modelled as tuples as well. A detailed explanation of tuples can be found in the ADL2 specification&#8217;s <a href="http://www.openehr.org/releases/AM/latest/docs/ADL2/ADL2.html#_second_order_constraints">section on second order constraints</a>. Additions to the main constraint model to support tuples are shown below.</p>
</div>
<div id="tuple_constraint_model" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-constraint_model-tuple.svg" alt="AOM constraint model tuple">
</div>
<div class="title">Figure 15. Tuple Constraint Model</div>
</div>
<div class="paragraph">
<p>In this model, the type <code>C_ATTRIBUTE_TUPLE</code> groups the co-constrained <code>C_ATTRIBUTEs</code> under a <code>C_COMPLEX_OBJECT</code>. Currently the concrete type is limited to being <code>C_PRIMITIVE_OBJECT</code> to reduce complexity, and since it caters for all known examples of tuple constraints. In principle, any <code>C_DEFINED_OBJECT</code> could be allowed, and this may change in the future.</p>
</div>
<div class="paragraph">
<p>The tuple constraint type replaces all domain-specific constraint types defined in <a href="http://www.openehr.org/releases/AM/latest/ADL1.4.html">ADL/AOM 1.4</a>, including <code>C_DV_QUANTITY</code> and <code>C_DV_ORDINAL</code>.</p>
</div>
<div class="paragraph">
<p>These additions allow standard constraint structures (i.e. <code>C_ATTRIBUTE</code> / <code>C_COMPLEX_OBJECT</code> / <code>C_PRIMITIVE_OBJECT</code> hierarchies) to be 'annotated', while leaving the first order structure intact. The following example shows an archetype instance structure in which a notional <code>ORDINAL</code> type is constrained. The logical requirement is to constrain a <code>ORDINAL</code> to one of three instance possibilities, each of which consists of a pair of values for the attributes value and symbol, of type Integer and <code>TERMINOLOGY_CODE</code> respectively. Each of these three instance constraints should be understood as an alternative for the single valued owning attribute, <code>ELEMENT</code> .value. Tuple constraints achieve the requirement to express the constraints as pairs not just as allowable alternatives at the final leaf level, which would incorrectly allowing any mixing of the Integer and code values.</p>
</div>
<div id="ordinal_tuple_example" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-ordinal_tuple_example.svg" alt="AOM ordinal tuple example">
</div>
<div class="title">Figure 16. Tuple Constraint Example AOM Instances</div>
</div>
<div id="tuple_constraint_example_data" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/tuple_example_data.png" alt="tuple example data">
</div>
<div class="title">Figure 17. Tuple Constraint Example Data</div>
</div>
</div>
<div class="sect3">
<h4 id="_assertions"><a class="anchor" href="#_assertions"></a>4.3.2. Assertions</h4>
<div class="paragraph">
<p>Assertions are also used in <code>ARCHETYPE_SLOTs</code> , in order to express the 'included' and 'excluded' archetypes for the slot. In this case, each assertion is an expression that refers to parts of other archetypes, such as its identifier (e.g. 'include archetypes with <code><em>short_concept_name</em></code> matching <code>xxxx</code> '). Assertions are modelled here as a generic expression tree of unary prefix and binary infix operators. Examples of archetype slots in ADL syntax are given in the <a href="http://www.openehr.org/releases/AM/latest/ADL2.html">openEHR ADL specifcation</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aom_type_substitutions"><a class="anchor" href="#_aom_type_substitutions"></a>4.4. AOM Type Substitutions</h3>
<div class="paragraph">
<p>The <code>C_OBJECT</code> types defined in Figure <a href="#constraint_model_top">[constraint_model_top]</a> are reproduced below, with concrete types that may actually occur in archetypes shown in dark yellow / non-italic.</p>
</div>
<div id="c_object_substitutions" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/c_object_substitutions.png" alt="c object substitutions">
</div>
<div class="title">Figure 18. C_Object Substitutions</div>
</div>
<div class="paragraph">
<p>Within a specialised archetype, nodes that redefine corresponding nodes in the parent are normally of the same <code>C_OBJECT</code> type (we can think of this as a 'meta-type', since the RM type is the 'type' in the information model sense), but in some cases may also be of different <code>C_OBJECT</code> types.</p>
</div>
<div class="paragraph">
<p>The rules for meta-type redefinition are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A node of each meta-type can be redefined by a node of the same meta-type, with narrowed / added constraints;</p>
</li>
<li>
<p><code>ARCHETYPE_SLOT</code> can be redefined by:</p>
<div class="ulist">
<ul>
<li>
<p>one or more <code>C_ARCHETYPE_ROOT</code> nodes taken together, considered to define a 'filled' version of the slot;</p>
</li>
<li>
<p>an <code>ARCHETYPE_SLOT</code> , in order to close the slot.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>C_ARCHETYPE_ROOT</code> node can be redefined by:</p>
<div class="ulist">
<ul>
<li>
<p>A <code>C_ARCHETYPE_ROOT</code> , where the archetype_ref of the redefining node is a specialisation of that mentioned in the parent node.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A 'terminal' <code>C_COMPLEX_OBJECT</code> node containing no constraint other than RM type, <code><em>node_id</em></code> and possibly occurrences (i.e. having no substructure), can be redefined by a constraint of any other AOM type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The 'terminal' <code>C_COMPLEX_OBJECT</code> can be understood as a placeholder node primarily defined for the purpose of stating RM type and meaning (id-code).</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_definitions_2"><a class="anchor" href="#_class_definitions_2"></a>4.5. Class Definitions</h3>
<div class="sect3">
<h4 id="_archetype_constraint_class"><a class="anchor" href="#_archetype_constraint_class"></a>4.5.1. ARCHETYPE_CONSTRAINT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>ARCHETYPE_CONSTRAINT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Archetype equivalent to LOCATABLE class in openEHR Common reference model. Defines common constraints for any inheritor of LOCATABLE in any reference model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Any</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent</strong>: <code>ARCHETYPE_CONSTRAINT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Parent node, except in the case of the top of a tree, i.e. root C_COMPLEX_OBJECT of an archetype definition.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>soc_parent</strong>: <code>C_SECOND_ORDER</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Inverse relationship for ARCHETYPE_CONSTRAINT node owned by C_SECOND_ORDER.members attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_prohibited</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this node (and all its sub-nodes) is a valid archetype node for its type. This function should be implemented by each subtype to perform semantic validation of itself, and then call the is_valid function in any subparts, and generate the result appropriately.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_path</strong> (a_path: <code>String</code>): <code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the relative path a_path exists at this node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Path of this node relative to root of archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other.
Typically used during validation of special-ised archetype nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other, with the exception of node_id redefnition in C_OBJECT nodes.
Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_second_order_constrained</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: soc_parent /= Void or else (parent /= Void and then parent.is_second_order_constrained)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if there is a second order constraint such as a tuple constraint on this node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_root</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_leaf</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_attribute_class"><a class="anchor" href="#_c_attribute_class"></a>4.5.2. C_ATTRIBUTE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_ATTRIBUTE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract model of constraint on any kind of attribute in a class model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE_CONSTRAINT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_attribute_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Reference model attribute within the enclosing type represented by a C_OBJECT.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>existence</strong>: <code>MULTIPLICITY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constraint settable on every attribute, regardless of whether it is singular or of a container type, which indicates whether its target object exists or not (i.e. is mandatory or not). Only set if it overrides the underlying reference model or parent archetype in the case of specialised archetypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>children</strong>: <code>List&lt;C_OBJECT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Child C_OBJECT nodes. Each such node represents a constraint on the type of this attribute in its reference model. Multiples occur both for multiple items in the case of container attributes, and alternatives in the case of singular attributes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>differential_path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Path to the parent object of this attribute (i.e. doesn’t include the name of this attribute). Used only for attributes in differential form, specialised archetypes. Enables only the re-defined parts of a specialised archetype to be expressed, at the path where they occur.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cardinality</strong>: <code>CARDINALITY</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Cardinality constraint of attribute, if a container attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_multiple</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Flag indicating whether this attribute constraint is on a container (i.e. multiply-valued) attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_mandatory</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_attribute_path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Path of this attribute with respect to owning C_OBJECT, including differential path where applicable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_single</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this node logically represents a single-valued attribute. Evaluated as not is_multiple.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = existence = Void and is_single and other.is_single) or (is_multiple and other.is_multiple and cardinality = Void</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other, with the exception of node_id redefnition in C_OBJECT nodes.
Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = existence_conforms_to (other) and is_single and other.is_single) or else (is_multiple and cardinality_conforms_to (other)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other.
Typically used during validation of special-ised archetype nodes.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_cardinality_class"><a class="anchor" href="#_cardinality_class"></a>4.5.3. CARDINALITY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>CARDINALITY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Express constraints on the cardinality of container objects which are the values of multiply-valued attributes, including uniqueness and ordering, providing the means to state that a container acts like a logical list, set or bag. The cardinality cannot contradict the cardinality of the corresponding attribute within the relevant reference model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>interval</strong>: <code>MULTIPLICITY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The interval of this cardinality.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_ordered</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the members of the container attribute to which this cardinality refers are ordered.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_unique</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the members of the container attribute to which this cardinality refers are unique.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_bag</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the semantics of this cardinality represent a bag, i.e. unordered, non-unique membership.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_list</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the semantics of this cardinality represent a list, i.e. ordered, non-unique membership.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_set</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the semantics of this cardinality represent a set, i.e. unordered, unique membership.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_conformance_semantics"><a class="anchor" href="#_conformance_semantics"></a>4.5.3.1. Conformance Semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_ATRIBUTE</code> node in a specialised archetype to the corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints as `other&#39;.</span>
        <span class="tok-c1">-- Returns False if any of the following is incompatible:</span>
        <span class="tok-c1">--	 * cardinality</span>
        <span class="tok-c1">--	 * existence</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">existence_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
            <span class="tok-p">((</span><span class="tok-n">is_single</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">is_single</span><span class="tok-p">)</span> <span class="tok-ow">or else</span>
            <span class="tok-p">(</span><span class="tok-n">is_multiple</span> <span class="tok-ow">and</span> <span class="tok-n">cardinality_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)))</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
		<span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no additional constraints than `other&#39;.</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">existence</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-p">((</span><span class="tok-n">is_single</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">is_single</span><span class="tok-p">)</span> <span class="tok-ow">or</span>
                <span class="tok-p">(</span><span class="tok-n">is_multiple</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">is_multiple</span> <span class="tok-ow">and</span> <span class="tok-n">cardinality</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span><span class="tok-p">))</span>
    <span class="tok-kr">end</span>

<span class="tok-n">existence_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
		<span class="tok-c1">-- True if the existence of this node conforms to other.existence</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-n">existence</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">existence</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">existence</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">existence</span><span class="tok-p">)</span>
        <span class="tok-kr">else</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">True</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span>

<span class="tok-n">cardinality_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
		<span class="tok-c1">-- True if the cardinality of this node conforms to other.cardinality, if it exists</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-n">cardinality</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">cardinality</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">cardinality</span><span class="tok-p">)</span>
        <span class="tok-kr">else</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">True</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_validity_rules_2"><a class="anchor" href="#_validity_rules_2"></a>4.5.3.2. Validity Rules</h5>
<div class="paragraph">
<p>The validity rules are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCARM</strong>: attribute name reference model validity: an attribute name introducing an attribute constraint block must be defined in the underlying information model as an attribute (stored or computed) of the type which introduces the enclosing object block.</p>
</div>
<div class="paragraph rule">
<p><strong>VCAEX</strong>: archetype attribute reference model existence conformance: the existence of an attribute, if set, must conform, i.e. be the same or narrower, to the existence of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VCAM</strong>: archetype attribute reference model multiplicity conformance: the multiplicity, i.e. whether an attribute is multiply- or single-valued, of an attribute must conform to that of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VDIFV</strong>: archetype attribute differential path validity: an archetype may only have a differential path if it is specialised..</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to redefinition in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VDIFP</strong>: specialised archetype attribute differential path validity: if an attribute constraint has a differential path, the path must exist in the flat parent, and also be valid with respect to the reference model, i.e. in the sense that it corresponds to a legal potential construction of objects.</p>
</div>
<div class="paragraph rule">
<p><strong>VSANCE</strong>: specialised archetype attribute node existence conformance: the existence of a redefined attribute node in a specialised archetype, if stated, must conform to the existence of the corresponding node in the flat parent archetype, by having an identical range, or a range wholly contained by the latter.</p>
</div>
<div class="paragraph rule">
<p><strong>VSAM</strong>: specialised archetype attribute multiplicity conformance: the multiplicity, i.e. whether an attribute is multiply- or single-valued, of a redefined attribute must conform to that of the corresponding attribute in the parent archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to single-valued attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is False:</p>
</div>
<div class="paragraph rule">
<p><strong>VACSO</strong>: single-valued attribute child object occurrences validity: the occurrences of a child object of a single-valued attribute cannot have an upper limit greater than 1.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to container attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is True:</p>
</div>
<div class="paragraph rule">
<p><strong>VACMCU</strong>: cardinality/occurrences upper bound validity: where a cardinality with a finite upper bound is stated on an attribute, for all immediate child objects for which an occurrences constraint is stated, the occurrences must either have an open upper bound (i.e. n..*) which is interpreted as the maximum value allowed within the cardinality, or else a finite upper bound which is &#8656; the cardinality upper bound.</p>
</div>
<div class="paragraph rule">
<p><strong>VACMCO</strong>: cardinality/occurrences orphans: it must be possible for at least one instance of one optional child object (i.e. an object for which the occurrences lower bound is 0) and one instance of every mandatory child object (i.e. object constraints for which the occurrences lower bound is &gt;= 1) to be included within the cardinality range.</p>
</div>
<div class="paragraph rule">
<p><strong>VCACA</strong>: archetype attribute reference model cardinality conformance: the cardinality of an attribute must conform, i.e. be the same or narrower, to the cardinality of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph">
<p>The following validity warnings apply to container attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is True:</p>
</div>
<div class="paragraph rule">
<p><strong>WACMCL</strong>: cardinality/occurrences lower bound validity: where a cardinality with a finite upper bound is stated on an attribute, for all immediate child objects for which an occurrences constraint is stated, the sum of occurrences lower bounds should be lower than the cardinality upper limit.</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to cardinality redefinition in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VSANCC</strong>: specialised archetype attribute node cardinality conformance: the cardinality of a redefined (multiply-valued) attribute node in a specialised archetype, if stated, must conform to the cardinality of the corresponding node in the flat parent archetype by either being identical, or being wholly contained by the latter.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_object_class"><a class="anchor" href="#_c_object_class"></a>4.5.4. C_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_OBJECT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract model of constraint on any kind of object node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE_CONSTRAINT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_type_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Reference model type that this node corresponds to.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>occurrences</strong>: <code>MULTIPLICITY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Occurrences of this object node in the data, under the owning attribute. Upper limit can only be greater than 1 if owning attribute has a cardinality of more than 1.
Only set if it overrides the parent archetype in the case of specialised archetypes, or else the occurrences inferred from the underlying reference model existence and/or cardinality of the containing attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Semantic identifier of this node, used to dis-tinguish sibling nodes. All nodes must have a node_id; for nodes under a container C_ATTRIBUTE, the id must be an id-code must be defined in the archetype terminolo-gy. For valid structures, all node ids are id-codes.
For C_PRIMITIVE_OBJECTs, it will have the special value Primitive_node_id.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_deprecated</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this node and by implication all sub-nodes are deprecated for use.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sibling_order</strong>: <code>SIBLING_ORDER</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional indicator of order of this node with respect to another sibling. Only meaningful in a specialised archetype for a C_OBJECT within a C_ATTRIBUTE with is_multiple = True.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Level of specialisation of this archetype node, based on its node_id. The value 0 corresponds to non-specialised, 1 to first-level specialisation and so on. The level is the same as the number of ‘.’ characters in the node_id code. If node_id is not set, the return value is -1, signifying that the specialisation level should be determined from the nearest parent C_OBJECT node having a node_id.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sibling_order_class"><a class="anchor" href="#_sibling_order_class"></a>4.5.5. SIBLING_ORDER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>SIBLING_ORDER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Defines the order indicator that can be used on a C_OBJECT within a container attribute in a specialised archetype to indicate its order with respect to a sibling defined in a higher specialisation level.</p>
</div>
<div class="paragraph">
<p>Misuse: This type cannot be used on a C_OBJECT other than one within a container attribute in a specialised archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_before</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the order relationship is ‘before’, if False, it is ‘after’.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sibling_node_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Node identifier of sibling before or after which this node should come.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_after</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if the order relationship is ‘after’, computed as the negation of is_before.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_occurrences_inferencing_rules"><a class="anchor" href="#_occurrences_inferencing_rules"></a>4.5.5.1. Occurrences inferencing rules</h5>
<div class="paragraph">
<p>The notion of 'occurrences' does not exist in an object model that might be used as the reference model on which archteypes are based, because it is a class model. However, archetypes commonly constrain the occurrences of object nodes under a container attribute, indicating how many objects conforming to a specific object constraint node might exist.</p>
</div>
<div class="paragraph">
<p>There are various circumstances where it is useful to know the effective occurrences of an archetype object node. One is in validation, in order to determine validity of occurrences constraints; another is in archetype editor tools. Similarly, in an <a href="http://www.openehr.org/releases/AM/latest/OPT2.html">operational template</a>, an occurrences constraint is required on all child object nodes of container attributes. Most such constraints come from the source template(s) and archetypes, but often there will be nodes with no occurrences set. In these cases, the occurrences constraint is inferred from the archetype and the reference model according to the following algorithm, where <code>c_object</code> represents any object node in an archetype.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">effective_occurrences</span> <span class="tok-p">(</span><span class="tok-n">rm_prop_mult</span><span class="tok-p">:</span> <span class="tok-nc">FUNCTION</span> <span class="tok-o">[</span><span class="tok-n">args</span><span class="tok-p">:</span> <span class="tok-nc">TUPLE</span><span class="tok-o">[</span><span class="tok-n">rm_type_name</span><span class="tok-p">:</span> <span class="tok-nc">STRING</span><span class="tok-p">,</span> <span class="tok-n">rm_property_path</span><span class="tok-p">:</span> <span class="tok-nc">STRING</span><span class="tok-o">]</span><span class="tok-p">,</span> <span class="tok-kc">result</span><span class="tok-p">:</span> <span class="tok-nc">MULTIPLICITY_INTERVAL</span><span class="tok-o">]</span><span class="tok-p">):</span> <span class="tok-nc">MULTIPLICITY_INTERVAL</span>
        <span class="tok-c1">-- evaluate effective occurrences, using the RM when no occurrences constraint or parent node</span>
        <span class="tok-c1">-- cardinality exists.</span>
        <span class="tok-c1">-- In this case, the upper limit of the RM&#39;s owning attribute is used to provide a value.</span>
        <span class="tok-c1">-- `rm_prop_mult&#39; is a function object that knows how to compute effective object multiplicity</span>
        <span class="tok-c1">-- by looking at the owning RM property.</span>
    <span class="tok-kr">local</span>
        <span class="tok-n">occ_lower</span><span class="tok-p">:</span> <span class="tok-nc">INTEGER</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">occurrences</span>

        <span class="tok-kr">elseif</span> <span class="tok-n">parent</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
            <span class="tok-kr">if</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">existence</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
                <span class="tok-n">occ_lower</span> <span class="tok-o">:=</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">existence</span><span class="tok-p">.</span><span class="tok-n">lower</span>
            <span class="tok-kr">end</span>
            <span class="tok-kr">if</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">cardinality</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
                <span class="tok-kr">if</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">interval</span><span class="tok-p">.</span><span class="tok-n">upper_unbounded</span> <span class="tok-kr">then</span>
                    <span class="tok-kr">create</span> <span class="tok-kc">Result</span><span class="tok-p">.</span><span class="tok-n">make_upper_unbounded</span> <span class="tok-p">(</span><span class="tok-n">occ_lower</span><span class="tok-p">)</span>
                <span class="tok-kr">else</span>
                    <span class="tok-kr">create</span> <span class="tok-kc">Result</span><span class="tok-p">.</span><span class="tok-n">make_bounded</span> <span class="tok-p">(</span><span class="tok-n">occ_lower</span><span class="tok-p">,</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">interval</span><span class="tok-p">.</span><span class="tok-n">upper</span><span class="tok-p">)</span>
                <span class="tok-kr">end</span>
            <span class="tok-kr">elseif</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">parent</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">rm_prop_mult</span> <span class="tok-p">(</span><span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">,</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">rm_attribute_path</span><span class="tok-p">)</span>
            <span class="tok-kr">else</span>
                <span class="tok-kr">create</span> <span class="tok-kc">Result</span><span class="tok-p">.</span><span class="tok-n">make_upper_unbounded</span> <span class="tok-p">(</span><span class="tok-n">occ_lower</span><span class="tok-p">)</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">else</span>
            <span class="tok-kr">create</span> <span class="tok-kc">Result</span><span class="tok-p">.</span><span class="tok-n">make_open</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above, <code><em>rm_prop_mult</em></code> is a reference to a function within an RM schema representation, which has the following logic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">object_multiplicity</span> <span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">:</span> <span class="tok-nc">STRING</span><span class="tok-p">,</span> <span class="tok-n">rm_property_path</span><span class="tok-p">:</span> <span class="tok-nc">STRING</span><span class="tok-p">):</span> <span class="tok-nc">MULTIPLICITY_INTERVAL</span>
        <span class="tok-c1">-- compute the effective object multiplicity of objects at rm_property_path within type rm_type_name</span>
        <span class="tok-c1">-- from the Reference Model</span>
    <span class="tok-kr">do</span>
        <span class="tok-n">rm_property_def</span> <span class="tok-o">:=</span> <span class="tok-n">get_rm_property_def</span> <span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">:</span> <span class="tok-nc">STRING</span><span class="tok-p">,</span> <span class="tok-n">rm_property_path</span><span class="tok-p">:</span> <span class="tok-nc">STRING</span><span class="tok-p">)</span>
        <span class="tok-kr">if</span> <span class="tok-n">rm_property_def</span><span class="tok-p">.</span><span class="tok-n">is_container</span> <span class="tok-kr">then</span>
            <span class="tok-kr">if</span> <span class="tok-n">rm_property_def</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">upper_unbounded</span> <span class="tok-kr">then</span>
                <span class="tok-kr">create</span> <span class="tok-kc">Result</span><span class="tok-p">.</span><span class="tok-n">make_upper_unbounded</span> <span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">)</span>
            <span class="tok-kr">else</span>
                <span class="tok-kr">create</span> <span class="tok-kc">Result</span><span class="tok-p">.</span><span class="tok-n">make_bounded</span> <span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-n">rm_property_def</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">upper</span><span class="tok-p">)</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">else</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">rm_property_def</span><span class="tok-p">.</span><span class="tok-n">existence</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>How this is concretely implemented depends on the modelling environment. Once possible RM model implementation is described in the <a href="http://www.openehr.org/releases/BASE/latest/bmm.html">openEHR Basic meta-model (BMM) specification</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_conformance_semantics_2"><a class="anchor" href="#_conformance_semantics_2"></a>4.5.5.2. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_OBJECT</code> node in a specialised archetype to the corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;.</span>
        <span class="tok-c1">-- `other&#39; is typically from the flat parent archetype.</span>
        <span class="tok-c1">-- Returns True only when the following is True:</span>
        <span class="tok-c1">--	 * rm_type_name is the same or a subtype of rm_type_name of other;</span>
        <span class="tok-c1">--	 * occurrences is same (= Void) or a sub-interval</span>
        <span class="tok-c1">--	 * node_id is the same, or redefined to a legal code at the level of the owning archetype</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">node_id_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
            <span class="tok-n">occurrences_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
            <span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">.</span><span class="tok-n">is_case_insensitive_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span> <span class="tok-ow">or else</span>
            <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">))</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition</span>
        <span class="tok-c1">-- to `other&#39;, other than possible redefinition of the node id, which doesn&#39;t matter, since</span>
        <span class="tok-c1">-- this won&#39;t get lost in a compressed path.</span>
        <span class="tok-c1">-- Current and `other&#39; are typically from flat archetypes being compared to generate a diff.</span>
        <span class="tok-c1">-- Used to determine if path segments can be compressed.</span>
        <span class="tok-c1">-- Returns True if:</span>
        <span class="tok-c1">--	 * rm_type_name is identical</span>
        <span class="tok-c1">--	 * occurrences is Void or else identical to other.occurrences</span>
        <span class="tok-c1">-- 	 * sibling_order is Void or else identical to other.sibling_order</span>
        <span class="tok-c1">--	 * node_id is identical or else is the only child that overlays the parent node</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">rm_type_name</span><span class="tok-p">.</span><span class="tok-n">is_case_insensitive_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
            <span class="tok-p">(</span><span class="tok-n">occurrences</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-ow">or else</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and then</span>
                <span class="tok-n">occurrences</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span><span class="tok-p">)))</span> <span class="tok-ow">and</span>
            <span class="tok-p">(</span><span class="tok-n">sibling_order</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-ow">or else</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">sibling_order</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and then</span>
                <span class="tok-n">sibling_order</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">sibling_order</span><span class="tok-p">)))</span> <span class="tok-ow">and</span>
            <span class="tok-n">node_reuse_congruent</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span>
    <span class="tok-kr">end</span>

<span class="tok-n">occurrences_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">occurrences</span><span class="tok-p">)</span>
        <span class="tok-kr">else</span>
            <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">True</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span>

<span class="tok-n">node_id_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">codes_conformant</span> <span class="tok-p">(</span><span class="tok-n">node_id</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">node_id</span><span class="tok-p">)</span>
    <span class="tok-kr">end</span>

<span class="tok-n">node_reuse_congruent</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-nc">BOOLEAN</span>
        <span class="tok-c1">-- True if this node is the sole re-using node of the corresponding node in the flat</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">node_id_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
            <span class="tok-p">(</span><span class="tok-n">is_root</span> <span class="tok-ow">or else</span>
            <span class="tok-kr">attached</span> <span class="tok-n">parent</span> <span class="tok-ow">and then</span> <span class="tok-n">parent</span><span class="tok-p">.</span><span class="tok-n">child_reuse_count</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">node_id</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_validity_rules_3"><a class="anchor" href="#_validity_rules_3"></a>4.5.5.3. Validity Rules</h5>
<div class="paragraph">
<p>The validity rules for all <code>C_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCORM</strong> object constraint type name existence: a type name introducing an object constraint block must be defined in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VCORMT</strong> object constraint type validity: a type name introducing an object constraint block must be the same as or conform to the type stated in the underlying information model of its owning attribute.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOCD</strong> object constraint definition validity: an object constraint block consists of one of the following (depending on subtype): an 'any' constraint; a reference; an inline definition of sub-constraints, or nothing, in the case where occurrences is set to {0}.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOID</strong> object node identifier validity: every object node must have a node identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOSU</strong> object node identifier validity: every object node must be unique within the archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules govern <code>C_OBJECTs</code> in specialised archetypes.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONT</strong> specialised archetype object node meta-type conformance: the meta-type of a redefined object node (i.e. the AOM node type such as <code>C_COMPLEX_OBJECT</code> etc) in a specialised archetype must be the same as that of the corresponding node in the flat parent, with the following exceptions: a <code>C_COMPLEX_OBJECT</code> with no child attributes may be redefined by a node of any AOM type; a <code>C_COMPLEX_OBJECT_PROXY</code>, may be redefined by a <code>C_COMPLEX_OBJECT</code>; a <code>ARCHTEYPE_SLOT</code> may be redefined by <code>C_ARCHETYPE_ROOT</code> (i.e. 'slot-filling'). See also validity rules VDSSID and VARXID.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONCT</strong> specialised archetype object node reference type conformance: the reference model type of a redefined object node in a specialised archetype must conform to the reference model type in the corresponding node in the flat parent archetype by either being identical, or conforming via an inheritance relationship in the relevant reference model.</p>
</div>
<div class="paragraph deprecated">
<p><em>Deprecated</em>: <strong>VSONIR</strong> specialised archetype redefined object node identifier condition: the node identifier of an object node in a specialised archetype that is a redefinition of a node in the flat parent must be redefined if any of reference model type, node identifier definition in the terminology, or occurrences of the immediate object constraint is redefined, with the exception of occurrences being redefined to {0}, i.e. exclusion.</p>
</div>
<div class="paragraph deprecated">
<p><em>Deprecated</em>: <strong>VSONI</strong> specialised archetype redefined object node identifier validity: if an object node in a specialised archetype is a redefinition of a node in the flat parent according to VSONIR, and the parent node carries a node identifier, it must carry a node identifier specalised at the level of the child archetype. Otherwise it must carry the same node identifier (or none) as the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONIN</strong> specialised archetype new object node identifier validity: if an object node in a specialised archetype is a new node with respect to the flat parent, and it carries a node identifier, the identifier must be a 'new' node identifier, specalised at the level of the child archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONIF</strong> specialised archetype object node identifier validity in flat siblings: the identification (or not) of an object node in a specialised archetype must be valid with respect to any sibling object nodes in the flattened parent (see VACMI).</p>
</div>
<div class="paragraph rule">
<p><strong>VSONCO</strong> specialised archetype redefine object node occurrences validity: the occurrences of a redefined object node in a specialised archetype, if stated, must conform to the occurrences in the corresponding node in the flat parent archetype by either being identical, or being wholly contained by the latter.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPT</strong> specialised archetype prohibited object node AOM type validity: the occurrences of a redefined object node in a specialised archetype, may only be prohibited (i.e. {0}) if the matching node in the parent is of the same AOM type.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPI</strong> specialised archetype prohibited object node AOM node id validity: a redefined object node in a specialised archetype with occurrences matching {0} must have exactly the same node id as the node in the flat parent being redefined.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPO</strong> specialised archetype object node prohibited occurrences validity: the occurrences of a new (i.e. having no corresponding node in the parent flat) object node in a specialised archetype, if stated, may not be 'prohibited', i.e. {0}, since prohibition only makes sense for an existing node.</p>
</div>
<div class="paragraph rule">
<p><strong>VSSM</strong> specialised archetype sibling order validity: the sibling order node id code used in a sibling marker in a specialised archetype must refer to a node found within the same container in the flat parent archetype.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_defined_object_class"><a class="anchor" href="#_c_defined_object_class"></a>4.5.6. C_DEFINED_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_DEFINED_OBJECT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent type of C_OBJECT subtypes that are defined by value, i.e. whose definitions are actually in the archetype rather than being by reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Default value set in a template, and present in an operational template. Generally limited to leaf and near-leaf nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (a_value: <code>Any</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Generate a prototype value from this constraint object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_default_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if there is an assumed value.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_complex_object_class"><a class="anchor" href="#_c_complex_object_class"></a>4.5.7. C_COMPLEX_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_COMPLEX_OBJECT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constraint on complex objects, i.e. any object that consists of other object constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_DEFINED_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>attributes</strong>: <code>List&lt;C_ATTRIBUTE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of constraints on attributes of the reference model type represented by this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>attribute_tuples</strong>: <code>List&lt;C_ATTRIBUTE_TUPLE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of attribute tuple constraints under this object constraint, if any.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_4"><a class="anchor" href="#_validity_rules_4"></a>4.5.7.1. Validity Rules</h5>
<div class="paragraph">
<p>The validity rules for <code>C_COMPLEX_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCATU</strong> attribute uniqueness: sibling attributes occurring within an object node must be uniquely named with respect to each other, in the same way as for class definitions in an object reference model.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_archetype_root_class"><a class="anchor" href="#_c_archetype_root_class"></a>4.5.8. C_ARCHETYPE_ROOT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_ARCHETYPE_ROOT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A specialisation of C_COMPLEX_OBJECT whose node_id attribute is an archetype identifier rather than the normal internal node code (i.e. id-code).
Used in two situations. The first is to represent an ‘external reference’ to an archetype from within another archetype or template. This supports re-use. The second use is within a template, where it is used as a slot-filler.</p>
</div>
<div class="paragraph">
<p>For a new external reference, the node_id is set in the normal way, i.e. with a new code at the specialisation level of the archetype.
For a slot-filler or a redefined external reference, the node_id is set to a specialised version of the node_id of the node being specialised, allowing matching to occur during flattening.</p>
</div>
<div class="paragraph">
<p>In all uses within source archetypes and templates, the children attribute is Void.</p>
</div>
<div class="paragraph">
<p>In an operational template, the node_id is converted to the archetype_ref, and the structure contains the result of flattening any template overlay structure and the underlying flat archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_COMPLEX_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>archetype_ref</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Reference to archetype is being used to fill a slot or redefine an external reference. Typi-cally an ‘interface’ archetype id, i.e. identifi-er with partial version information.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_5"><a class="anchor" href="#_validity_rules_5"></a>4.5.8.1. Validity Rules</h5>
<div class="paragraph">
<p>The following validity rules apply to <code>C_ARCHETYPE_ROOT</code> objects:</p>
</div>
<div class="paragraph rule">
<p><strong>VARXS</strong> external reference conforms to slot: the archetype reference must conform to the archetype slot constraint of the flat parent and be of a reference model type from the same reference model as the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXNC</strong> external reference node identifier validity: if the reference object is a redefinition of either a slot node, or another external reference node, the node_id of the object must conform to (i.e. be the same or a child of) the node_id of the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXAV</strong> external reference node archetype reference validity: if the reference object is a redefinition of another external reference node, the archetype_ref of the object must match a real archetype that has as an ancestor the archetype matched by the archetype reference mentioned in the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXTV</strong> external reference type validity: the reference model type of the reference object archetype identifier must be identical, or conform to the type of the slot, if there is one, in the parent archetype, or else to the reference model type of the attribute in the flat parent under which the reference object appears in the child archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXR</strong> external reference refers to resolvable artefact: the archetype reference must refer to an artefact that can be found in the current repository.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to a <code>C_ARCHETYPE_ROOT</code> that specialises a <code>ARCHETYPE_SLOT</code> in the parent archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VARXID</strong> external reference slot filling id validity: an external reference node defined as a filler for a slot in the parent archetype must have a node id that is a specialisation of that of the slot.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_archetype_slot_class"><a class="anchor" href="#_archetype_slot_class"></a>4.5.9. ARCHETYPE_SLOT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>ARCHETYPE_SLOT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constraint describing a  slot' where another archetype can occur.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>includes</strong>: <code>List&lt;ASSERTION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of constraints defining other archetypes that could be included at this point.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>excludes</strong>: <code>List&lt;ASSERTION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of constraints defining other archetypes that cannot be included at this point.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_closed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this slot specification in this artefact is closed to further filling either in further specialisations or at runtime. Default value False, i.e. unless explicitly set, a slot remains open.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if no constraints stated, and slot is not closed.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_6"><a class="anchor" href="#_validity_rules_6"></a>4.5.9.1. Validity Rules</h5>
<div class="paragraph">
<p>The validity rules for <code>ARCHETYPE_SLOTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VDFAI</strong> archetype identifier validity in definition. Any archetype identifier mentioned in an archetype slot in the definition section must conform to the published openEHR specification for archetype identifiers.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSIV</strong> archetype slot 'include' constraint validity. The 'include' constraint in an archetype slot must conform to the slot constraint validity rules.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSEV</strong> archetype slot 'exclude' constraint validity. The 'exclude' constraint in an archetype slot must conform to the slot constraint validity rules.</p>
</div>
<div class="paragraph">
<p>The slot constraint validity rules are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-kr">if</span> <span class="tok-n">includes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">=</span> <span class="tok-n">any</span> <span class="tok-kr">then</span>
    <span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">excludes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">/=</span> <span class="tok-n">any</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSEV</span> <span class="tok-n">Error</span>
<span class="tok-kr">elseif</span> <span class="tok-n">includes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">/=</span> <span class="tok-n">any</span> <span class="tok-kr">then</span>
    <span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">excludes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">=</span> <span class="tok-n">any</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSEV</span> <span class="tok-n">Error</span>
<span class="tok-kr">elseif</span> <span class="tok-n">excludes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">=</span> <span class="tok-n">any</span> <span class="tok-kr">then</span>
    <span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">includes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">/=</span> <span class="tok-n">any</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSIV</span> <span class="tok-n">Error</span>
<span class="tok-kr">elseif</span> <span class="tok-n">excludes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">/=</span> <span class="tok-n">any</span> <span class="tok-kr">then</span>
    <span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">includes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">=</span> <span class="tok-n">any</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSIV</span> <span class="tok-n">Error</span>
<span class="tok-kr">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following validity rules apply to <code>ARCHETYPE_SLOTs</code> defined as the specialisation of a slot in the parent archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSID</strong> slot redefinition child node id: a slot node in a specialised archetype that redefines a slot node in the flat parent must have an identical node id.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSM</strong> specialised archetype slot definition match validity. The set of archetypes matched from a library of archetypes by a specialised archetype slot definition must be a proper subset of the set matched from the same library by the parent slot definition.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSP</strong> specialised archetype slot definition parent validity. The flat parent of the specialisation of an archetype slot must be not be closed (is_closed = False).</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSC</strong> specialised archetype slot definition closed validity. In the specialisation of an archetype slot, either the slot can be specified to be closed (is_closed = True) or the slot can be narrowed, but not both.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_complex_object_proxy_class"><a class="anchor" href="#_c_complex_object_proxy_class"></a>4.5.10. C_COMPLEX_OBJECT_PROXY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_COMPLEX_OBJECT_PROXY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>A constraint defined by proxy, using a reference to an object constraint defined elsewhere in the same archetype. Note that since this object refers to another node, there are two objects with available occurrences values. The local occurrences value on a COJMPLEX_OBJECT_PROXY should always be used; when setting this from a seri- alised form, if no occurrences is mentioned, the target occurrences should be used (not the standard default of {1..1}); otherwise the locally specified occurrences should be used as normal. When serialising out, if the occurrences is the same as that of the target, it can be left out.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target_path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Reference to an object node using archetype path notation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>use_target_occurrences</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = (occurrences = Void)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if target occurrences are to be used as the value of occurrences in this object; by the time of runtime use, the target occurrences value has to be set into this object.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_7"><a class="anchor" href="#_validity_rules_7"></a>4.5.10.1. Validity Rules</h5>
<div class="paragraph">
<p>The following validity rules applies to internal references:</p>
</div>
<div class="paragraph rule">
<p><strong>VUNT</strong> use_node reference model type validity: the reference model type mentioned in an <code>C_COMPLEX_OBJECT_PROXY</code> node must be the same as or a super-type (according to the reference model) of the reference model type of the node referred to.</p>
</div>
<div class="paragraph rule">
<p><strong>VUNP</strong> use_node path validity: the path mentioned in a use_node statement must refer to an object node defined elsewhere in the same archetype or any of its specialisation parent archetypes, that is not itself an internal reference node, and which carries a node identifier if one is needed at the reference point.</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to the redefinition of an internal reference in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VSUNT</strong> use_node specialisation parent validity: a <code>C_COMPLEX_OBJECT_PROXY</code> node may be redefined in a specialised archetype by another <code>C_COMPLEX_OBJECT_PROXY</code> (e.g. in order to redefine occurrences), or by a <code>C_COMPLEX_OBJECT</code> structure that legally redefines the target <code>C_COMPLEX_OBJECT</code> node referred to by the reference.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_primitive_object_class"><a class="anchor" href="#_c_primitive_object_class"></a>4.5.11. C_PRIMITIVE_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_PRIMITIVE_OBJECT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Parent of types representing constraints on primitive types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_DEFINED_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Value to be assumed if none sent in data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_enumerated_type_constraint</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if this object represents a constraint on an enumerated type from the reference model, where the latter is assumed to be based on a primitive type, generally Integer or String.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constraint represented by this object; redefine in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_assumed_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if there is an assumed value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constrained_typename</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Generate name of native type that is constrained by this C_XXX type. For most types, it is the C_XXX typename without the 'C_', i.e. XXX. E.g. C_INTEGER &#8594; Integer. For the date/time types the mapping is different.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_8"><a class="anchor" href="#_validity_rules_8"></a>4.5.11.1. Validity Rules</h5>
<div class="paragraph">
<p>Validity rules applying to all <code>C_PRIMITIVE_OBJECT</code> types are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VOBAV</strong> object node assumed value validity: the value of an assumed value must fall within the value space defined by the constraint to which it is attached.</p>
</div>
</div>
<div class="sect4">
<h5 id="_conformance_semantics_3"><a class="anchor" href="#_conformance_semantics_3"></a>4.5.11.2. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a node of a <code>C_PRIMITIVE_OBJECT</code> descendant type in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;. Returns True only when the following is True:</span>
        <span class="tok-c1">--   * occurrences conforms</span>
        <span class="tok-c1">--   * `rm_type_name&#39; is identical to that in `other&#39;</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">occurrences_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span> <span class="tok-n">rm_type_name</span><span class="tok-p">.</span><span class="tok-n">is_case_insensitive_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition to `other&#39;</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">rm_typename</span><span class="tok-p">.</span><span class="tok-n">is_case_insensitive_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_typename</span><span class="tok-p">)</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_boolean_class"><a class="anchor" href="#_c_boolean_class"></a>4.5.12. C_BOOLEAN Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_BOOLEAN</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constraint on instances of Boolean. Both attributes cannot be set to False, since this would mean that the Boolean value being constrained cannot be True or False.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Boolean&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Boolean constraint - a list of Boolean values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_conformance_semantics_4"><a class="anchor" href="#_conformance_semantics_4"></a>4.5.12.1. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_BOOLEAN</code> node in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;. Returns True only when the following is True:</span>
        <span class="tok-c1">--   * C_PRIMITIVE_OBJECT conditions are met and</span>
        <span class="tok-c1">--   * every `constraint&#39; value is in `other.constraint&#39;</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">,</span> <span class="tok-n">rm_type_conformance_checker</span><span class="tok-p">)</span> <span class="tok-ow">and</span>  <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-o">&lt;</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-ow">and</span>
            <span class="tok-kr">across</span> <span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">val_csr</span> <span class="tok-kr">all</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">has</span> <span class="tok-p">(</span><span class="tok-n">val_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span> <span class="tok-kr">end</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition to `other&#39;</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>   <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-ow">and</span>
            <span class="tok-kr">across</span> <span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">val_csr</span> <span class="tok-kr">all</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">has</span> <span class="tok-p">(</span><span class="tok-n">val_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span> <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_string_class"><a class="anchor" href="#_c_string_class"></a>4.5.13. C_STRING Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_STRING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constraint on instances of STRING.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>String constraint - a list of literal strings and / or regular expression strings delimited by the ‘/’ character.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (a_value: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph tbd">
<p>TBD: there is an argument for only allowing a single String value rather than a list, where the value is aways a regex since <code>{"platypus", "kangaroo", "wombat"}</code> can be expressed as <code>{/platypus|kangaroo|wombat/}</code>. See also ADL spec.</p>
</div>
<div class="sect4">
<h5 id="_conformance_semantics_5"><a class="anchor" href="#_conformance_semantics_5"></a>4.5.13.1. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_STRING</code> node in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;. Returns True only when the following is True:</span>
        <span class="tok-c1">--   * C_PRIMITIVE_OBJECT conditions are met and</span>
        <span class="tok-c1">--   * every `constraint&#39; string or pattern is in `other.constraint&#39;</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">,</span> <span class="tok-n">rm_type_conformance_checker</span><span class="tok-p">)</span> <span class="tok-ow">and</span> <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-o">&lt;</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-ow">and</span>
            <span class="tok-kr">across</span> <span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">constraint_csr</span> <span class="tok-kr">all</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">has</span> <span class="tok-p">(</span><span class="tok-n">constraint_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span> <span class="tok-kr">end</span>
<span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition to `other&#39;</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span> <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-ow">and then</span>
            <span class="tok-kr">across</span> <span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">str_csr</span> <span class="tok-kr">all</span>
                <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">i_th</span> <span class="tok-p">(</span><span class="tok-n">str_csr</span><span class="tok-p">.</span><span class="tok-n">cursor_index</span><span class="tok-p">).</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">str_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span>
            <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_ordered_class"><a class="anchor" href="#_c_ordered_class"></a>4.5.14. C_ORDERED Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_ORDERED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent of primitive constrainer classes based on ORDERED base types, i.e. types like Integer, Real, and the Date/Time types. The model constraint is a List of Intervals, which may include point Intervals, and acts as a efficient and formally tractable representation of any number of point values and/or contiguous intervals of an ordered value domain.</p>
</div>
<div class="paragraph">
<p>In its simplest form, the constraint accessor returns just a single point Interval&lt;T&gt; object, representing a single value.</p>
</div>
<div class="paragraph">
<p>The next simplest form is a single proper Interval &lt;T&gt; (i.e. normal two-sided or half-open interval). The most complex form is a list of any combination of point and proper intervals.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constraint in the form of a List of Intervals of the parameter type T. Concrete types generated in descendants via template binding.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_conformance_semantics_6"><a class="anchor" href="#_conformance_semantics_6"></a>4.5.14.1. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a node of a <code>C_ORDERED</code> descendant type in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;. Returns True only when the following is True:</span>
        <span class="tok-c1">--   * C_PRIMITIVE_OBJECT conditions are met and</span>
        <span class="tok-c1">--   * every interval constraint (if amy exist) is inside at least one interval in other.constraint</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">,</span> <span class="tok-n">rm_types_conformant</span><span class="tok-p">)</span> <span class="tok-ow">and</span> <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-kr">across</span> <span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">ivl_csr</span> <span class="tok-kr">all</span>
                <span class="tok-kr">across</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">other_ivl_csr</span> <span class="tok-n">some</span> <span class="tok-n">other_ivl_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">ivl_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span> <span class="tok-kr">end</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition to `other&#39;</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>  <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-ow">and</span>
            <span class="tok-kr">across</span> <span class="tok-n">constraint</span> <span class="tok-kr">as</span> <span class="tok-n">ivl_csr</span> <span class="tok-kr">all</span>
                <span class="tok-n">ivl_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">i_th</span> <span class="tok-p">(</span><span class="tok-n">ivl_csr</span><span class="tok-p">.</span><span class="tok-n">cursor_index</span><span class="tok-p">))</span>
            <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_integer_class"><a class="anchor" href="#_c_integer_class"></a>4.5.15. C_INTEGER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_INTEGER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constraint on instances of Integer.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_ORDERED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;Integer&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Formal constraint on Integer, in the form of a List of Interval&lt;Integer&gt;.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_real_class"><a class="anchor" href="#_c_real_class"></a>4.5.16. C_REAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_REAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constraint on instances of Real.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_ORDERED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;Real&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Formal constraint on Real, in the form of a List of Interval&lt;Real&gt;.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_temporal_class"><a class="anchor" href="#_c_temporal_class"></a>4.5.17. C_TEMPORAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_TEMPORAL (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Purpose Abstract parent of C_ORDERED types whose base type is an ISO date/time type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_ORDERED</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pattern_constraint</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional alternative constraint in the form of a pattern based on ISO8601. See descendants for details.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_pattern_constraint</strong> (a_pattern: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if 'a_pattern' is a valid constraint. Define in concrete descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_pattern_constraint_replacement</strong> (a_pattern: <code>String</code>, an_other_pattern: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Return True if 'a_pattern' can be replaced by 'an_other_pattern' in a specialised constraint. Define in concrete subtypes.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_conformance_semantics_7"><a class="anchor" href="#_conformance_semantics_7"></a>4.5.17.1. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a node of a <code>C_TEMPORAL</code> descendant type in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;. Returns True only when the following is True:</span>
        <span class="tok-c1">--   * C_ORDERED conditions are met and</span>
        <span class="tok-c1">--   * every interval in `constraint&#39; (if amy exist) is inside an interval in `other.constraint&#39;</span>
        <span class="tok-c1">--   * if `pattern_constraint&#39; exists, it is the same or a valid replacement of that in `other&#39;.</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">,</span> <span class="tok-n">rm_types_conformant</span><span class="tok-p">)</span> <span class="tok-kr">then</span> <span class="tok-c1">-- precursor is from C_ORDERED</span>
            <span class="tok-kr">if</span> <span class="tok-ow">not</span> <span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span> <span class="tok-ow">and</span> <span class="tok-ow">not</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span> <span class="tok-kr">then</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">valid_pattern_constraint_replacement</span> <span class="tok-p">(</span><span class="tok-n">pattern_constraint</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">pattern_constraint</span><span class="tok-p">)</span>
            <span class="tok-kr">else</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition to `other&#39;</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-kr">then</span> <span class="tok-c1">-- precursor is from C_ORDERED</span>
            <span class="tok-kr">if</span> <span class="tok-ow">not</span> <span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span> <span class="tok-ow">and</span> <span class="tok-ow">not</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span> <span class="tok-kr">then</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">pattern_constraint</span><span class="tok-p">)</span>
            <span class="tok-kr">else</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">pattern_constraint</span><span class="tok-p">.</span><span class="tok-n">is_empty</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_date_class"><a class="anchor" href="#_c_date_class"></a>4.5.18. C_DATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_DATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>ISO 8601-compatible constraint on instances of Date in the form either of a set of validity values, or else date ranges based on the C_ORDERED list constraint. There is no validity flag for ‘year’, since it must always be by definition mandatory in order to have a sensible date at all. Syntax expressions of instances of this class include “YYYY-??-??” (date with optional month and day).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_TEMPORAL</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;Date&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Formal constraint on ISO8601_DATE, in the form of List of Interval&lt;ISO8601_DATE&gt;.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>month_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of month in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of day in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of timezone in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Pattern_validity</em></strong>: pattern /= Void implies valid_iso8601_date_constraint_pattern(pattern)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_time_class"><a class="anchor" href="#_c_time_class"></a>4.5.19. C_TIME Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>ISO 8601-compatible constraint on instances of Time in the form either of a set of validity values, or else date ranges based on the C_ORDERED list constraint. There is no validity flag for ‘hour’, since it must always be by definition mandatory in order to have a sensible time at all. Syntax expressions of instances of this class include “HH:??:xx” (time with optional minutes and seconds not allowed).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_TEMPORAL</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;Time&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Formal constraint on ISO8601_TIME, in the form of a List of Interval&lt;ISO8601_TIME&gt;.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minute_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of minute in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>second_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of second in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>millisecond_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of millisecond in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of timezone in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Pattern_validity</em></strong>: pattern /= Void implies valid_iso8601_time_constraint_pattern (pattern)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_date_time_class"><a class="anchor" href="#_c_date_time_class"></a>4.5.20. C_DATE_TIME Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_DATE_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>ISO 8601-compatible constraint on instances of Date_Time. There is no validity flag for ‘year’, since it must always be by definition mandatory in order to have a sensible date/time at all. Syntax expressions of instances of this class include “YYYY-MM-DDT??:??:??” (date/time with optional time) and “YYYY-MMDDTHH:MM:xx” (date/time, seconds not allowed).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_TEMPORAL</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;Date_time&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Formal constraint on ISO8601_DATE_TIME, in the form of List of Interval&lt;ISO8601_DATE_TIME&gt;.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>month_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of month in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of day in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of timezone in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minute_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of minute in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>second_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of second in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>millisecond_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Validity of millisecond in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Pattern_validity</em></strong>: pattern /= Void implies valid_iso8601_date_time_constraint_pattern(pattern)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_duration_class"><a class="anchor" href="#_c_duration_class"></a>4.5.21. C_DURATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_DURATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_TEMPORAL</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;Duration&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>years_allowed:</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if years are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>months_allowed:</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if months are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>weeks_allowed:</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if weeks are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>days_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if days are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hours_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if hours are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minutes_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if minutes are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>seconds_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if seconds are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fractional_seconds_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if fractional seconds are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_terminology_code_class"><a class="anchor" href="#_c_terminology_code_class"></a>4.5.22. C_TERMINOLOGY_CODE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_TERMINOLOGY_CODE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Constrainer type for instances of TERMINOLOGY_CODE. The constraint attribute can contain:
* a single at-code
* a single ac-code, representing a value-set that is defined in the archetype terminology</p>
</div>
<div class="paragraph">
<p>If there is an assumed value for the ac-code case above, the assumed_value attribute contains a single at-code, which must come from the list of at-codes defined as the internal value set for the ac-code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Type of individual constraint - a single string that can either be a local at-code, or a local ac-code signifying a locally defined value set. If an ac-code, assumed_value may contain an at-code from the value set of the ac-code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_expanded</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Effective set of at-code values corresponding to an ac-code for a locally defined value set. Not defined for ac-codes that have no local value set.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_substituted</strong>: <code>List&lt;Uri&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For locally defined value sets within individual code bindings: return the term URI(s) substituted from bindings for local at-codes in value_set_expanded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_resolved</strong>: <code>List&lt;TERMINOLOGY_CODE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For locally defined value sets within individual code bindings: final set of external codes to which value set is resolved.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (a_value: <code>TERMINOLOGY_CODE</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A generated prototype value from this constraint object.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_conformance_semantics_8"><a class="anchor" href="#_conformance_semantics_8"></a>4.5.22.1. Conformance semantics</h5>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_TERMINOLOGY_CODE</code> node in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">;</span> <span class="tok-kr">agent</span> <span class="tok-n">rm_types_conformant</span> <span class="tok-p">(</span><span class="tok-n">a_type</span><span class="tok-p">,</span> <span class="tok-n">other_type</span><span class="tok-p">:</span> <span class="tok-n">String</span><span class="tok-p">)):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints</span>
        <span class="tok-c1">-- as `other&#39;. Returns True only when the following is True:</span>
        <span class="tok-c1">--   * C_PRIMITIVE_OBJECT conditions are met and</span>
        <span class="tok-c1">--   * the value set represented by `constraint&#39; is subsumed under that of `other.constraint&#39;</span>
        <span class="tok-c1">-- `rm_types_conformant&#39; is an agent (lambda) that can test an RM type&#39;s conformance to another RM type</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
        <span class="tok-n">rm_types_conformant</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">,</span> <span class="tok-n">rm_type_conformance_checker</span><span class="tok-p">)</span> <span class="tok-kr">then</span>  <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-kr">if</span> <span class="tok-n">is_valid_value_set_code</span> <span class="tok-p">(</span><span class="tok-n">constraint</span><span class="tok-p">)</span> <span class="tok-ow">and</span> <span class="tok-n">is_valid_value_set_code</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">)</span> <span class="tok-kr">then</span>
                <span class="tok-n">this_vset</span> <span class="tok-o">:=</span> <span class="tok-n">value_set_expanded</span>
                <span class="tok-n">other_vset</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">value_set_expanded</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">codes_conformant</span> <span class="tok-p">(</span><span class="tok-n">constraint</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">)</span> <span class="tok-ow">and then</span>
                    <span class="tok-kr">across</span> <span class="tok-n">this_vset</span> <span class="tok-kr">as</span> <span class="tok-n">vset_csr</span> <span class="tok-kr">all</span> <span class="tok-n">other_vset</span><span class="tok-p">.</span><span class="tok-n">has</span> <span class="tok-p">(</span><span class="tok-n">vset_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span> <span class="tok-kr">end</span>
            <span class="tok-kr">else</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">codes_conformant</span> <span class="tok-p">(</span><span class="tok-n">constraint</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">)</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
        <span class="tok-c1">-- True if this node on its own (ignoring any subparts) expresses no constraints in addition</span>
        <span class="tok-c1">-- to `other&#39;</span>
    <span class="tok-kr">require</span>
        <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
    <span class="tok-kr">do</span>
        <span class="tok-kr">if</span> <span class="tok-kc">precursor</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-kr">then</span>  <span class="tok-c1">-- precursor is from C_PRIMITIVE_OBJECT</span>
            <span class="tok-kr">if</span> <span class="tok-n">is_valid_value_set_code</span> <span class="tok-p">(</span><span class="tok-n">constraint</span><span class="tok-p">)</span> <span class="tok-ow">and</span> <span class="tok-n">is_valid_value_set_code</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">)</span> <span class="tok-kr">then</span>
                <span class="tok-n">this_vset</span> <span class="tok-o">:=</span> <span class="tok-n">value_set_expanded</span>
                <span class="tok-n">other_vset</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">value_set_expanded</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">)</span> <span class="tok-ow">and then</span>
                    <span class="tok-n">this_vset</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">other_vset</span><span class="tok-p">.</span><span class="tok-n">count</span> <span class="tok-ow">and then</span>
                        <span class="tok-kr">across</span> <span class="tok-n">this_vset</span> <span class="tok-kr">as</span> <span class="tok-n">vset_csr</span> <span class="tok-kr">all</span> <span class="tok-n">other_vset</span><span class="tok-p">.</span><span class="tok-n">has</span> <span class="tok-p">(</span><span class="tok-n">vset_csr</span><span class="tok-p">.</span><span class="tok-n">item</span><span class="tok-p">)</span> <span class="tok-kr">end</span>
            <span class="tok-kr">else</span>
                <span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">constraint</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">constraint</span><span class="tok-p">)</span>
            <span class="tok-kr">end</span>
        <span class="tok-kr">end</span>
    <span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_second_order_class"><a class="anchor" href="#_c_second_order_class"></a>4.5.23. C_SECOND_ORDER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_SECOND_ORDER (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Abstract parent of classes defining second order constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;ARCHETYPE_CONSTRAINT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Members of this second order constrainer. Normally redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (other: <code>C_SECOND_ORDER</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other. Typically used during validation of specialised archetype nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (other: <code>C_SECOND_ORDER</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other. Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_primitive_tuple_class"><a class="anchor" href="#_c_primitive_tuple_class"></a>4.5.24. C_PRIMITIVE_TUPLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_PRIMITIVE_TUPLE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Class representing a single object tuple instance in a tuple constraint. Each such instance is a vector of object constraints, where each member (each C_PRIMITIVE_OBJECT) corresponds to one of the C_ATTRIBUTEs referred to by the owning C_ATTRIBUTE_TUPLE.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_SECOND_ORDER</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;C_PRIMITIVE_OBJECT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Object constraint members of this tuple group.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_attribute_tuple_class"><a class="anchor" href="#_c_attribute_tuple_class"></a>4.5.25. C_ATTRIBUTE_TUPLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_ATTRIBUTE_TUPLE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Object representing a constraint on an atttribute tuple, i.e. a group of attributes that are constrained together. Typically used for representing co-varying constraints like {units, range} constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_SECOND_ORDER</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>tuples</strong>: <code>List&lt;C_PRIMITIVE_TUPLE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Tuple definitions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;C_ATTRIBUTE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of C_ATTRIBUTEs forming the definition of the tuple.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_rules_package"><a class="anchor" href="#_the_rules_package"></a>5. The Rules Package</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the semantics described in this part of the model should not yet be considered stable, as it depends on the openEHR Expression Language, which is still be stabilised.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The AOM <code>rules</code> package builds upon a subset of the <code>BASE::org::openehr::expressions</code> package described in the <a href="http://www.openehr.org/releases/BASE/latest/expression.html">openEHR Expression Language specification</a>, and adds a small number of classes to express leaf reference types specific to archetypes. This enables expressions to be declared within archetypes that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use archetype paths as value references, and;</p>
</li>
<li>
<p>include <code>C_PRIMITIVE_OBJECT</code> constraints as Boolean-valued sub-expressions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A special case of the latter is the <code>C_STRING</code> leaf constraint type, which is used to represent archetype slot constraints in instances of the <code>ARCHETYPE_SLOT</code> class (<code><em>includes</em></code> and <code><em>excludes</em></code> attributes).</p>
</div>
<div class="paragraph">
<p>The general use of expressions in an archetype is in the <code>rules</code> section, where both variable declarataions and assertions are used to express object constraints ranging across multiple nodes, i.e. constraints that can&#8217;t be expressed 'inline' within the main <code>definition</code> section structure. In both of these places, their role is to constrain something <em>inside</em> the current archetype.</p>
</div>
<div class="paragraph">
<p>Constraints on external resources such as terminologies are expressed in the constraint binding part in the archetype <code>terminology</code>, described in the <a href="#_terminology_package">Terminology Package</a> section. The AOM <code>rules</code> package is illustrated below.</p>
</div>
<div id="rules_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-rules.svg" alt="AOM rules">
</div>
<div class="title">Figure 19. Rules Package</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_2"><a class="anchor" href="#_semantics_2"></a>5.2. Semantics</h3>
<div class="paragraph">
<p>Archetype assertions are expressions which may contain the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>constants</em>:</p>
<div class="ulist">
<ul>
<li>
<p><em>primitive values</em>: including the date/time types;</p>
</li>
<li>
<p><em>constraints</em> operands, i.e. <code>C_PRIMITIVE_OBJECT</code> instances, used as arguments to the <code>matches</code> operator;</p>
</li>
<li>
<p><em>archetype id constraints</em>, i.e. <code>C_STRING</code> instances representing possible archetype identifiers, used in slot constraints.</p>
</li>
</ul>
</div>
</li>
<li>
<p>any of the openEHR rules operators, i.e.:</p>
<div class="ulist">
<ul>
<li>
<p><em>arithmetic operators</em>: <code>+</code>, <code>*</code>, <code>-</code>, <code>/</code>, <code>^</code> (exponent), <code>%</code> (modulo division)</p>
</li>
<li>
<p><em>relational operators</em>: <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>=</code>, <code>!=</code>;</p>
</li>
<li>
<p><em>boolean operators</em>: <code>not</code>, <code>and</code>, <code>or</code>, <code>xor</code>;</p>
</li>
<li>
<p><em>quantifiers</em> applied to container variables: <code>for_all</code>, <code>exists</code>;</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>functions</em> e.g. basic arithmetic, trigonometric and other functions;</p>
</li>
<li>
<p>the following additional semantics:</p>
<div class="ulist">
<ul>
<li>
<p><em>references</em> to archetyped values in data, specified by archetype paths.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Variables, assignments, and external queries as described in the main openEHR Rules language are not allowed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>5.3. Class Descriptions</h3>
<div class="paragraph">
<p>The following classes augment the core model described in the <a href="http://www.openehr.org/releases/BASE/latest/expression.html">openEHR Expression Language specification</a>.</p>
</div>
<div class="sect3">
<h4 id="_expr_constraint_class"><a class="anchor" href="#_expr_constraint_class"></a>5.3.1. EXPR_CONSTRAINT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EXPR_CONSTRAINT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Expression tree leaf item representing a constraint on a primitive type, expressed in the form of a concrete subtype of C_PRIMITIVE_OBJECT.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_LITERAL</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>C_PRIMITIVE_OBJECT</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The constraint.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_archetype_id_constraint_class"><a class="anchor" href="#_expr_archetype_id_constraint_class"></a>5.3.2. EXPR_ARCHETYPE_ID_CONSTRAINT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EXPR_ARCHETYPE_ID_CONSTRAINT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Expression tree leaf item representing a constraint on an archetype identifier.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_CONSTRAINT</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>C_STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A C_STRING representing a regular expression for matching Archetype identifiers.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_archetype_ref_class"><a class="anchor" href="#_expr_archetype_ref_class"></a>5.3.3. EXPR_ARCHETYPE_REF Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>EXPR_ARCHETYPE_REF</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Expression tree leaf item representing a reference to a value found in data at a location specified by a path in the archetype definition.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A path referring to a value in the archetype (paths with a leading ‘/’ are in the definition section.</p>
</li>
<li>
<p>Paths with no leading ‘/’ are in the outer part of the archetype, e.g. “archetype_id/value” refers to the String value of the archetype_id attribute of the enclosing archetype.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_VALUE_REF</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The path to the archetype node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>ARCHETYPE_CONSTRAINT</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terminology_package"><a class="anchor" href="#_terminology_package"></a>6. Terminology Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>6.1. Overview</h3>
<div class="paragraph">
<p>All local terminology as well as terminological and terminology binding elements of an archetype are represented in the terminology section of an archetype, whose semantics are defined by the <code>archetype.terminology</code> package, shown below.</p>
</div>
<div id="terminology_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-terminology.svg" alt="AOM terminology">
</div>
<div class="title">Figure 20. Terminology Package</div>
</div>
<div class="paragraph">
<p>An archetype terminology consists of the following elements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>term_definitions</em></code>: a mandatory structure consisting of lists of term definitions defined local to the archetype, one list for each language of translation, as well as the original language of definition. The entries in this table include:</p>
<div class="ulist">
<ul>
<li>
<p>Some or all id-codes. One of these is a code of the form 'id1', 'id1.1', 'id1.1.1' etc, denoting the concept of the archetype as a whole. This particular code is recorded in the <code><em>concept_code</em></code> attribute and is used as the id-code on the root node in the archetype definition. Not all id-codes are required to be in the term_definitions structure - for nodes that are children of single-valued attribute, a term definition is optional (and not typically defined).</p>
</li>
<li>
<p>at-codes used to define value terms and inline value sets/ All at-codes will appear within a <code>C_TERMINOLOGY_CODE</code> constraint object within the archetype. All at-codes must have a definition in the term_definitions.</p>
</li>
<li>
<p>ac-codes used to define external value set references. All ac-codes must have a definition in the term_definitions.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code><em>term_bindings</em></code>: an optional structure consisting of list of terms and bindings, one list for each external terminology (i.e. the terminology or ontology being 'bound to'). Each 'binding' is a URI to a target. For a binding of an id-code or an at-code, the target will be a single term, and for an ac-code, it will designate a ref-set or value set.</p>
</li>
<li>
<p><code><em>value_sets</em></code>: optional structure defining value-set relationships for locally defined value sets. Each value set is identified by an ac-code and has as members one or more at-codes.</p>
</li>
<li>
<p><code><em>terminology_extracts</em></code>: an optional structure containing extracts from external terminologies such as <a href="http://www.ihtsdo.org">SNOMED CT</a>, <a href="http://www.who.int/classifications/icd/en/">ICDx</a>, or any local terminology. These extracts include the codes and preferred term rubrics, enabling the terms to be used for both display purposes. This structure is normally only used for templates, enabling small value sets for which no external reference set or subset is defined to be captured locally in the template.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on whether the archetype is in differential or flat form, an instance of the <code>ARCHETYPE_TERMINOLOGY</code> class contains terms, constraints, bindings and terminology extracts that were respectively either introduced in the owning archetype, or all codes and bindings obtained by compressing an archetype lineage through inheritance. A typical instance structure of <code>ARCHETYPE_TERMINOLOGY</code> is illustrated in Figure <a href="#terminology_instance">Terminology Instance Structure</a>.</p>
</div>
<div id="terminology_instance" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/terminology_instance_structure.png" alt="terminology instance structure">
</div>
<div class="title">Figure 21. Terminology Instance Structure</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_3"><a class="anchor" href="#_semantics_3"></a>6.2. Semantics</h3>
<div class="sect3">
<h4 id="_specialisation_depth"><a class="anchor" href="#_specialisation_depth"></a>6.2.1. Specialisation Depth</h4>
<div class="paragraph">
<p>Any given archetype occurs at some point in a lineage of archetypes related by specialisation, where the depth is reflected by the <code><em>specialisation_depth</em></code> function. An archetype which is not a specialisation of another has a specialisation_depth of 0. Term and constraint codes introduced in the terminology of specialised archetypes (i.e. which did not exist in the terminology of the parent archetype) are defined in a strict way, using '.' (period) markers. For example, an archetype of specialisation depth 2 will use term definition codes like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id0.0.1</code> - a new term introduced in this archetype, which is not a specialisation of any previous term in any of the parent archetypes;</p>
</li>
<li>
<p><code>id4.0.1</code> - a term which specialises the 'id4' term from the top parent. An intervening '.0' is required to show that the new term is at depth 2, not depth 1;</p>
</li>
<li>
<p><code>id25.1.1</code> - a term which specialises the term 'id25.1' from the immediate parent, which itself specialises the term 'id1' from the top parent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This systematic definition of codes enables software to use the structure of the codes to more quickly and accurately make inferences about term definitions up and down specialisation hierarchies. Constraint codes on the other hand do not follow these rules, and exist in a flat code space instead.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>6.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_archetype_terminology_class"><a class="anchor" href="#_archetype_terminology_class"></a>6.3.1. ARCHETYPE_TERMINOLOGY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>ARCHETYPE_TERMINOLOGY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Local terminology of an archetype. This class defines the semantics of the terminology of an archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_differential</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_language</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Original language of the terminology, as set at archetype creation or parsing time; must be a code in the ISO 639-1 2 character language code-set.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept_code</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Term code defining the meaning of the archetype as a whole, and always used as the at-code on the root node of the archetype. Must be defined in the term_definitions property.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_definitions</strong>: <code>Hash&lt;String, Hash&lt;String, ARCHETYPE_TERM&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Directory of term definitions as a two-level table. The outer hash keys are language codes, e.g. “en”, “de”, while the inner hash keys are term codes, e.g. “id17”, “at4”.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_bindings</strong>: <code>Hash &lt;String, Hash&lt;String, Uri&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Directory of bindings to external terminology codes and value sets, as a two-level table. The outer hash keys are terminology ids, e.g. “SNOMED_CT”, and the inner hash keys are constraint codes, e.g. “at4”, “ac13” or paths. The indexed DV_URI objects represent references to externally defined resources, either terms, ontology concepts, or terminology subsets / ref-sets.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent_archetype</strong>: <code>ARCHETYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Archetype which owns this terminology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_sets</strong>: <code>Hash&lt;String, VALUE_SET&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Archetype-local value sets, each keyed by value-set id, i.e. an ac-code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_extracts</strong>: <code>Hash&lt;String, Hash&lt;String, ARCHETYPE_TERM&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Directory of extracts of external terminologies, as a two-level table. The outer hash keys are terminology ids, e.g. “SNOMED_CT”, while the inner hash keys are term codes or code-phrases from the relevant terminology, e.g. “10094842”.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specialisation depth of this archetype. Unspecialised archetypes have depth 0, with each additional level of specialisation adding 1 to the specialisation_depth.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id_codes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of all id codes in the terminology., i.e. the “id” codes in an ADL archetype, which are the node_ids on C_OBJECT descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_codes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of all value term codes in the terminology, i.e. the “at” codes in an ADL archetype, which are used as possible values on terminological constrainer nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_codes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of all value set codes in the terminology defining value sets. These correspond to the “ac” codes in an ADL archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_language</strong> (a_lang: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if language `a_lang' is present in archetype terminology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_terminology</strong> (a_terminology_id: <code>String</code>): <code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if terminology `a_terminology' is present in archetype ontology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_term_code</strong> (a_code: <code>String</code>): <code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>True if code 'a_code' defined in this terminology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_definition</strong> (a_lang: <code>String</code>, a_code: <code>String</code>): <code>ARCHETYPE_TERM</code><br>
<strong><em>Pre</em></strong>: has_term-definition (a_lang, a_code)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Term definition for a code, in a specified language.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_binding</strong> (a_terminology: <code>String</code>, a_code: <code>String</code>): <code>Uri</code><br>
<strong><em>Pre</em></strong>: has_term_binding (a_terminology_id, a_code)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Binding of constraint corresponding to a_code in target external terminology a_terminology_id, as a string, which is usually a formal query expression.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminologies_available</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of terminologies to which term or constraint bindings exist in this terminology, computed from bindings.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_extract_term</strong> (a_terminology_id: <code>String</code>, a_code: <code>String</code>): <code>ARCHETYPE_TERM</code><br>
<strong><em>Pre</em></strong>: has_terminology_extract (a_terminology_id) and has_terminology_extract_code (a_code)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Return an ARCHETYPE_TERM from specified terminology extract, for specified term code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_terminology_extract</strong> (a_terminology_id: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>languages_available</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of languages in which terms in this terminology are available.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariant</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Original_language_validity</em></strong>: code_set (Code_set_id_languages).has_concept_id (original_language)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>concept_code_validity</em></strong>: id_codes.has (concept_code)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Term_bindings_validity</em></strong>: bindings /= void implies not bindings.is_empty</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p><strong><em>Parent_archetype_valid</em></strong>: parent_archetype.terminology = Current</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_terminology_relation_class"><a class="anchor" href="#_terminology_relation_class"></a>6.3.2. TERMINOLOGY_RELATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>TERMINOLOGY_RELATION (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Class whose instances represent any kind of 1:N relationship between a source term and 1-N target terms.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Code of source term of this relation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of target terms in this relation.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_value_set_class"><a class="anchor" href="#_value_set_class"></a>6.3.3. VALUE_SET Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>VALUE_SET</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Representation of a flat value set within the archetype terminology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">TERMINOLOGY_RELATION</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_archetype_term_class"><a class="anchor" href="#_archetype_term_class"></a>6.3.4. ARCHETYPE_TERM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>ARCHETYPE_TERM</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Representation of any coded entity (term or constraint) in the archetype ontology.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>code</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Code of this term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>text</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Short term text, typically for display.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Full description text.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_items</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Hash of keys and corresponding values for other items in a term, e.g. provenance.
Hash of keys ("text", "description" etc) and corresponding values.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_9"><a class="anchor" href="#_validity_rules_9"></a>6.3.4.1. Validity Rules</h5>
<div class="paragraph">
<p>The following validity rules apply to instances of this class in an archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VTVSID</strong>: value-set id defined. The identifying code of a value set must be defined in the term definitions of the terminology of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VTVSMD</strong>: value-set members defined. The member codes of a value set must be defined in the term definitions of the terminology of the flattened form of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VTVSUQ</strong>: value-set members unique. The member codes of a value set must be unique within the value set.</p>
</div>
<div class="paragraph rule">
<p><strong>VTSD</strong> specialisation level of codes. Term or constraint code defined in archetype terminology must be of the same specialisation level as the archetype (differential archetypes), or the same or a less specialised level (flat archetypes).</p>
</div>
<div class="paragraph rule">
<p><strong>VTLC</strong>: language consistency. Languages consistent: all term codes and constraint codes exist in all languages.</p>
</div>
<div class="paragraph rule">
<p><strong>VTTBK</strong>: terminology term binding key valid. Every term binding must be to either a defined archetype term ('at-code') or to a path that is valid in the flat archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VTCBK</strong>: terminology constraint binding key valid. Every constraint binding must be to a defined archetype constraint code ('ac-code').</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation_and_transformation_semantics"><a class="anchor" href="#_validation_and_transformation_semantics"></a>7. Validation and Transformation Semantics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides a guide for validation, flattening and diffing, based on the ADL workbench reference compiler. The sequence of processing a given archetype A in the Workbench is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>evaluate specialisation lineage of A</p>
<div class="ulist">
<ul>
<li>
<p>process each parent in order from the top</p>
</li>
</ul>
</div>
</li>
<li>
<p>evaluate supplier archetypes of A (those related by <code>use_archetype</code> statements)</p>
<div class="ulist">
<ul>
<li>
<p>process suppliers, recursively</p>
</li>
</ul>
</div>
</li>
<li>
<p>parse A</p>
</li>
<li>
<p>AOM phase 1 validation - standalone validation</p>
</li>
<li>
<p>if passed, and A is specialised:</p>
<div class="ulist">
<ul>
<li>
<p>AOM phase 2 validation - validate against flat parent</p>
</li>
<li>
<p>flatten A against flat parent</p>
</li>
<li>
<p>AOM phase 3 validation - validation performed on flat form of A.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_validation"><a class="anchor" href="#_validation"></a>7.1. Validation</h3>
<div class="paragraph">
<p>Validation is best implemented in a multi-pass fashion, with more basic kinds of errors being check first. The ADL Workbench implements three validation phases as described below.</p>
</div>
<div class="sect3">
<h4 id="_phase_1_basic_integrity"><a class="anchor" href="#_phase_1_basic_integrity"></a>7.1.1. Phase 1 - Basic Integrity</h4>
<div class="paragraph">
<p>The following validation can be performed on an archetype mostly without reference to its parent, if it is specialised.</p>
</div>
<div class="sect4">
<h5 id="_basic_checks"><a class="anchor" href="#_basic_checks"></a>7.1.1.1. Basic checks</h5>
<div class="ulist">
<ul>
<li>
<p>check match of root RM type with RM type mentioned in identifier (VARDT);</p>
</li>
<li>
<p>valid root id code for specialistion level (VARCN);</p>
</li>
<li>
<p>any missing mandatory parts, e.g. <code>terminology</code> section (STCNT);</p>
</li>
<li>
<p>check that specialisation depth is one greater than specialisation depth of parent (VACSD);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_authored_archetype_meta_data_checks"><a class="anchor" href="#_authored_archetype_meta_data_checks"></a>7.1.1.2. AUTHORED_ARCHETYPE meta-data checks</h5>
<div class="ulist">
<ul>
<li>
<p>check original language in main part of archetype is available in <code>terminology</code> section (VOLT);</p>
</li>
<li>
<p>check <code>adl_version</code> and <code>rm_release</code> version id formats (VARAV, VARRV);</p>
</li>
<li>
<p>check that languages defined in translations section are in the archetype terminology (VOTM);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_definition_structure_validation"><a class="anchor" href="#_definition_structure_validation"></a>7.1.1.3. Definition Structure Validation</h5>
<div class="ulist">
<ul>
<li>
<p>check that differential paths only found in specialised archetypes (VDIFV);</p>
</li>
<li>
<p>check that differential paths in specialised archetypes exist in flat parent (VDIFP);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_basic_terminology_validation"><a class="anchor" href="#_basic_terminology_validation"></a>7.1.1.4. Basic Terminology Validation</h5>
<div class="ulist">
<ul>
<li>
<p>validate terminology code formats and speialisation depths (VATCV, VTSD);</p>
</li>
<li>
<p>validate terminology languages - check all at-codes and ac-codes found in all languages (VTLC);</p>
</li>
<li>
<p>validate terminology bindings - check that all terms and paths mentioned in bindings exist in terminology and definition (VTBK, VETDF);</p>
</li>
<li>
<p>validate terminology value_sets - check that every code in terminology value set definitions is in the terminology, with no duplications (VTVSID, VTVSMD, VTVSUQ);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_various_structure_validation"><a class="anchor" href="#_various_structure_validation"></a>7.1.1.5. Various Structure Validation</h5>
<div class="ulist">
<ul>
<li>
<p>check slot definition validity (VDSEV);</p>
</li>
<li>
<p>check <code>C_ARCHETYPE_ROOT</code> validity (VARXRA, VARXTV);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_code_validation"><a class="anchor" href="#_code_validation"></a>7.1.1.6. Code Validation</h5>
<div class="ulist">
<ul>
<li>
<p>check that all codes mentioned in <code>definition</code> are defined in terminology (VTSD, VATID);</p>
</li>
<li>
<p>validate <code>C_TERMINOLOGY_CODE</code> objects (VATCD, VATDF, VACDF, VATDA);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_validate_annotations"><a class="anchor" href="#_validate_annotations"></a>7.1.1.7. Validate Annotations</h5>
<div class="ulist">
<ul>
<li>
<p>for each language, ensure that annotations paths are valida (VRANP);</p>
</li>
<li>
<p>ensure that annotations are proper translations of each other.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_2_validation_of_specialised_archetype_against_flat_parent"><a class="anchor" href="#_phase_2_validation_of_specialised_archetype_against_flat_parent"></a>7.1.2. Phase 2 - Validation of Specialised Archetype Against Flat Parent</h4>
<div class="sect4">
<h5 id="_validate_against_reference_model"><a class="anchor" href="#_validate_against_reference_model"></a>7.1.2.1. Validate Against Reference Model</h5>
<div class="paragraph">
<p>The following checks require a computational representation of the reference model to be available.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>check that type and attribute names exist in RM (VCORM, VCARM);</p>
</li>
<li>
<p>check that enumeration type constraints use valid literal values (VCORMENV, VCORMENU, VCORMEN);</p>
</li>
<li>
<p>validate any allowed type substitutions (VCORMT);</p>
</li>
<li>
<p>check that <code>existence</code> in <code>C_ATTRIBUTE</code> is valid with respect to RM (VCAEX);</p>
</li>
<li>
<p>check that <code>cardinality</code> in <code>C_ATTRIBUTE</code> is valid with respect to RM (VCACA);</p>
</li>
<li>
<p>check mismatch of -arity of <code>C_ATTRIBUTE</code> in archetype and RM (VCAM).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_validate_specialised_definition"><a class="anchor" href="#_validate_specialised_definition"></a>7.1.2.2. Validate Specialised Definition</h5>
<div class="paragraph">
<p>The following checks are made on a specialised <code>definition</code> with respect to its flat parent.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>check that node differential path can and does exist in parent (VSONPT, VSONIN);</p>
</li>
<li>
<p>check that <code>SIBLING_ORDER</code> is valid in flat parent (VSSM);</p>
</li>
<li>
<p>on <code>C_ATTRIBUTE</code> nodes</p>
<div class="ulist">
<ul>
<li>
<p>check conformance of <code>existence</code> to flat parent (VSANCE);</p>
</li>
<li>
<p>check conformance of <code>cardinality</code> to flat parent (VSANCC);</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>C_ARCHETYPE_ROOT</code>:</p>
<div class="ulist">
<ul>
<li>
<p>check that <code>archetype_ref</code> archetype ID matches parent slot constraint (VARXS);</p>
</li>
<li>
<p>check that <code>archetype_ref</code> archetype ID exists in current library of archetypes (VARXR);</p>
</li>
<li>
<p>filler id specialisation depth is wrong (VARXID);</p>
</li>
</ul>
</div>
</li>
<li>
<p>ensure <code>ARCHETYPE_SLOT</code> in child redefines only <code>ARCHETYPE_SLOT</code> in parent (VDSSID);</p>
</li>
<li>
<p>for node <code>C_COMPLEX_OBJECT_PROXY</code> in parent, check that proxy path exists (VSUNT);</p>
</li>
<li>
<p>otherwise, AOM types of child and parent node must be identical (VSONT).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For passing nodes, check:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>evaluate <code>c_conforms_to()</code> function:</p>
<div class="ulist">
<ul>
<li>
<p>RM type non-conformance (VSONCT);</p>
</li>
<li>
<p>occurrences non-conformance (VSONCO);</p>
</li>
<li>
<p>node id non-conformance value mismatch (VSONI);</p>
</li>
<li>
<p>invalid leaf object value redefinition (VPOV, VUNK);</p>
</li>
<li>
<p>tuple validation against parent node (VTPNC, VTPIN).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_validate_rules"><a class="anchor" href="#_validate_rules"></a>7.1.2.3. Validate Rules</h5>
<div class="ulist">
<ul>
<li>
<p>ensure RM types and paths mentioned in rules are valid against flat parent archetype and RM (VRRLPRM, VRRLPAR).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_3_validation_of_flat_form"><a class="anchor" href="#_phase_3_validation_of_flat_form"></a>7.1.3. Phase 3 - Validation of Flat Form</h4>
<div class="paragraph">
<p>These validations are carried out after successful generation of the flat form of the current archetype.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ensure <code>C_COMPLEX_OBJECT_PROXY</code> paths actually exist in current flat form (VUNP);</p>
</li>
<li>
<p>ensure object node <code>occurrences</code> valid with respect to enclosing <code>cardinality</code> (VACMCO).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flattening"><a class="anchor" href="#_flattening"></a>7.2. Flattening</h3>
<div class="paragraph">
<p>Flattening is conceptually a simple operation - the overlaying of a differential child archetype onto a flat parent . Concretely, it is a somewhat sophisticated operation, since it has to take into account a number of specifics allowed by ADL and the AOM, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>differential paths, including ones that contain overridden id-codes;</p>
</li>
<li>
<p>nodes in the child can override nodes of different AOM types in the parent in specific circumstances;</p>
</li>
<li>
<p>sibling ordering markers;</p>
</li>
<li>
<p>overlays with cloning: where more than one child specialisation node exists for a single parent complex structure, the parent structure will be cloned before each overlay;</p>
</li>
<li>
<p>deletions (<code>existence matches {0}</code>, <code>occurrences matches {0}</code>).</p>
</li>
<li>
<p>proxy reference targets are expanded inline if the child archetype overrides them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The algorithm used in the ADL Workbench provide a reasonable template for achieving proper flattening of AOM archetypes and templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_diffing"><a class="anchor" href="#_diffing"></a>7.3. Diffing</h3>
<div class="paragraph">
<p>Diffing is the reverse of flattening, and is primarily used to support editing operations. The basis of visual editing of an archetype is the flat form of the parent, with the user permitted to make modifications that are conformant with the flat parent. The Diffing operation is used to extract the resulting differential form archetype from the final state of visual editing.</p>
</div>
<div class="paragraph">
<p>The algorithm used in the ADL Workbench provides a reasonable template for achieving diffing of AOM archetypes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serialisation_model"><a class="anchor" href="#_serialisation_model"></a>8. Serialisation Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes an adjusted version of the AOM that is used for serialising archetypes to formats other than ADL. The classes in this model are nearly 1:1 with AOM classes, but with names prefixed with <code>P_</code>, for 'persistent'. Without using this model, an archetype can be serialised to an 'object dump' format such as ODIN, JSON, YAML, XML etc, but the output will be voluminous. The effect of this model is to reduce the size of the output, potentially by a factor of two or more. Human readability is also greatly improved, which is of increasing importance with the direct use of XML and JSON by programmers.</p>
</div>
<div class="paragraph">
<p>Size reduction and readability is achieved mainly by mapping repetitive structural items to shorter string forms that are more readable, but still machine-processible.</p>
</div>
<div class="paragraph">
<p>The &#8216;P_&#8217; model is shown below in two parts.</p>
</div>
<div class="paragraph">
<p>The translations from the AOM effected by the <code>P_</code> classes are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all multiplicities, including existence, cardinality, and occurrences are converted to the standard UML string form such as '0..1', '0..*' etc, rather than the 8 or so lines of output that would occur in direct machine serialisation;</p>
</li>
<li>
<p>codes are converted from structured form (<code>TERMINOLOGY_CODE</code> class) to string form;</p>
</li>
<li>
<p>UID identifiers are converted from structured form to string form.</p>
</li>
</ul>
</div>
<div id="P_AOM_upper" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/P_AOM-upper.png" alt="P AOM upper">
</div>
<div class="title">Figure 22. Serialisation AOM (upper)</div>
</div>
<div id="P_AOM_lower" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/P_AOM-lower.png" alt="P AOM lower">
</div>
<div class="title">Figure 23. Serialisation AOM (lower)</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_templates"><a class="anchor" href="#_templates"></a>9. Templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Within the Archetype formalism, a template is used to aggregate and refine archetypes, to produce a structure corresponding to a particular data set. Templates thus provide a way to use archetypes for specific purposes, while the archetypes contain <em>possible</em> data items, not linked to specific purposes. See the <a href="http://www.openehr.org/releases/AM/latest/ADL2.html#_templates">ADL2 specification, Templates section</a> for a detailed description of template semantics.</p>
</div>
<div class="paragraph">
<p>Templates are formally defined as specialised archetypes, via the <code>TEMPLATE</code> and <code>TEMPLATE_OVERLAY</code> classes shown in <a href="#archetype_package">Archetype Package</a>. This means that all the formal characteristics of a template are defined by the openEHR Archetype Object Model (AOM) and Archetype Definition Language (ADL) specifications apply to templates. This includes the meta-data (inherited from the <code>AUTHORED_RESOURCE</code> class), specialisation semantics (templates can be specialised into other templates), <code>terminology</code> section (allowing multi-lingual local term definitions and external terminology bindings) as well as the <code>rules</code> and <code>annotations</code> sections.</p>
</div>
<div class="paragraph">
<p>Since a template is a specialised archetype, it cannot change the semantics of archetypes it specialises, since it obeys the same rules as any other specialised archetype. Accordingly, all data created due to the use of templates are guaranteed to conform to the referenced archetypes, as well as the underlying reference model.</p>
</div>
<div class="paragraph">
<p>However, the mode of use of the AOM and ADL in a template is slightly different from the typical archetype. Firstly, the following features are commonly used in templates but not generally in archetypes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>slot-filling - achieved by specialisation, as described in the <a href="http://www.openehr.org/releases/AM/latest/ADL2.html#_slot_filling_and_redefinition">ADL specification</a>;</p>
</li>
<li>
<p>specifying <code>{0..0}</code> constraints to remove elements not needed from the referenced archetypes;</p>
</li>
<li>
<p>specifying <code>{1..1}</code> constraints to mandate elements from the referenced archetypes;</p>
</li>
<li>
<p>setting default values;</p>
</li>
<li>
<p>addition of terminology bindings to specific terminology ref-sets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Secondly, specialisation in templates is usually only of existing nodes defined in the flat parent, i.e. no new nodes are added. If new data nodes are required in the template context, appropriate specialised archetypes should be created to define them, prior to use in the final template.</p>
</div>
<div class="paragraph">
<p>These variations are not formally required by the ADL/AOM formalism, but are intended to be realised instead by tooling that recognises archetypes and templates via the leading ADL keyword (ADL files) or serialisation type marker (other serialisation types). This approach simpifies life for tool builders, since a single standardised compiler will always compile any archetype or template.</p>
</div>
<div class="paragraph">
<p>Because a template generally refers to a number of archetypes due to slot-filling - i.e. the root archetype plus component archetypes mentioned as slot-fillers - and also usually defines further constraints on the root and component archetypes, the referenced entities end up being of three types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a published archetype, used as is;</p>
</li>
<li>
<p>a published template, used as is;</p>
</li>
<li>
<p>a private template-local template overlay.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first two of these are explicitly identified and published artefacts, and can usually be obtained as files in any of the available serialisation syntaxes. The template overlay is somewhat like the 'private' or anonymous class definition available in some programming languages, and is obtainable either as a separate file associated with the root template, or within the template source file.</p>
</div>
<div class="sect2">
<h3 id="_an_example"><a class="anchor" href="#_an_example"></a>9.1. An Example</h3>
<div class="paragraph">
<p>In order to better explain the template artefact structure, an example is described below. Assume the logical structure required is as shown below. This shows three archetypes of specific RM types, that should be chained together by slot-filling at specific paths, to form a final template. The template also adds further constraints via overlays.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.openehr::openEHR-EHR-COMPOSITION.encounter_report.v1 / content[id5]</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.openehr::openEHR-EHR-SECTION.vital_signs_headings.v1 / items [id2]</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.openehr::openEHR-EHR-EVALUATION.problem_description.v1</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The actual template structure needed to achieve this is shown below. The archetype <code>org.openehr::openEHR-EHR-COMPOSITION.encounter_report.v1</code> is shown at the top right. This is templated (i.e. specialised) by the template <code>uk.nhs.clinical::openEHR-EHR-COMPOSITION.t_encounter_report.v1</code> at the top left. The template performs the job of filling the <code>id5</code> slot in the root archetype by specialising the slot. The specialised version adds a filler object (designated with the <code>C_ARCHETYPE_ROOT</code> instance) and also overrides the original <code>ARCHETYPE_SLOT</code> instance to close the slot to any further filling, either by further templating or at runtime.</p>
</div>
<div id="AOM-template_example_1" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM-template_example_1.png" alt="AOM template example 1">
</div>
<div class="title">Figure 24. Template source structure example</div>
</div>
<div class="paragraph">
<p>The filler object specifies in its <code><em>archetype_ref</em></code> attribute the artefact being used to fill the slot (shown on the diagram as an ellipsis, for brevity). Here it is not simply the archetype <code>org.openehr::openEHR-EHR-SECTION.vital_signs_headings.v1</code>, but a specialised form of this archetype, defined as a local template overlay, whose identifier is <code>uk.nhs.clinical::openEHR-EHR-SECTION.t_encounter_report-vital_signs_headings-0001.v1</code>.</p>
</div>
<div class="paragraph">
<p>The same kind of redefinition occurs within this <code>SECTION</code> template overlay. The <code>id7</code> slot node from the original archetype (<code>org.openehr::openEHR-EHR-SECTION.vital_signs_headings.v1</code>) is redefined by the <code>C_ARCHETYPE_ROOT</code> node in the template overlay. The overlay would normally add other constraints of its own - typically removing unwanted items and mandating other items from the specialisation parent archetypes - not shown here.</p>
</div>
<div class="paragraph">
<p>The source template is thus constructed of two artefacts, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the 'template', i.e. the template root;</p>
</li>
<li>
<p>an internal 'template overlay' component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These are connected together in the flattening operation as part of Operational Template generation; at that point, the <code>C_COMPLEX_OBJECT</code> root node of the template overlay (lower left) is overlaid on the <code>id5.1</code> <code>C_ARCHETYPE_ROOT</code> node of the template, forming a single large archetype structure.</p>
</div>
<div class="paragraph">
<p>It is not always the case that the components of a template must be internal. Within the template environment, lower level reference model classes may be templated in their own right, and such templates simply reused in the new template being constructed. In this case, the outer template may contain both its own internal template components, and other templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_identifiers"><a class="anchor" href="#_template_identifiers"></a>9.2. Template Identifiers</h3>
<div class="paragraph">
<p>Templates are identified using normal ADL multi-axial identifiers and GUIDs, just as for archetypes. However, to make them easier for tools and humans to see, some simple conventions are suggested for the concept part of the identifier, as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>template</code>: use a concept identifier based on the archetype prepended with <code>t_</code>;</p>
</li>
<li>
<p><code>template_overlay</code>: use a concept identifier consisting of the concatenation of:</p>
<div class="ulist">
<ul>
<li>
<p>the root template identifier (incuding the <code>t_</code>);</p>
</li>
<li>
<p>the concept identifier of the specialisation parent archetype of the overlay;</p>
</li>
<li>
<p>a final <code>_N</code>, where 'N' is an integer.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following are examples.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="adl"><span class="tok-nd">uk.nhs.clinical::openEHR-EHR-COMPOSITION.t_encounter_report.v1.0.0</span><span class="tok-err">  -- root template</span>

<span class="tok-nd">uk.nhs.clinical::openEHR-EHR-EVALUATION.t_encounter_report-problem_description-1.v1.0.0</span><span class="tok-err">   -- overlay</span>
<span class="tok-nd">uk.nhs.clinical::openEHR-EHR-EVALUATION.t_encounter_report-medications-2.v1.0.0</span><span class="tok-err">           -- overlay</span>
<span class="tok-nd">uk.nhs.clinical::openEHR-EHR-EVALUATION.t_encounter_report-care_plan-3.v1.0.0</span><span class="tok-err">             -- overlay</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach defines a short concept identifier which obeys the formal rule that concept identifiers   must be unique within a namespace and RM type, is human-readable, and most importantly, is tool-generatable.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference_model_adaptation"><a class="anchor" href="#_reference_model_adaptation"></a>10. Reference Model Adaptation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So far ADL has been presented as an abstract formal language that defines legal information structures based on a reference model (RM). In real world applications, we need to consider where reference models come from, and the question of harmonising or otherwise integrating archetypes based on different but related RMs.</p>
</div>
<div class="paragraph">
<p>One of the common problems in most domains is that competing reference models exist, typically defined by standards bodies such as ISO, CEN, ASTM, and/or other open standards bodies such as W3C and OASIS. For a given topic, e.g. 'cancer study trials' or 'Electronic Health Record' there can often be multiple information models that could be used as a basis for archetyping. Due to political pressures, national requiremenents or preferences and  variety of other non-technical factors, it is quite likely that archetypes will be authored within a domain based on multiple competing reference models that are reasonably similar without being easily machine inter-convertible.</p>
</div>
<div class="paragraph">
<p>Since archetypes are generally authored by domain experts, the entities they represent tend to come from a homogeneous model space, with reference models being a technical detail that may not even be visible to the archetype author. Nevertheless, due to the above-mentioned factors, authors in different localities or jurisdictions may have no choice but to model the same entity, for example 'complete blood count' based on two or more different reference models.</p>
</div>
<div class="paragraph">
<p>This creates a potential problem of competing libraries of archetypes trying to model the same information entities in slightly different but incompatible ways. This tends to needlessly split groups of domain modellers into disparate communities, when in fact they are modelling the same things.</p>
</div>
<div class="paragraph">
<p>In order to alleviate some of the problems caused by this situation, some of the measures described below, which are outside the AOM proper, can be applied to enable archetypes and RMs treated to be treated more uniformly.</p>
</div>
<div class="sect2">
<h3 id="_aom_profile_configuration"><a class="anchor" href="#_aom_profile_configuration"></a>10.1. AOM Profile Configuration</h3>
<div class="paragraph">
<p>These adaptations can be formalised in a configuration object that is an instance of the class <code>AOM_PROFILE</code>, illustrated below. This is only one way such information can be represented, and alternatives could be used.</p>
</div>
<div id="aom_profile" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/AOM_PROFILE.svg" alt="AOM PROFILE">
</div>
<div class="title">Figure 25. aom_profile Package</div>
</div>
<div class="sect3">
<h4 id="_class_definitions_3"><a class="anchor" href="#_class_definitions_3"></a>10.1.1. Class Definitions</h4>

</div>
<div class="sect3">
<h4 id="_aom_profile_class"><a class="anchor" href="#_aom_profile_class"></a>10.1.2. AOM_PROFILE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>AOM_PROFILE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Profile of common settings relating to use of reference model(s) and terminology for a given archetype developing organisation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>aom_rm_type_substitutions</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Allowed type substitutions: Actual RM type names keyed by AOM built-in types which can subsitute for them in an archetype. E.g. &lt;value = "String", key = "ISO8601_DATE"&gt; means that if RM property TYPE.some_property is of type String, an ISO8601_DATE is allowed at that position in the archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>aom_lifecycle_mappings</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of mappings of lifecycle state names used in archetypes to AOM lifecycle state names. value = AOM lifecycle state; key = source lifecycle state.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>profile_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of this profile, usually based on the publisher it pertains to e.g. "openEHR", "cdisc", etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>aom_rm_type_mappings</strong>: <code>Hash&lt;String,AOM_TYPE_MAPPING&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Mappings from AOM built-in types to actual types in RM: whenever the type name is encountered in an archetype, it is mapped to a specific RM type.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_aom_type_mapping_class"><a class="anchor" href="#_aom_type_mapping_class"></a>10.1.3. AOM_TYPE_MAPPING Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>AOM_TYPE_MAPPING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Data object expressing a mapping between two types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>source_class_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of the AOM type being mapped to an RM type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target_class_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of the RM type in the mapping.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>property_mappings</strong>: <code>Hash&lt;String,AOM_PROPERTY_MAPPING&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of mappings of properties of this type to another type.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_aom_property_mapping_class"><a class="anchor" href="#_aom_property_mapping_class"></a>10.1.4. AOM_PROPERTY_MAPPING Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>AOM_PROPERTY_MAPPING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div><div class="paragraph">
<p>Data object expressing a mapping between two class properties.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>source_property_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of property in source class.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target_property_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Name of property in target class.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_configuration_file"><a class="anchor" href="#_configuration_file"></a>10.1.5. Configuration File</h4>
<div class="paragraph">
<p>Instances of the above classes can be expressed in an ODIN format file, as a convenient way of defining configuration for tools. Examples of such files used for the <a href="http://www.openehr.org/downloads/ADLworkbench/home">openEHR ADL Workbench</a> tool can be found in the <a href="https://github.com/openEHR/adl-tools/tree/master/apps/resources/aom_profiles">Github project for the tool</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_rm_entities_to_aom_entities"><a class="anchor" href="#_mapping_rm_entities_to_aom_entities"></a>10.2. Mapping RM Entities to AOM Entities</h3>
<div class="paragraph">
<p>One adjustment that can be made is to indicate equivalences between RM entities and AOM built-in types. This can be illustrated by a common situation in health, where multiple RMs have concretely different models of the 'coded term' notion. Semantically, these are all the same, and the correspond to the AOM built-in type <code>TERMINOLOGY_CODE</code>. However, there is nothing that can be stated in an ADL archetype that can indicate this relationship, with the result that ADL tools can&#8217;t infer that a certain type, e.g. openEHR&#8217;s <code>CODE_PHRASE</code> or ISO 13606&#8217;s <code>CODED_TEXT</code> are equivalents of the <code>TERMINOLOGY_CODE</code> type in the AOM.</p>
</div>
<div class="paragraph">
<p>The mapping is achieved by using the <code><em>aom_rm_type_mappings</em></code> property of the <code>AOM_PROFILE</code> type, which enables equivalences between complex classes and properties to be described.</p>
</div>
<div class="paragraph">
<p>The following example shows parts of two AOM profile files, illustrating two different mappings of RM types for 'coded text' to the AOM <code>TERMINOLOGY_CODE</code> class. The following extract is from the openEHR AOM profile file for the ADL Workbench.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">--</span>
<span class="tok-c">-- mappings from AOM built-in types used for openEHR RM types</span>
<span class="tok-c">--</span>
<span class="tok-nc">aom_rm_type_mappings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;TERMINOLOGY_CODE&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
		<span class="tok-nc">source_class_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;TERMINOLOGY_CODE&quot;</span><span class="tok-p">&gt;</span>
		<span class="tok-nc">target_class_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;CODE_PHRASE&quot;</span><span class="tok-p">&gt;</span>
		<span class="tok-nc">property_mappings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
			<span class="tok-p">[</span><span class="tok-s">&quot;terminology_id&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
				<span class="tok-nc">source_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;terminology_id&quot;</span><span class="tok-p">&gt;</span>
				<span class="tok-nc">target_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;terminology_id&quot;</span><span class="tok-p">&gt;</span>
			<span class="tok-p">&gt;</span>
			<span class="tok-p">[</span><span class="tok-s">&quot;code_string&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
				<span class="tok-nc">source_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;code_string&quot;</span><span class="tok-p">&gt;</span>
				<span class="tok-nc">target_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;code_string&quot;</span><span class="tok-p">&gt;</span>
			<span class="tok-p">&gt;</span>
		<span class="tok-p">&gt;</span>
	<span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following extract is from the <a href="http://www.hl7.org/Special/Committees/cimi/index.cfm">CIMI</a> AOM profile file for the ADL Workbench. This defines a mapping from the CIMI RM class <code>CODED_TEXT</code> to the AOM class <code>TERMINOLOGY_CODE</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">--</span>
<span class="tok-c">-- mappings from AOM built-in types used for CIMI RM types</span>
<span class="tok-c">--</span>

<span class="tok-nc">aom_rm_type_mappings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;TERMINOLOGY_CODE&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
		<span class="tok-nc">source_class_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;TERMINOLOGY_CODE&quot;</span><span class="tok-p">&gt;</span>
		<span class="tok-nc">target_class_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;CODED_TEXT&quot;</span><span class="tok-p">&gt;</span>
		<span class="tok-nc">property_mappings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
			<span class="tok-p">[</span><span class="tok-s">&quot;terminology_id&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
				<span class="tok-nc">source_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;terminology_id&quot;</span><span class="tok-p">&gt;</span>
				<span class="tok-nc">target_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;terminology_id&quot;</span><span class="tok-p">&gt;</span>
			<span class="tok-p">&gt;</span>
			<span class="tok-p">[</span><span class="tok-s">&quot;code_string&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
				<span class="tok-nc">source_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;code_string&quot;</span><span class="tok-p">&gt;</span>
				<span class="tok-nc">target_property_name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;code&quot;</span><span class="tok-p">&gt;</span>
			<span class="tok-p">&gt;</span>
		<span class="tok-p">&gt;</span>
	<span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of creating these mappings is that they inform tooling that constraints on the types <code>CODE_PHRASE</code> in openEHR archetypes, and <code>CODED_TEXT</code> in CIMI archetypes are to be understood as equivalent to contraints on the primitive AOM type <code>TERMINOLOGY_CODE</code>. This can be detected by the tool, and computed with, for example, with specific visualisation. Without this configuration, the archetype constraints are still correct, but the ADL tooling doesn&#8217;t treat them as different from any other RM complex type.</p>
</div>
<div class="paragraph">
<p>Using class and property mappings can enable more sophisticated archetype comparison and potentially even harmonisation, as well as more intelligent data comparison.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rm_primitive_type_equivalence"><a class="anchor" href="#_rm_primitive_type_equivalence"></a>10.3. RM Primitive Type Equivalence</h3>
<div class="paragraph">
<p>In some cases, primitive types as parsed in an archetype do not quite match those in the reference model. Typical examples of benign mismatches that can be silently corrected by defining mappings in the AOM profile are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>numeric values that parse as native AOM REAL or INTEGER, but are defined as Double in the RM;</p>
</li>
<li>
<p>ISO 8601 date/time values that are defined as String fields in the RM (due to the fact that ISO 8601 values are represented as strings).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These differences can be corrected by using the <code><em>aom_type_substitutions</em></code> configuration table defined in the <code>AOM_PROFILE</code> class. The following is an example of using this facility to enable primitive type matching for openEHR archetypes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">--</span>
<span class="tok-c">-- allowed substitutions from AOM built-in primitive types to openEHR RM types</span>
<span class="tok-c">--</span>

<span class="tok-nc">aom_rm_type_substitutions</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;ISO8601_DATE&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;String&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;ISO8601_DATE_TIME&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;String&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;ISO8601_TIME&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;String&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;ISO8601_DURATION&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;String&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;REAL&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Double&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;INTEGER&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Double&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The effect of these mappings is that literal values in an archetype that parse as the left hand side type (<code>ISO8601_DATE</code> etc) etc will be silently mapped to the right hand RM type (<code>String</code> etc). The following CADL fragment provide an example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-nc">ELEMENT</span><span class="tok-p">[</span><span class="tok-nd">id5</span><span class="tok-p">]</span> <span class="tok-kt">occurrences </span><span class="tok-o">matches </span><span class="tok-p">{</span><span class="tok-m">0..1</span><span class="tok-p">}</span> <span class="tok-o">matches </span><span class="tok-p">{</span>	<span class="tok-c">-- Systolic</span>
        <span class="tok-nc">value</span> <span class="tok-o">matches </span><span class="tok-p">{</span>
            <span class="tok-nc">DV_QUANTITY</span><span class="tok-p">[</span><span class="tok-nd">id1054</span><span class="tok-p">]</span> <span class="tok-o">matches </span><span class="tok-p">{</span>
                <span class="tok-nc">property</span> <span class="tok-o">matches </span><span class="tok-p">{[</span><span class="tok-nd">at1055</span><span class="tok-p">]}</span>
                <span class="tok-nc">magnitude</span> <span class="tok-o">matches </span><span class="tok-p">{|</span><span class="tok-mf">0.0</span><span class="tok-p">..&lt;</span><span class="tok-mf">1000.0</span><span class="tok-p">|}</span>  <span class="tok-c">-- **** parses as AOM REAL, but is Double in RM</span>
                <span class="tok-nc">precision</span> <span class="tok-o">matches </span><span class="tok-p">{</span><span class="tok-m">0</span><span class="tok-p">}</span>
                <span class="tok-nc">units</span> <span class="tok-o">matches </span><span class="tok-p">{</span><span class="tok-s">&quot;mm[Hg]&quot;</span><span class="tok-p">}</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows a native ISO Duration field that is mapped to a String value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-nc">INTERVAL_EVENT</span><span class="tok-p">[</span><span class="tok-nd">id1043</span><span class="tok-p">]</span> <span class="tok-kt">occurrences </span><span class="tok-o">matches </span><span class="tok-p">{</span><span class="tok-m">0..1</span><span class="tok-p">}</span> <span class="tok-o">matches </span><span class="tok-p">{</span>	<span class="tok-c">-- 24 hour average</span>
        <span class="tok-nc">width</span> <span class="tok-o">matches </span><span class="tok-p">{</span>
            <span class="tok-nc">DV_DURATION</span><span class="tok-p">[</span><span class="tok-nd">id1064</span><span class="tok-p">]</span> <span class="tok-o">matches </span><span class="tok-p">{</span>
                <span class="tok-nc">value</span> <span class="tok-o">matches </span><span class="tok-p">{</span><span class="tok-ld">PT24H</span><span class="tok-p">}</span>  <span class="tok-c">-- **** parses as AOM ISO8601_DURATION, but is String in RM</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aom_lifecycle_state_mappings"><a class="anchor" href="#_aom_lifecycle_state_mappings"></a>10.4. AOM Lifecycle State Mappings</h3>
<div class="paragraph">
<p>Another kind of useful mapping adjustment that can help to make tools process archetypes in a more homogeneous way is to do with the AOM life-cycle states, which are standardised in the <a href="http://www.openehr.org/releases/AM/latest/Identification.html">openEHR Archetype Identification specification</a>. These states denote the state of a whole archetype in its authoring life cycle. Historically however there were no standard names, with the consequence that various archetype tools implement their own local lifecycle state names. To adjust for this the <code><em>aom_lifecycle_mappings</em></code> property in the <code>AOM_PROFILE</code> class can be used. These mappings have the effect of replacing the current value of the <code><em>lifecycle_state</em></code> property of the <code>RESOURCE_DESCRIPTION</code> instance of a parsed archetype with an openEHR standard state name. A typical example of the <code>description</code> section of an archetype with a local lifecycle state name is below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-nc">description</span>
    <span class="tok-nc">original_author</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;name&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;Dr J Joyce&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;organisation&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;NT Health Service&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;date&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-ld">2003-08-03</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">lifecycle_state</span> <span class="tok-o">=</span>  <span class="tok-p">&lt;</span><span class="tok-s">&quot;AuthorDraft&quot;</span><span class="tok-p">&gt;</span> <span class="tok-c">-- **** should be &#39;unmanaged&#39;</span>
    <span class="tok-nc">resource_package_uri</span> <span class="tok-o">=</span>  <span class="tok-p">&lt;</span><span class="tok-s">&quot;.....&quot;</span><span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows typical mappings of customs lifecycle state names to the openEHR standard state names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin"><span class="tok-c">-- allowed substitutions from source RM lifecycle states to AOM lifecycle states</span>
<span class="tok-c">-- States on the value side (right hand side) must be the AOM states:</span>
<span class="tok-c">--</span>
<span class="tok-c">--	&quot;unmanaged&quot;</span>
<span class="tok-c">--	&quot;in_development&quot;</span>
<span class="tok-c">--		&quot;draft&quot;</span>
<span class="tok-c">--		&quot;in_review&quot;</span>
<span class="tok-c">--		&quot;suspended&quot;</span>
<span class="tok-c">--	&quot;release_candidate&quot;</span>
<span class="tok-c">--	&quot;published&quot;</span>
<span class="tok-c">--	&quot;deprecated&quot;</span>
<span class="tok-c">--		&quot;obsolete&quot;</span>
<span class="tok-c">--		&quot;superseded&quot;</span>

<span class="tok-c">--</span>

<span class="tok-nc">aom_lifecycle_mappings</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;AuthorDraft&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;unmanaged&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;Draft&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in_development&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;TeamReview&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in_development&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;Team Review&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in_development&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;ReviewSuspended&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in_development&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;Review Suspended&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;in_development&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;Reassess&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;published&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;Published&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;published&quot;</span><span class="tok-p">&gt;</span>
	<span class="tok-p">[</span><span class="tok-s">&quot;Rejected&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;rejected&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Normally this kind of change should be written into the archetype, so that it is upgraded to the standard form. Tools should offer this possibility, including in batch/bulk mode.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_publications"><a class="anchor" href="#_publications"></a>Publications</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Anderson_1996"></a>[Anderson_1996] Ross Anderson. <strong>Security in Clinical Information Systems</strong>. Available at <a href="http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html" class="bare">http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html</a>.</p>
</li>
<li>
<p><a id="Baretto_2005"></a>[Baretto_2005] Barretto S A. <strong>Designing Guideline-based Workflow-Integrated Electronic Health Records.</strong> 2005. PhD dissertation, University of South Australia. Available at <a href="http://www.cis.unisa.edu.au/~cissab/Barretto_PhD_Thesis_Revised_FINAL.pdf" class="bare">http://www.cis.unisa.edu.au/~cissab/Barretto_PhD_Thesis_Revised_FINAL.pdf</a>.</p>
</li>
<li>
<p><a id="Beale_2000"></a>[Beale_2000] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> 2000.  Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_2002"></a>[Beale_2002] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> Eleventh OOPSLA Workshop on Behavioral Semantics: Serving the Customer (Seattle, Washington, USA, November 4, 2002). Edited by Kenneth Baclawski and Haim Kilov. Northeastern University, Boston, 2002, pp. 16-32. Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_Heard_2007"></a>[Beale_Heard_2007] Beale T, Heard S. <strong>An Ontology-based Model of Clinical Information.</strong> 2007. pp760-764 Proceedings MedInfo 2007, K. Kuhn et al. (Eds), IOS Publishing 2007. See <a href="http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf</a>.</p>
</li>
<li>
<p><a id="Booch_1994"></a>[Booch_1994] Booch G. <strong>Object-Oriented Analysis and Design with applications. 2nd ed.</strong> Benjamin/Cummings 1994.</p>
</li>
<li>
<p><a id="Browne_2005"></a>[Browne_2005] Browne E D. <strong>Workflow Modelling of Coordinated Inter-Health-Provider Care Plans.</strong> 2005. PhD dissertation, University of South Australia. Available at <a href="http://www.openehr.org/publications/workflow/t_browne_thesis_abstract.htm" class="bare">http://www.openehr.org/publications/workflow/t_browne_thesis_abstract.htm</a>.</p>
</li>
<li>
<p><a id="Cimino_1997"></a>[Cimino_1997] Cimino J J. <strong>Desiderata for Controlled Medical vocabularies in the Twenty-First Century.</strong> IMIA WG6 Conference, Jacksonville, Florida, Jan 19-22, 1997.</p>
</li>
<li>
<p><a id="Eiffel"></a>[Eiffel] Meyer B. <strong>Eiffel the Language (2nd Ed).</strong> Prentice Hall, 1992.</p>
</li>
<li>
<p><a id="Elstein_1987"></a>[Elstein_1987] Elstein AS, Shulman LS, Sprafka SA. <strong>Medical problem solving: an analysis of clinical reasoning.</strong> Cambridge, MA: Harvard University Press 1987.</p>
</li>
<li>
<p><a id="Elstein_Schwarz_2002"></a>[Elstein_Schwarz_2002] Elstein AS, Schwarz A. <strong>Evidence base of clinical diagnosis: Clinical problem solving and diagnostic decision making: selective review of the cognitive literature.</strong> BMJ 2002;324;729-732.</p>
</li>
<li>
<p><a id="Fowler_1997"></a>[Fowler_1997] Fowler M. <strong>Analysis Patterns: Reusable Object Models.</strong> Addison Wesley 1997</p>
</li>
<li>
<p><a id="Fowler_Scott_2000"></a>[Fowler_Scott_2000] Fowler M, Scott K. <strong>UML Distilled (2nd Ed.).</strong> Addison Wesley Longman 2000.</p>
</li>
<li>
<p><a id="Gray_reuter_1993"></a>[Gray_reuter_1993] Gray J, Reuter A. <strong>Transaction Processing Concepts and Techniques.</strong> Morgan Kaufmann 1993.</p>
</li>
<li>
<p><a id="Hein_2002"></a>[Hein_2002] Hein J L. Discrete Structures, Logic and Computability (2nd Ed). Jones and Bartlett 2002.</p>
</li>
<li>
<p><a id="Hnìtynka_2004"></a>[Hnìtynka_2004] Hnìtynka P, Plášil F. <strong>Distributed Versioning Model for MOF.</strong> Proceedings of WISICT 2004, Cancun, Mexico, A volume in the ACM international conference proceedings series, published by Computer Science Press, Trinity College Dublin Ireland, 2004.</p>
</li>
<li>
<p><a id="Ingram_1995"></a>[Ingram_1995] Ingram D. <strong>The Good European Health Record Project.</strong> Laires, Laderia Christensen, Eds. Health in the New Communications Age. Amsterdam: IOS Press; 1995; pp. 66-74.</p>
</li>
<li>
<p><a id="Kifer_Lausen_Wu_1995"></a>[Kifer_Lausen_Wu_1995] Kifer M, Lausen G, Wu J. <strong>Logical Foundations of Object-Oriented and FrameBased Languages.</strong> JACM May 1995. See See <a href="ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf" class="bare">ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf</a>.</p>
</li>
<li>
<p><a id="Kilov_1994"></a>[Kilov_1994] Kilov H, Ross J. <strong>Information Modelling - an object-oriented approach.</strong> Prentice Hall 1994.</p>
</li>
<li>
<p><a id="Maier_2000"></a>[Maier_2000] Maier M. <strong>Architecting Principles for Systems-of-Systems.</strong> Technical Report, University of Alabama in Huntsville. 2000. Available at <a href="http://www.infoed.com/Open/PAPERS/systems.htm" class="bare">http://www.infoed.com/Open/PAPERS/systems.htm</a></p>
</li>
<li>
<p><a id="Martin"></a>[Martin] Martin P. <strong>Translations between UML, OWL, KIF and the WebKB-2 languages (For-Taxonomy, Frame-CG, Formalized English)</strong>. May/June 2003. Available at <a href="http://www.webkb.org/doc/model/comparisons.html" class="bare">http://www.webkb.org/doc/model/comparisons.html</a> as at Aug 2004.</p>
</li>
<li>
<p><a id="Meyer_OOSC2"></a>[Meyer_OOSC2] Meyer B. <strong>Object-oriented Software Construction, 2nd Ed.</strong> Prentice Hall 1997</p>
</li>
<li>
<p><a id="Müller_2003"></a>[Müller_2003] Müller R. <strong>Event-oriented Dnamic Adaptation of Workflows: Model, Architecture, and Implementation.</strong> 2003. PhD dissertation, University of Leipzig. Available at <a href="http://www.openehr.org/publications/workflow/t_mueller_thesis_abstract.htm" class="bare">http://www.openehr.org/publications/workflow/t_mueller_thesis_abstract.htm</a>.</p>
</li>
<li>
<p><a id="Object_Z"></a>[Object_Z] Smith G. <strong>The Object Z Specification Language</strong>. Kluwer Academic Publishers 2000. See <a href="http://www.itee.uq.edu.au/~smith/objectz.html" class="bare">http://www.itee.uq.edu.au/~smith/objectz.html</a> .</p>
</li>
<li>
<p><a id="GLIF"></a>[GLIF] Lucila Ohno-Machado, John H. Gennari, Shawn N. Murphy, Nilesh L. Jain, Samson W. Tu, Diane E. Oliver, Edward Pattison-Gordon, Robert A. Greenes, Edward H. Shortliffe, and G. Octo Barnett.  <strong>The GuideLine Interchange Format - A Model for Representing Guidelines</strong>. J Am Med Inform Assoc. 1998 Jul-Aug; 5(4): 357–372.</p>
</li>
<li>
<p><a id="Rector_1994"></a>[Rector_1994] Rector A L, Nowlan W A, Kay S. <strong>Foundations for an Electronic Medical Record.</strong> The IMIA Yearbook of Medical Informatics 1992 (Eds. van Bemmel J, McRay A). Stuttgart Schattauer 1994.</p>
</li>
<li>
<p><a id="Rector_1999"></a>[Rector_1999] Rector A L. <strong>Clinical terminology: why is it so hard?</strong> Methods Inf Med. 1999 Dec;38(4-5):239-52. Available at <a href="http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf" class="bare">http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf</a> .</p>
</li>
<li>
<p><a id="Richards_1998"></a>[Richards_1998] Richards E G. <strong>Mapping Time - The Calendar and its History.</strong> Oxford University Press 1998.</p>
</li>
<li>
<p><a id="Sowa_2000"></a>[Sowa_2000] Sowa J F. <strong>Knowledge Representation: Logical, philosophical and Computational Foundations.</strong> 2000, Brooks/Cole, California.</p>
</li>
<li>
<p><a id="Sottile_1999"></a>[Sottile_1999] Sottile P.A., Ferrara F.M., Grimson W., Kalra D., and Scherrer J.R. <strong>The holistic healthcare information system. Toward an Electronic Health Record Europe.</strong> 1999. Nov 1999; 259-266.</p>
</li>
<li>
<p><a id="Van_de_Velde_Degoulet_2003"></a>[Van_de_Velde_Degoulet_2003] Van de Velde R, Degoulet P. <strong>Clinical Information Systems: A Component-Based Approach.</strong> 2003. Springer-Verlag New York.</p>
</li>
<li>
<p><a id="Weed_1969"></a>[Weed_1969] Weed LL. <strong>Medical records, medical education and patient care. 6 ed.</strong> Chicago: Year Book Medical Publishers Inc. 1969.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_resources_2"><a class="anchor" href="#_resources_2"></a>Resources</h3>
<div class="sect3">
<h4 id="_general"><a class="anchor" href="#_general"></a>General</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="cov_contra"></a>[cov_contra] Wikipedia. <strong>Covariance and contravariance.</strong> See <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science" class="bare">https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science</a>) .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_e_health_standards"><a class="anchor" href="#_e_health_standards"></a>e-Health Standards</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Corbamed_PIDS"></a>[Corbamed_PIDS] Object Management Group. <strong>Person Identification Service.</strong> March 1999. See <a href="http://www.omg.org/spec/PIDS/" class="bare">http://www.omg.org/spec/PIDS/</a> .</p>
</li>
<li>
<p><a id="Corbamed_LQS"></a>[Corbamed_LQS] Object Management Group. <strong>Lexicon Query Service.</strong> March 1999. <a href="http://www.omg.org/spec/LQS/" class="bare">http://www.omg.org/spec/LQS/</a> .</p>
</li>
<li>
<p><a id="hl7_cda"></a>[hl7_cda] HL7 International. <strong>HL7 version Clinical Document Architecture (CDA)</strong>. Available at <a href="http://www.hl7.org.uk/version3group/cda.asp" class="bare">http://www.hl7.org.uk/version3group/cda.asp</a>.</p>
</li>
<li>
<p><a id="HL7v3_ballot2"></a>[HL7v3_ballot2] HL7 International. <strong>HL7 version 3 2nd Ballot specification</strong>. Available at <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a>.</p>
</li>
<li>
<p><a id="HL7v3_data_types"></a>[HL7v3_data_types] Schadow G, Biron P. <strong>HL7 version 3 deliverable: Version 3 Data Types.</strong> (2nd ballot 2002 version).</p>
</li>
<li>
<p><a id="hl7_v3_rim"></a>[hl7_v3_rim] HL7 International. <strong>HL7 v3 RIM</strong>. See <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a> .</p>
</li>
<li>
<p><a id="hl7_arden"></a>[hl7_arden] HL7 International. <strong>HL7 Arden Syntax</strong>. See <a href="http://www.hl7.org/Special/committees/Arden/index.cfm" class="bare">http://www.hl7.org/Special/committees/Arden/index.cfm</a> .</p>
</li>
<li>
<p><a id="hl7_gello"></a>[hl7_gello] HL7 International. <strong>GELLO Decision Support Language</strong>. <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=5" class="bare">http://www.hl7.org/implement/standards/product_brief.cfm?product_id=5</a> .</p>
</li>
<li>
<p><a id="IHTSDO_URIs"></a>[IHTSDO_URIs] IHTSDO. SNOMED CT URI Standard. <a href="http://ihtsdo.org/fileadmin/user_upload/doc/download/doc_UriStandard_Current-en-US_INT_20140527.pdf?ok" class="bare">http://ihtsdo.org/fileadmin/user_upload/doc/download/doc_UriStandard_Current-en-US_INT_20140527.pdf?ok</a>.</p>
</li>
<li>
<p><a id="NLM_UML_list"></a>[NLM_UML_list] National Library of Medicine. UMLS Terminologies List. <a href="http://www.nlm.nih.gov/research/umls/metaa1.html" class="bare">http://www.nlm.nih.gov/research/umls/metaa1.html</a>.</p>
</li>
<li>
<p><a id="ISO_13606-1"></a>[ISO_13606-1] <strong>ISO 13606-1 - Electronic healthcare record communication - Part 1: Extended architecture.</strong> CEN TC251 Health Informatics Technical Committee. Available at <a href="http://www.iso.org/iso/catalogue_detail.htm?csnumber=40784" class="bare">http://www.iso.org/iso/catalogue_detail.htm?csnumber=40784</a> .</p>
</li>
<li>
<p><a id="ISO_13606-2"></a>[ISO_13606-2] <strong>ISO 13606-2 - Electronic healthcare record communication - Part 2: Domain term list.</strong> CEN TC251 Health Informatics Technical Committee. Available at <a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=50119" class="bare">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=50119</a> .</p>
</li>
<li>
<p><a id="ISO_13606-3"></a>[ISO_13606-3] <strong>ISO 13606-3 - Electronic healthcare record communication - Part 3: Distribution rules.</strong> CEN TC251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ISO_13606-4"></a>[ISO_13606-4] <strong>ISO 13606-4 - Electronic Healthcare Record Communication standard Part 4: Messages for the exchange of information.</strong> CEN TC251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ISO_18308"></a>[ISO_18308] Schloeffel P. (Editor). <strong>Requirements for an Electronic Health Record Reference Architecture.</strong> (ISO TC 215/SC N; ISO/WD 18308). International Standards Organisation, Australia, 2002.</p>
</li>
<li>
<p><a id="ISO_20514"></a>[ISO_20514] ISO. <strong>The Integrated Care EHR.</strong> See <a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39525" class="bare">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39525</a> .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_e_health_projects"><a class="anchor" href="#_e_health_projects"></a>e-Health Projects</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="EHCR_supA_14"></a>[EHCR_supA_14] Dixon R, Grubb P A, Lloyd D, and Kalra D. <strong>Consolidated List of Requirements. EHCR Support Action Deliverable 1.4.</strong> European Commission DGXIII, Brussels; May 2001 59pp Available from <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_35"></a>[EHCR_supA_35] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 3.5: "Final Recommendations to CEN for future work".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_24"></a>[EHCR_supA_24] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 2.4 "Guidelines on Interpretation and implementation of CEN EHCRA".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_31_32"></a>[EHCR_supA_31_32] Lloyd D, et al. <strong>EHCR Support Action Deliverable 3.1&amp;3.2 “Interim Report to CEN”.</strong> July 1998. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="GEHR_del_4"></a>[GEHR_del_4] <strong>Deliverable 4: GEHR Requirements for Clinical Comprehensiveness.</strong> GEHR Project 1992. Available at <a href="http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-4.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-4.pdf</a> .</p>
</li>
<li>
<p><a id="GEHR_del_7"></a>[GEHR_del_7] <strong>Deliverable 7: Clinical Functional Specifications.</strong> GEHR Project 1993.</p>
</li>
<li>
<p><a id="GEHR_del_8"></a>[GEHR_del_8] <strong>Deliverable 8: Ethical and legal Requirements of GEHR Architecture and Systems.</strong> GEHR Project 1994. Available at <a href="http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-8.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-8.pdf</a> .</p>
</li>
<li>
<p><a id="GEHR_del_19_20_24"></a>[GEHR_del_19_20_24] <strong>Deliverable 19,20,24: GEHR Architecture.</strong> GEHR Project 30/6/1995. Available at <a href="http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-19_20_24.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr/gehr_deliverable-19_20_24.pdf</a> .</p>
</li>
<li>
<p><a id="GeHR_AUS"></a>[GeHR_AUS] Heard S, Beale T. <strong>The Good Electronic Health Record (GeHR) (Australia).</strong> See <a href="http://www.openehr.org/resources/related_projects#gehraus" class="bare">http://www.openehr.org/resources/related_projects#gehraus</a> .</p>
</li>
<li>
<p><a id="GeHR_Aus_gpcg"></a>[GeHR_Aus_gpcg] Heard S. <strong>GEHR Project Australia, GPCG Trial.</strong> See <a href="http://www.openehr.org/resources/related_projects#gehraus" class="bare">http://www.openehr.org/resources/related_projects#gehraus</a> .</p>
</li>
<li>
<p><a id="GeHR_Aus_req"></a>[GeHR_Aus_req] Beale T, Heard S. <strong>GEHR Technical Requirements.</strong> See <a href="http://www.openehr.org/files/resources/related_projects/gehr_australia/gehr_requirements.pdf" class="bare">http://www.openehr.org/files/resources/related_projects/gehr_australia/gehr_requirements.pdf</a> .</p>
</li>
<li>
<p><a id="Synapses_req_A"></a>[Synapses_req_A] Kalra D. (Editor). <strong>The Synapses User Requirements and Functional Specification (Part A).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1a. 6 chapters, 176 pages.</p>
</li>
<li>
<p><a id="Synapses_req_B"></a>[Synapses_req_B] Grimson W. and Groth T. (Editors). <strong>The Synapses User Requirements and Functional Specification (Part B).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1b.</p>
</li>
<li>
<p><a id="Synapses_odp"></a>[Synapses_odp] Kalra D. (Editor). <strong>Synapses ODP Information Viewpoint.</strong> EU Telematics Application Programme, Brussels; 1998; The Synapses Project: Final Deliverable. 10 chapters, 64 pages. See <a href="http://discovery.ucl.ac.uk/66235/" class="bare">http://discovery.ucl.ac.uk/66235/</a> .</p>
</li>
<li>
<p><a id="synex"></a>[synex] University College London. <strong>SynEx project</strong>. <a href="http://www.chime.ucl.ac.uk/HealthI/SynEx/" class="bare">http://www.chime.ucl.ac.uk/HealthI/SynEx/</a> .</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_general_standards"><a class="anchor" href="#_general_standards"></a>General Standards</h4>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="OCL"></a>[OCL] <strong>The Object Constraint Language 2.0.</strong> Object Management Group (OMG). Available at <a href="http://www.omg.org/cgi-bin/doc?ptc/2003-10-14" class="bare">http://www.omg.org/cgi-bin/doc?ptc/2003-10-14</a> .</p>
</li>
<li>
<p><a id="IEEE_828"></a>[IEEE_828] IEEE. <strong>IEEE 828-2005: standard for Software Configuration Management Plans.</strong></p>
</li>
<li>
<p><a id="ISO_8601"></a>[ISO_8601] <strong>ISO 8601 standard describing formats for representing times, dates, and durations.</strong> See <a href="https://en.wikipedia.org/wiki/ISO_8601" class="bare">https://en.wikipedia.org/wiki/ISO_8601</a>.</p>
</li>
<li>
<p><a id="ISO_2788"></a>[ISO_2788] ISO. ISO 2788 <strong>Guide to Establishment and development of monolingual thesauri</strong>.</p>
</li>
<li>
<p><a id="ISO_5964"></a>[ISO_5964] ISO. ISO 5964 <strong>Guide to Establishment and development of multilingual thesauri</strong>.</p>
</li>
<li>
<p><a id="Perl_regex"></a>[Perl_regex] Perl.org. <strong>Perl Regular Expressions</strong>. Available at <a href="http://perldoc.perl.org/perlre.html" class="bare">http://perldoc.perl.org/perlre.html</a> .</p>
</li>
<li>
<p><a id="rfc_2396"></a>[rfc_2396] Berners-Lee T. <strong>Universal Resource Identifiers in WWW</strong>. Available at <a href="http://www.ietf.org/rfc/rfc2396.txt" class="bare">http://www.ietf.org/rfc/rfc2396.txt</a>. This is a World-Wide Web RFC for global identification of resources. In current use on the web, e.g. by Mosaic, Netscape and similar tools. See <a href="http://www.w3.org/Addressing" class="bare">http://www.w3.org/Addressing</a> for a starting point on URIs.</p>
</li>
<li>
<p><a id="rfc_2440"></a>[rfc_2440] <strong>RFC 2440: OpenPGP Message Format</strong>. See <a href="http://www.ietf.org/rfc/rfc2440.txt" class="bare">http://www.ietf.org/rfc/rfc2440.txt</a> and <a href="http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt" class="bare">http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt</a></p>
</li>
<li>
<p><a id="rfc_3986"></a>[rfc_3986] <strong>RFC 3986: Uniform Resource Identifier (URI): Generic Syntax</strong>. IETF. See <a href="http://www.ietf.org/rfc/rfc3986.txt" class="bare">http://www.ietf.org/rfc/rfc3986.txt</a> .</p>
</li>
<li>
<p><a id="rfc_4122"></a>[rfc_4122] <strong>RFC 4122: A Universally Unique IDentifier (UUID) URN Namespace</strong>. IETF. See <a href="http://www.ietf.org/rfc/rfc4122.txt" class="bare">http://www.ietf.org/rfc/rfc4122.txt</a> .</p>
</li>
<li>
<p><a id="rfc_2781"></a>[rfc_2781] IETF. <strong>RFC 2781: UTF-16, an encoding of ISO 10646</strong> See <a href="http://tools.ietf.org/html/rfc2781" class="bare">http://tools.ietf.org/html/rfc2781</a>.</p>
</li>
<li>
<p><a id="rfc_5646"></a>[rfc_5646] IETF. <strong>RFC 5646.</strong> Available at <a href="http://tools.ietf.org/html/rfc5646" class="bare">http://tools.ietf.org/html/rfc5646</a>.</p>
</li>
<li>
<p><a id="sem_ver"></a>[sem_ver] <strong>Semantic Versioning</strong>. <a href="http://semver.org" class="bare">http://semver.org</a> .</p>
</li>
<li>
<p><a id="Xpath"></a>[Xpath] W3C <strong>Xpath 1.0 specification</strong>. 1999. Available at <a href="http://www.w3.org/TR/xpath" class="bare">http://www.w3.org/TR/xpath</a>.</p>
</li>
<li>
<p><a id="uri_syntax"></a>[uri_syntax] <strong>Uniform Resource Identifier (URI): Generic Syntax, Internet proposed standard</strong>. January 2005. see <a href="http://www.ietf.org/rfc/rfc3986.txt" class="bare">http://www.ietf.org/rfc/rfc3986.txt</a> .</p>
</li>
<li>
<p><a id="w3c_owl"></a>[w3c_owl] W3C. <strong>OWL - the Web Ontology Language</strong>. See <a href="http://www.w3.org/TR/2003/CR-owl-ref-20030818/" class="bare">http://www.w3.org/TR/2003/CR-owl-ref-20030818/</a> .</p>
</li>
<li>
<p><a id="w3c_xpath"></a>[w3c_xpath] W3C. <strong>XML Path Language</strong>. See <a href="http://w3c.org/TR/xpath" class="bare">http://w3c.org/TR/xpath</a> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-03-10 14:03:38 GMT
</div>
</div>
</body>
</html>